(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('@angular/common'), require('rxjs'), require('rxjs/operators')) :
    typeof define === 'function' && define.amd ? define('okta-angular', ['exports', '@angular/core', '@angular/common', 'rxjs', 'rxjs/operators'], factory) :
    (global = global || self, factory((global.ng = global.ng || {}, global.ng.oktaAngular = {}), global.ng.core, global.ng.common, global.rxjs, global.rxjs.operators));
}(this, (function (exports, core, common, rxjs, operators) { 'use strict';

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
    /* global Reflect, Promise */

    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };

    function __extends(d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }

    var __assign = function() {
        __assign = Object.assign || function __assign(t) {
            for (var s, i = 1, n = arguments.length; i < n; i++) {
                s = arguments[i];
                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
            }
            return t;
        };
        return __assign.apply(this, arguments);
    };

    function __decorate(decorators, target, key, desc) {
        var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
        if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
        else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
        return c > 3 && r && Object.defineProperty(target, key, r), r;
    }

    function __param(paramIndex, decorator) {
        return function (target, key) { decorator(target, key, paramIndex); }
    }

    function __metadata(metadataKey, metadataValue) {
        if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(metadataKey, metadataValue);
    }

    function __awaiter(thisArg, _arguments, P, generator) {
        function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
        return new (P || (P = Promise))(function (resolve, reject) {
            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
            function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
            function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
            step((generator = generator.apply(thisArg, _arguments || [])).next());
        });
    }

    function __generator(thisArg, body) {
        var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
        return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
        function verb(n) { return function (v) { return step([n, v]); }; }
        function step(op) {
            if (f) throw new TypeError("Generator is already executing.");
            while (_) try {
                if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
                if (y = 0, t) op = [op[0] & 2, t.value];
                switch (op[0]) {
                    case 0: case 1: t = op; break;
                    case 4: _.label++; return { value: op[1], done: false };
                    case 5: _.label++; y = op[1]; op = [0]; continue;
                    case 7: op = _.ops.pop(); _.trys.pop(); continue;
                    default:
                        if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                        if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                        if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                        if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                        if (t[2]) _.ops.pop();
                        _.trys.pop(); continue;
                }
                op = body.call(thisArg, _);
            } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
            if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
        }
    }

    function __values(o) {
        var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
        if (m) return m.call(o);
        if (o && typeof o.length === "number") return {
            next: function () {
                if (o && i >= o.length) o = void 0;
                return { value: o && o[i++], done: !o };
            }
        };
        throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
    }

    function __read(o, n) {
        var m = typeof Symbol === "function" && o[Symbol.iterator];
        if (!m) return o;
        var i = m.call(o), r, ar = [], e;
        try {
            while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
        }
        catch (error) { e = { error: error }; }
        finally {
            try {
                if (r && !r.done && (m = i["return"])) m.call(i);
            }
            finally { if (e) throw e.error; }
        }
        return ar;
    }

    function __spread() {
        for (var ar = [], i = 0; i < arguments.length; i++)
            ar = ar.concat(__read(arguments[i]));
        return ar;
    }

    /**
     * @license Angular v7.2.16
     * (c) 2010-2019 Google LLC. https://angular.io/
     * License: MIT
     */

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    var _DOM = null;
    function getDOM() {
        return _DOM;
    }
    function setRootDomAdapter(adapter) {
        if (!_DOM) {
            _DOM = adapter;
        }
    }
    /* tslint:disable:requireParameterType */
    /**
     * Provides DOM operations in an environment-agnostic way.
     *
     * @security Tread carefully! Interacting with the DOM directly is dangerous and
     * can introduce XSS risks.
     */
    var DomAdapter = /** @class */ (function () {
        function DomAdapter() {
            this.resourceLoaderType = null;
        }
        Object.defineProperty(DomAdapter.prototype, "attrToPropMap", {
            /**
             * Maps attribute names to their corresponding property names for cases
             * where attribute name doesn't match property name.
             */
            get: function () { return this._attrToPropMap; },
            set: function (value) { this._attrToPropMap = value; },
            enumerable: true,
            configurable: true
        });
        return DomAdapter;
    }());

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    /**
     * Provides DOM operations in any browser environment.
     *
     * @security Tread carefully! Interacting with the DOM directly is dangerous and
     * can introduce XSS risks.
     */
    var GenericBrowserDomAdapter = /** @class */ (function (_super) {
        __extends(GenericBrowserDomAdapter, _super);
        function GenericBrowserDomAdapter() {
            var _this = _super.call(this) || this;
            _this._animationPrefix = null;
            _this._transitionEnd = null;
            try {
                var element_1 = _this.createElement('div', document);
                if (_this.getStyle(element_1, 'animationName') != null) {
                    _this._animationPrefix = '';
                }
                else {
                    var domPrefixes = ['Webkit', 'Moz', 'O', 'ms'];
                    for (var i = 0; i < domPrefixes.length; i++) {
                        if (_this.getStyle(element_1, domPrefixes[i] + 'AnimationName') != null) {
                            _this._animationPrefix = '-' + domPrefixes[i].toLowerCase() + '-';
                            break;
                        }
                    }
                }
                var transEndEventNames_1 = {
                    WebkitTransition: 'webkitTransitionEnd',
                    MozTransition: 'transitionend',
                    OTransition: 'oTransitionEnd otransitionend',
                    transition: 'transitionend'
                };
                Object.keys(transEndEventNames_1).forEach(function (key) {
                    if (_this.getStyle(element_1, key) != null) {
                        _this._transitionEnd = transEndEventNames_1[key];
                    }
                });
            }
            catch (_a) {
                _this._animationPrefix = null;
                _this._transitionEnd = null;
            }
            return _this;
        }
        GenericBrowserDomAdapter.prototype.getDistributedNodes = function (el) { return el.getDistributedNodes(); };
        GenericBrowserDomAdapter.prototype.resolveAndSetHref = function (el, baseUrl, href) {
            el.href = href == null ? baseUrl : baseUrl + '/../' + href;
        };
        GenericBrowserDomAdapter.prototype.supportsDOMEvents = function () { return true; };
        GenericBrowserDomAdapter.prototype.supportsNativeShadowDOM = function () {
            return typeof document.body.createShadowRoot === 'function';
        };
        GenericBrowserDomAdapter.prototype.getAnimationPrefix = function () { return this._animationPrefix ? this._animationPrefix : ''; };
        GenericBrowserDomAdapter.prototype.getTransitionEnd = function () { return this._transitionEnd ? this._transitionEnd : ''; };
        GenericBrowserDomAdapter.prototype.supportsAnimation = function () {
            return this._animationPrefix != null && this._transitionEnd != null;
        };
        return GenericBrowserDomAdapter;
    }(DomAdapter));

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    var _attrToPropMap = {
        'class': 'className',
        'innerHtml': 'innerHTML',
        'readonly': 'readOnly',
        'tabindex': 'tabIndex',
    };
    var DOM_KEY_LOCATION_NUMPAD = 3;
    // Map to convert some key or keyIdentifier values to what will be returned by getEventKey
    var _keyMap = {
        // The following values are here for cross-browser compatibility and to match the W3C standard
        // cf http://www.w3.org/TR/DOM-Level-3-Events-key/
        '\b': 'Backspace',
        '\t': 'Tab',
        '\x7F': 'Delete',
        '\x1B': 'Escape',
        'Del': 'Delete',
        'Esc': 'Escape',
        'Left': 'ArrowLeft',
        'Right': 'ArrowRight',
        'Up': 'ArrowUp',
        'Down': 'ArrowDown',
        'Menu': 'ContextMenu',
        'Scroll': 'ScrollLock',
        'Win': 'OS'
    };
    // There is a bug in Chrome for numeric keypad keys:
    // https://code.google.com/p/chromium/issues/detail?id=155654
    // 1, 2, 3 ... are reported as A, B, C ...
    var _chromeNumKeyPadMap = {
        'A': '1',
        'B': '2',
        'C': '3',
        'D': '4',
        'E': '5',
        'F': '6',
        'G': '7',
        'H': '8',
        'I': '9',
        'J': '*',
        'K': '+',
        'M': '-',
        'N': '.',
        'O': '/',
        '\x60': '0',
        '\x90': 'NumLock'
    };
    var nodeContains;
    if (core["ɵglobal"]['Node']) {
        nodeContains = core["ɵglobal"]['Node'].prototype.contains || function (node) {
            return !!(this.compareDocumentPosition(node) & 16);
        };
    }
    /**
     * A `DomAdapter` powered by full browser DOM APIs.
     *
     * @security Tread carefully! Interacting with the DOM directly is dangerous and
     * can introduce XSS risks.
     */
    /* tslint:disable:requireParameterType no-console */
    var BrowserDomAdapter = /** @class */ (function (_super) {
        __extends(BrowserDomAdapter, _super);
        function BrowserDomAdapter() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        BrowserDomAdapter.prototype.parse = function (templateHtml) { throw new Error('parse not implemented'); };
        BrowserDomAdapter.makeCurrent = function () { setRootDomAdapter(new BrowserDomAdapter()); };
        BrowserDomAdapter.prototype.hasProperty = function (element, name) { return name in element; };
        BrowserDomAdapter.prototype.setProperty = function (el, name, value) { el[name] = value; };
        BrowserDomAdapter.prototype.getProperty = function (el, name) { return el[name]; };
        BrowserDomAdapter.prototype.invoke = function (el, methodName, args) {
            var _a;
            (_a = el)[methodName].apply(_a, __spread(args));
        };
        // TODO(tbosch): move this into a separate environment class once we have it
        BrowserDomAdapter.prototype.logError = function (error) {
            if (window.console) {
                if (console.error) {
                    console.error(error);
                }
                else {
                    console.log(error);
                }
            }
        };
        BrowserDomAdapter.prototype.log = function (error) {
            if (window.console) {
                window.console.log && window.console.log(error);
            }
        };
        BrowserDomAdapter.prototype.logGroup = function (error) {
            if (window.console) {
                window.console.group && window.console.group(error);
            }
        };
        BrowserDomAdapter.prototype.logGroupEnd = function () {
            if (window.console) {
                window.console.groupEnd && window.console.groupEnd();
            }
        };
        Object.defineProperty(BrowserDomAdapter.prototype, "attrToPropMap", {
            get: function () { return _attrToPropMap; },
            enumerable: true,
            configurable: true
        });
        BrowserDomAdapter.prototype.contains = function (nodeA, nodeB) { return nodeContains.call(nodeA, nodeB); };
        BrowserDomAdapter.prototype.querySelector = function (el, selector) { return el.querySelector(selector); };
        BrowserDomAdapter.prototype.querySelectorAll = function (el, selector) { return el.querySelectorAll(selector); };
        BrowserDomAdapter.prototype.on = function (el, evt, listener) { el.addEventListener(evt, listener, false); };
        BrowserDomAdapter.prototype.onAndCancel = function (el, evt, listener) {
            el.addEventListener(evt, listener, false);
            // Needed to follow Dart's subscription semantic, until fix of
            // https://code.google.com/p/dart/issues/detail?id=17406
            return function () { el.removeEventListener(evt, listener, false); };
        };
        BrowserDomAdapter.prototype.dispatchEvent = function (el, evt) { el.dispatchEvent(evt); };
        BrowserDomAdapter.prototype.createMouseEvent = function (eventType) {
            var evt = this.getDefaultDocument().createEvent('MouseEvent');
            evt.initEvent(eventType, true, true);
            return evt;
        };
        BrowserDomAdapter.prototype.createEvent = function (eventType) {
            var evt = this.getDefaultDocument().createEvent('Event');
            evt.initEvent(eventType, true, true);
            return evt;
        };
        BrowserDomAdapter.prototype.preventDefault = function (evt) {
            evt.preventDefault();
            evt.returnValue = false;
        };
        BrowserDomAdapter.prototype.isPrevented = function (evt) {
            return evt.defaultPrevented || evt.returnValue != null && !evt.returnValue;
        };
        BrowserDomAdapter.prototype.getInnerHTML = function (el) { return el.innerHTML; };
        BrowserDomAdapter.prototype.getTemplateContent = function (el) {
            return 'content' in el && this.isTemplateElement(el) ? el.content : null;
        };
        BrowserDomAdapter.prototype.getOuterHTML = function (el) { return el.outerHTML; };
        BrowserDomAdapter.prototype.nodeName = function (node) { return node.nodeName; };
        BrowserDomAdapter.prototype.nodeValue = function (node) { return node.nodeValue; };
        BrowserDomAdapter.prototype.type = function (node) { return node.type; };
        BrowserDomAdapter.prototype.content = function (node) {
            if (this.hasProperty(node, 'content')) {
                return node.content;
            }
            else {
                return node;
            }
        };
        BrowserDomAdapter.prototype.firstChild = function (el) { return el.firstChild; };
        BrowserDomAdapter.prototype.nextSibling = function (el) { return el.nextSibling; };
        BrowserDomAdapter.prototype.parentElement = function (el) { return el.parentNode; };
        BrowserDomAdapter.prototype.childNodes = function (el) { return el.childNodes; };
        BrowserDomAdapter.prototype.childNodesAsList = function (el) {
            var childNodes = el.childNodes;
            var res = new Array(childNodes.length);
            for (var i = 0; i < childNodes.length; i++) {
                res[i] = childNodes[i];
            }
            return res;
        };
        BrowserDomAdapter.prototype.clearNodes = function (el) {
            while (el.firstChild) {
                el.removeChild(el.firstChild);
            }
        };
        BrowserDomAdapter.prototype.appendChild = function (el, node) { el.appendChild(node); };
        BrowserDomAdapter.prototype.removeChild = function (el, node) { el.removeChild(node); };
        BrowserDomAdapter.prototype.replaceChild = function (el, newChild, oldChild) { el.replaceChild(newChild, oldChild); };
        BrowserDomAdapter.prototype.remove = function (node) {
            if (node.parentNode) {
                node.parentNode.removeChild(node);
            }
            return node;
        };
        BrowserDomAdapter.prototype.insertBefore = function (parent, ref, node) { parent.insertBefore(node, ref); };
        BrowserDomAdapter.prototype.insertAllBefore = function (parent, ref, nodes) {
            nodes.forEach(function (n) { return parent.insertBefore(n, ref); });
        };
        BrowserDomAdapter.prototype.insertAfter = function (parent, ref, node) { parent.insertBefore(node, ref.nextSibling); };
        BrowserDomAdapter.prototype.setInnerHTML = function (el, value) { el.innerHTML = value; };
        BrowserDomAdapter.prototype.getText = function (el) { return el.textContent; };
        BrowserDomAdapter.prototype.setText = function (el, value) { el.textContent = value; };
        BrowserDomAdapter.prototype.getValue = function (el) { return el.value; };
        BrowserDomAdapter.prototype.setValue = function (el, value) { el.value = value; };
        BrowserDomAdapter.prototype.getChecked = function (el) { return el.checked; };
        BrowserDomAdapter.prototype.setChecked = function (el, value) { el.checked = value; };
        BrowserDomAdapter.prototype.createComment = function (text) { return this.getDefaultDocument().createComment(text); };
        BrowserDomAdapter.prototype.createTemplate = function (html) {
            var t = this.getDefaultDocument().createElement('template');
            t.innerHTML = html;
            return t;
        };
        BrowserDomAdapter.prototype.createElement = function (tagName, doc) {
            doc = doc || this.getDefaultDocument();
            return doc.createElement(tagName);
        };
        BrowserDomAdapter.prototype.createElementNS = function (ns, tagName, doc) {
            doc = doc || this.getDefaultDocument();
            return doc.createElementNS(ns, tagName);
        };
        BrowserDomAdapter.prototype.createTextNode = function (text, doc) {
            doc = doc || this.getDefaultDocument();
            return doc.createTextNode(text);
        };
        BrowserDomAdapter.prototype.createScriptTag = function (attrName, attrValue, doc) {
            doc = doc || this.getDefaultDocument();
            var el = doc.createElement('SCRIPT');
            el.setAttribute(attrName, attrValue);
            return el;
        };
        BrowserDomAdapter.prototype.createStyleElement = function (css, doc) {
            doc = doc || this.getDefaultDocument();
            var style = doc.createElement('style');
            this.appendChild(style, this.createTextNode(css, doc));
            return style;
        };
        BrowserDomAdapter.prototype.createShadowRoot = function (el) { return el.createShadowRoot(); };
        BrowserDomAdapter.prototype.getShadowRoot = function (el) { return el.shadowRoot; };
        BrowserDomAdapter.prototype.getHost = function (el) { return el.host; };
        BrowserDomAdapter.prototype.clone = function (node) { return node.cloneNode(true); };
        BrowserDomAdapter.prototype.getElementsByClassName = function (element, name) {
            return element.getElementsByClassName(name);
        };
        BrowserDomAdapter.prototype.getElementsByTagName = function (element, name) {
            return element.getElementsByTagName(name);
        };
        BrowserDomAdapter.prototype.classList = function (element) { return Array.prototype.slice.call(element.classList, 0); };
        BrowserDomAdapter.prototype.addClass = function (element, className) { element.classList.add(className); };
        BrowserDomAdapter.prototype.removeClass = function (element, className) { element.classList.remove(className); };
        BrowserDomAdapter.prototype.hasClass = function (element, className) {
            return element.classList.contains(className);
        };
        BrowserDomAdapter.prototype.setStyle = function (element, styleName, styleValue) {
            element.style[styleName] = styleValue;
        };
        BrowserDomAdapter.prototype.removeStyle = function (element, stylename) {
            // IE requires '' instead of null
            // see https://github.com/angular/angular/issues/7916
            element.style[stylename] = '';
        };
        BrowserDomAdapter.prototype.getStyle = function (element, stylename) { return element.style[stylename]; };
        BrowserDomAdapter.prototype.hasStyle = function (element, styleName, styleValue) {
            var value = this.getStyle(element, styleName) || '';
            return styleValue ? value == styleValue : value.length > 0;
        };
        BrowserDomAdapter.prototype.tagName = function (element) { return element.tagName; };
        BrowserDomAdapter.prototype.attributeMap = function (element) {
            var res = new Map();
            var elAttrs = element.attributes;
            for (var i = 0; i < elAttrs.length; i++) {
                var attrib = elAttrs.item(i);
                res.set(attrib.name, attrib.value);
            }
            return res;
        };
        BrowserDomAdapter.prototype.hasAttribute = function (element, attribute) {
            return element.hasAttribute(attribute);
        };
        BrowserDomAdapter.prototype.hasAttributeNS = function (element, ns, attribute) {
            return element.hasAttributeNS(ns, attribute);
        };
        BrowserDomAdapter.prototype.getAttribute = function (element, attribute) {
            return element.getAttribute(attribute);
        };
        BrowserDomAdapter.prototype.getAttributeNS = function (element, ns, name) {
            return element.getAttributeNS(ns, name);
        };
        BrowserDomAdapter.prototype.setAttribute = function (element, name, value) { element.setAttribute(name, value); };
        BrowserDomAdapter.prototype.setAttributeNS = function (element, ns, name, value) {
            element.setAttributeNS(ns, name, value);
        };
        BrowserDomAdapter.prototype.removeAttribute = function (element, attribute) { element.removeAttribute(attribute); };
        BrowserDomAdapter.prototype.removeAttributeNS = function (element, ns, name) {
            element.removeAttributeNS(ns, name);
        };
        BrowserDomAdapter.prototype.templateAwareRoot = function (el) { return this.isTemplateElement(el) ? this.content(el) : el; };
        BrowserDomAdapter.prototype.createHtmlDocument = function () {
            return document.implementation.createHTMLDocument('fakeTitle');
        };
        BrowserDomAdapter.prototype.getDefaultDocument = function () { return document; };
        BrowserDomAdapter.prototype.getBoundingClientRect = function (el) {
            try {
                return el.getBoundingClientRect();
            }
            catch (_a) {
                return { top: 0, bottom: 0, left: 0, right: 0, width: 0, height: 0 };
            }
        };
        BrowserDomAdapter.prototype.getTitle = function (doc) { return doc.title; };
        BrowserDomAdapter.prototype.setTitle = function (doc, newTitle) { doc.title = newTitle || ''; };
        BrowserDomAdapter.prototype.elementMatches = function (n, selector) {
            if (this.isElementNode(n)) {
                return n.matches && n.matches(selector) ||
                    n.msMatchesSelector && n.msMatchesSelector(selector) ||
                    n.webkitMatchesSelector && n.webkitMatchesSelector(selector);
            }
            return false;
        };
        BrowserDomAdapter.prototype.isTemplateElement = function (el) {
            return this.isElementNode(el) && el.nodeName === 'TEMPLATE';
        };
        BrowserDomAdapter.prototype.isTextNode = function (node) { return node.nodeType === Node.TEXT_NODE; };
        BrowserDomAdapter.prototype.isCommentNode = function (node) { return node.nodeType === Node.COMMENT_NODE; };
        BrowserDomAdapter.prototype.isElementNode = function (node) { return node.nodeType === Node.ELEMENT_NODE; };
        BrowserDomAdapter.prototype.hasShadowRoot = function (node) {
            return node.shadowRoot != null && node instanceof HTMLElement;
        };
        BrowserDomAdapter.prototype.isShadowRoot = function (node) { return node instanceof DocumentFragment; };
        BrowserDomAdapter.prototype.importIntoDoc = function (node) { return document.importNode(this.templateAwareRoot(node), true); };
        BrowserDomAdapter.prototype.adoptNode = function (node) { return document.adoptNode(node); };
        BrowserDomAdapter.prototype.getHref = function (el) { return el.getAttribute('href'); };
        BrowserDomAdapter.prototype.getEventKey = function (event) {
            var key = event.key;
            if (key == null) {
                key = event.keyIdentifier;
                // keyIdentifier is defined in the old draft of DOM Level 3 Events implemented by Chrome and
                // Safari cf
                // http://www.w3.org/TR/2007/WD-DOM-Level-3-Events-20071221/events.html#Events-KeyboardEvents-Interfaces
                if (key == null) {
                    return 'Unidentified';
                }
                if (key.startsWith('U+')) {
                    key = String.fromCharCode(parseInt(key.substring(2), 16));
                    if (event.location === DOM_KEY_LOCATION_NUMPAD && _chromeNumKeyPadMap.hasOwnProperty(key)) {
                        // There is a bug in Chrome for numeric keypad keys:
                        // https://code.google.com/p/chromium/issues/detail?id=155654
                        // 1, 2, 3 ... are reported as A, B, C ...
                        key = _chromeNumKeyPadMap[key];
                    }
                }
            }
            return _keyMap[key] || key;
        };
        BrowserDomAdapter.prototype.getGlobalEventTarget = function (doc, target) {
            if (target === 'window') {
                return window;
            }
            if (target === 'document') {
                return doc;
            }
            if (target === 'body') {
                return doc.body;
            }
            return null;
        };
        BrowserDomAdapter.prototype.getHistory = function () { return window.history; };
        BrowserDomAdapter.prototype.getLocation = function () { return window.location; };
        BrowserDomAdapter.prototype.getBaseHref = function (doc) {
            var href = getBaseElementHref();
            return href == null ? null : relativePath(href);
        };
        BrowserDomAdapter.prototype.resetBaseElement = function () { baseElement = null; };
        BrowserDomAdapter.prototype.getUserAgent = function () { return window.navigator.userAgent; };
        BrowserDomAdapter.prototype.setData = function (element, name, value) {
            this.setAttribute(element, 'data-' + name, value);
        };
        BrowserDomAdapter.prototype.getData = function (element, name) {
            return this.getAttribute(element, 'data-' + name);
        };
        BrowserDomAdapter.prototype.getComputedStyle = function (element) { return getComputedStyle(element); };
        // TODO(tbosch): move this into a separate environment class once we have it
        BrowserDomAdapter.prototype.supportsWebAnimation = function () {
            return typeof Element.prototype['animate'] === 'function';
        };
        BrowserDomAdapter.prototype.performanceNow = function () {
            // performance.now() is not available in all browsers, see
            // http://caniuse.com/#search=performance.now
            return window.performance && window.performance.now ? window.performance.now() :
                new Date().getTime();
        };
        BrowserDomAdapter.prototype.supportsCookies = function () { return true; };
        BrowserDomAdapter.prototype.getCookie = function (name) { return common["ɵparseCookieValue"](document.cookie, name); };
        BrowserDomAdapter.prototype.setCookie = function (name, value) {
            // document.cookie is magical, assigning into it assigns/overrides one cookie value, but does
            // not clear other cookies.
            document.cookie = encodeURIComponent(name) + '=' + encodeURIComponent(value);
        };
        return BrowserDomAdapter;
    }(GenericBrowserDomAdapter));
    var baseElement = null;
    function getBaseElementHref() {
        if (!baseElement) {
            baseElement = document.querySelector('base');
            if (!baseElement) {
                return null;
            }
        }
        return baseElement.getAttribute('href');
    }
    // based on urlUtils.js in AngularJS 1
    var urlParsingNode;
    function relativePath(url) {
        if (!urlParsingNode) {
            urlParsingNode = document.createElement('a');
        }
        urlParsingNode.setAttribute('href', url);
        return (urlParsingNode.pathname.charAt(0) === '/') ? urlParsingNode.pathname :
            '/' + urlParsingNode.pathname;
    }

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    /**
     * A DI Token representing the main rendering context. In a browser this is the DOM Document.
     *
     * Note: Document might not be available in the Application Context when Application and Rendering
     * Contexts are not the same (e.g. when running the application into a Web Worker).
     *
     * @deprecated import from `@angular/common` instead.
     * @publicApi
     */
    var DOCUMENT$1 = common.DOCUMENT;

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    function supportsState() {
        return !!window.history.pushState;
    }

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    /**
     * `PlatformLocation` encapsulates all of the direct calls to platform APIs.
     * This class should not be used directly by an application developer. Instead, use
     * {@link Location}.
     */
    var BrowserPlatformLocation = /** @class */ (function (_super) {
        __extends(BrowserPlatformLocation, _super);
        function BrowserPlatformLocation(_doc) {
            var _this = _super.call(this) || this;
            _this._doc = _doc;
            _this._init();
            return _this;
        }
        // This is moved to its own method so that `MockPlatformLocationStrategy` can overwrite it
        /** @internal */
        BrowserPlatformLocation.prototype._init = function () {
            this.location = getDOM().getLocation();
            this._history = getDOM().getHistory();
        };
        BrowserPlatformLocation.prototype.getBaseHrefFromDOM = function () { return getDOM().getBaseHref(this._doc); };
        BrowserPlatformLocation.prototype.onPopState = function (fn) {
            getDOM().getGlobalEventTarget(this._doc, 'window').addEventListener('popstate', fn, false);
        };
        BrowserPlatformLocation.prototype.onHashChange = function (fn) {
            getDOM().getGlobalEventTarget(this._doc, 'window').addEventListener('hashchange', fn, false);
        };
        Object.defineProperty(BrowserPlatformLocation.prototype, "pathname", {
            get: function () { return this.location.pathname; },
            set: function (newPath) { this.location.pathname = newPath; },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(BrowserPlatformLocation.prototype, "search", {
            get: function () { return this.location.search; },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(BrowserPlatformLocation.prototype, "hash", {
            get: function () { return this.location.hash; },
            enumerable: true,
            configurable: true
        });
        BrowserPlatformLocation.prototype.pushState = function (state, title, url) {
            if (supportsState()) {
                this._history.pushState(state, title, url);
            }
            else {
                this.location.hash = url;
            }
        };
        BrowserPlatformLocation.prototype.replaceState = function (state, title, url) {
            if (supportsState()) {
                this._history.replaceState(state, title, url);
            }
            else {
                this.location.hash = url;
            }
        };
        BrowserPlatformLocation.prototype.forward = function () { this._history.forward(); };
        BrowserPlatformLocation.prototype.back = function () { this._history.back(); };
        BrowserPlatformLocation = __decorate([
            core.Injectable(),
            __param(0, core.Inject(DOCUMENT$1)),
            __metadata("design:paramtypes", [Object])
        ], BrowserPlatformLocation);
        return BrowserPlatformLocation;
    }(common.PlatformLocation));

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    /**
     * An id that identifies a particular application being bootstrapped, that should
     * match across the client/server boundary.
     */
    var TRANSITION_ID = new core.InjectionToken('TRANSITION_ID');
    function appInitializerFactory(transitionId, document, injector) {
        return function () {
            // Wait for all application initializers to be completed before removing the styles set by
            // the server.
            injector.get(core.ApplicationInitStatus).donePromise.then(function () {
                var dom = getDOM();
                var styles = Array.prototype.slice.apply(dom.querySelectorAll(document, "style[ng-transition]"));
                styles.filter(function (el) { return dom.getAttribute(el, 'ng-transition') === transitionId; })
                    .forEach(function (el) { return dom.remove(el); });
            });
        };
    }
    var SERVER_TRANSITION_PROVIDERS = [
        {
            provide: core.APP_INITIALIZER,
            useFactory: appInitializerFactory,
            deps: [TRANSITION_ID, DOCUMENT$1, core.Injector],
            multi: true
        },
    ];

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    var BrowserGetTestability = /** @class */ (function () {
        function BrowserGetTestability() {
        }
        BrowserGetTestability.init = function () { core.setTestabilityGetter(new BrowserGetTestability()); };
        BrowserGetTestability.prototype.addToWindow = function (registry) {
            core["ɵglobal"]['getAngularTestability'] = function (elem, findInAncestors) {
                if (findInAncestors === void 0) { findInAncestors = true; }
                var testability = registry.findTestabilityInTree(elem, findInAncestors);
                if (testability == null) {
                    throw new Error('Could not find testability for element.');
                }
                return testability;
            };
            core["ɵglobal"]['getAllAngularTestabilities'] = function () { return registry.getAllTestabilities(); };
            core["ɵglobal"]['getAllAngularRootElements'] = function () { return registry.getAllRootElements(); };
            var whenAllStable = function (callback /** TODO #9100 */) {
                var testabilities = core["ɵglobal"]['getAllAngularTestabilities']();
                var count = testabilities.length;
                var didWork = false;
                var decrement = function (didWork_ /** TODO #9100 */) {
                    didWork = didWork || didWork_;
                    count--;
                    if (count == 0) {
                        callback(didWork);
                    }
                };
                testabilities.forEach(function (testability /** TODO #9100 */) {
                    testability.whenStable(decrement);
                });
            };
            if (!core["ɵglobal"]['frameworkStabilizers']) {
                core["ɵglobal"]['frameworkStabilizers'] = [];
            }
            core["ɵglobal"]['frameworkStabilizers'].push(whenAllStable);
        };
        BrowserGetTestability.prototype.findTestabilityInTree = function (registry, elem, findInAncestors) {
            if (elem == null) {
                return null;
            }
            var t = registry.getTestability(elem);
            if (t != null) {
                return t;
            }
            else if (!findInAncestors) {
                return null;
            }
            if (getDOM().isShadowRoot(elem)) {
                return this.findTestabilityInTree(registry, getDOM().getHost(elem), true);
            }
            return this.findTestabilityInTree(registry, getDOM().parentElement(elem), true);
        };
        return BrowserGetTestability;
    }());

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    /**
     * Exports the value under a given `name` in the global property `ng`. For example `ng.probe` if
     * `name` is `'probe'`.
     * @param name Name under which it will be exported. Keep in mind this will be a property of the
     * global `ng` object.
     * @param value The value to export.
     */
    function exportNgVar(name, value) {
        if (typeof COMPILED === 'undefined' || !COMPILED) {
            // Note: we can't export `ng` when using closure enhanced optimization as:
            // - closure declares globals itself for minified names, which sometimes clobber our `ng` global
            // - we can't declare a closure extern as the namespace `ng` is already used within Google
            //   for typings for angularJS (via `goog.provide('ng....')`).
            var ng = core["ɵglobal"]['ng'] = core["ɵglobal"]['ng'] || {};
            ng[name] = value;
        }
    }

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    var CORE_TOKENS = {
        'ApplicationRef': core.ApplicationRef,
        'NgZone': core.NgZone,
    };
    var INSPECT_GLOBAL_NAME = 'probe';
    var CORE_TOKENS_GLOBAL_NAME = 'coreTokens';
    /**
     * Returns a {@link DebugElement} for the given native DOM element, or
     * null if the given native element does not have an Angular view associated
     * with it.
     */
    function inspectNativeElement(element) {
        return core.getDebugNode(element);
    }
    function _createNgProbe(coreTokens) {
        exportNgVar(INSPECT_GLOBAL_NAME, inspectNativeElement);
        exportNgVar(CORE_TOKENS_GLOBAL_NAME, __assign({}, CORE_TOKENS, _ngProbeTokensToMap(coreTokens || [])));
        return function () { return inspectNativeElement; };
    }
    function _ngProbeTokensToMap(tokens) {
        return tokens.reduce(function (prev, t) { return (prev[t.name] = t.token, prev); }, {});
    }
    /**
     * Providers which support debugging Angular applications (e.g. via `ng.probe`).
     */
    var ELEMENT_PROBE_PROVIDERS = [
        {
            provide: core.APP_INITIALIZER,
            useFactory: _createNgProbe,
            deps: [
                [core.NgProbeToken, new core.Optional()],
            ],
            multi: true,
        },
    ];

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    /**
     * The injection token for the event-manager plug-in service.
     *
     * @publicApi
     */
    var EVENT_MANAGER_PLUGINS = new core.InjectionToken('EventManagerPlugins');
    /**
     * An injectable service that provides event management for Angular
     * through a browser plug-in.
     *
     * @publicApi
     */
    var EventManager = /** @class */ (function () {
        /**
         * Initializes an instance of the event-manager service.
         */
        function EventManager(plugins, _zone) {
            var _this = this;
            this._zone = _zone;
            this._eventNameToPlugin = new Map();
            plugins.forEach(function (p) { return p.manager = _this; });
            this._plugins = plugins.slice().reverse();
        }
        /**
         * Registers a handler for a specific element and event.
         *
         * @param element The HTML element to receive event notifications.
         * @param eventName The name of the event to listen for.
         * @param handler A function to call when the notification occurs. Receives the
         * event object as an argument.
         * @returns  A callback function that can be used to remove the handler.
         */
        EventManager.prototype.addEventListener = function (element, eventName, handler) {
            var plugin = this._findPluginFor(eventName);
            return plugin.addEventListener(element, eventName, handler);
        };
        /**
         * Registers a global handler for an event in a target view.
         *
         * @param target A target for global event notifications. One of "window", "document", or "body".
         * @param eventName The name of the event to listen for.
         * @param handler A function to call when the notification occurs. Receives the
         * event object as an argument.
         * @returns A callback function that can be used to remove the handler.
         */
        EventManager.prototype.addGlobalEventListener = function (target, eventName, handler) {
            var plugin = this._findPluginFor(eventName);
            return plugin.addGlobalEventListener(target, eventName, handler);
        };
        /**
         * Retrieves the compilation zone in which event listeners are registered.
         */
        EventManager.prototype.getZone = function () { return this._zone; };
        /** @internal */
        EventManager.prototype._findPluginFor = function (eventName) {
            var plugin = this._eventNameToPlugin.get(eventName);
            if (plugin) {
                return plugin;
            }
            var plugins = this._plugins;
            for (var i = 0; i < plugins.length; i++) {
                var plugin_1 = plugins[i];
                if (plugin_1.supports(eventName)) {
                    this._eventNameToPlugin.set(eventName, plugin_1);
                    return plugin_1;
                }
            }
            throw new Error("No event manager plugin found for event " + eventName);
        };
        EventManager = __decorate([
            core.Injectable(),
            __param(0, core.Inject(EVENT_MANAGER_PLUGINS)),
            __metadata("design:paramtypes", [Array, core.NgZone])
        ], EventManager);
        return EventManager;
    }());
    var EventManagerPlugin = /** @class */ (function () {
        function EventManagerPlugin(_doc) {
            this._doc = _doc;
        }
        EventManagerPlugin.prototype.addGlobalEventListener = function (element, eventName, handler) {
            var target = getDOM().getGlobalEventTarget(this._doc, element);
            if (!target) {
                throw new Error("Unsupported event target " + target + " for event " + eventName);
            }
            return this.addEventListener(target, eventName, handler);
        };
        return EventManagerPlugin;
    }());

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    var SharedStylesHost = /** @class */ (function () {
        function SharedStylesHost() {
            /** @internal */
            this._stylesSet = new Set();
        }
        SharedStylesHost.prototype.addStyles = function (styles) {
            var _this = this;
            var additions = new Set();
            styles.forEach(function (style) {
                if (!_this._stylesSet.has(style)) {
                    _this._stylesSet.add(style);
                    additions.add(style);
                }
            });
            this.onStylesAdded(additions);
        };
        SharedStylesHost.prototype.onStylesAdded = function (additions) { };
        SharedStylesHost.prototype.getAllStyles = function () { return Array.from(this._stylesSet); };
        SharedStylesHost = __decorate([
            core.Injectable()
        ], SharedStylesHost);
        return SharedStylesHost;
    }());
    var DomSharedStylesHost = /** @class */ (function (_super) {
        __extends(DomSharedStylesHost, _super);
        function DomSharedStylesHost(_doc) {
            var _this = _super.call(this) || this;
            _this._doc = _doc;
            _this._hostNodes = new Set();
            _this._styleNodes = new Set();
            _this._hostNodes.add(_doc.head);
            return _this;
        }
        DomSharedStylesHost.prototype._addStylesToHost = function (styles, host) {
            var _this = this;
            styles.forEach(function (style) {
                var styleEl = _this._doc.createElement('style');
                styleEl.textContent = style;
                _this._styleNodes.add(host.appendChild(styleEl));
            });
        };
        DomSharedStylesHost.prototype.addHost = function (hostNode) {
            this._addStylesToHost(this._stylesSet, hostNode);
            this._hostNodes.add(hostNode);
        };
        DomSharedStylesHost.prototype.removeHost = function (hostNode) { this._hostNodes.delete(hostNode); };
        DomSharedStylesHost.prototype.onStylesAdded = function (additions) {
            var _this = this;
            this._hostNodes.forEach(function (hostNode) { return _this._addStylesToHost(additions, hostNode); });
        };
        DomSharedStylesHost.prototype.ngOnDestroy = function () { this._styleNodes.forEach(function (styleNode) { return getDOM().remove(styleNode); }); };
        DomSharedStylesHost = __decorate([
            core.Injectable(),
            __param(0, core.Inject(DOCUMENT$1)),
            __metadata("design:paramtypes", [Object])
        ], DomSharedStylesHost);
        return DomSharedStylesHost;
    }(SharedStylesHost));

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    var NAMESPACE_URIS = {
        'svg': 'http://www.w3.org/2000/svg',
        'xhtml': 'http://www.w3.org/1999/xhtml',
        'xlink': 'http://www.w3.org/1999/xlink',
        'xml': 'http://www.w3.org/XML/1998/namespace',
        'xmlns': 'http://www.w3.org/2000/xmlns/',
    };
    var COMPONENT_REGEX = /%COMP%/g;
    var COMPONENT_VARIABLE = '%COMP%';
    var HOST_ATTR = "_nghost-" + COMPONENT_VARIABLE;
    var CONTENT_ATTR = "_ngcontent-" + COMPONENT_VARIABLE;
    function shimContentAttribute(componentShortId) {
        return CONTENT_ATTR.replace(COMPONENT_REGEX, componentShortId);
    }
    function shimHostAttribute(componentShortId) {
        return HOST_ATTR.replace(COMPONENT_REGEX, componentShortId);
    }
    function flattenStyles(compId, styles, target) {
        for (var i = 0; i < styles.length; i++) {
            var style = styles[i];
            if (Array.isArray(style)) {
                flattenStyles(compId, style, target);
            }
            else {
                style = style.replace(COMPONENT_REGEX, compId);
                target.push(style);
            }
        }
        return target;
    }
    function decoratePreventDefault(eventHandler) {
        return function (event) {
            var allowDefaultBehavior = eventHandler(event);
            if (allowDefaultBehavior === false) {
                // TODO(tbosch): move preventDefault into event plugins...
                event.preventDefault();
                event.returnValue = false;
            }
        };
    }
    var DomRendererFactory2 = /** @class */ (function () {
        function DomRendererFactory2(eventManager, sharedStylesHost, appId) {
            this.eventManager = eventManager;
            this.sharedStylesHost = sharedStylesHost;
            this.appId = appId;
            this.rendererByCompId = new Map();
            this.defaultRenderer = new DefaultDomRenderer2(eventManager);
        }
        DomRendererFactory2.prototype.createRenderer = function (element, type) {
            if (!element || !type) {
                return this.defaultRenderer;
            }
            switch (type.encapsulation) {
                case core.ViewEncapsulation.Emulated: {
                    var renderer = this.rendererByCompId.get(type.id);
                    if (!renderer) {
                        renderer = new EmulatedEncapsulationDomRenderer2(this.eventManager, this.sharedStylesHost, type, this.appId);
                        this.rendererByCompId.set(type.id, renderer);
                    }
                    renderer.applyToHost(element);
                    return renderer;
                }
                case core.ViewEncapsulation.Native:
                case core.ViewEncapsulation.ShadowDom:
                    return new ShadowDomRenderer(this.eventManager, this.sharedStylesHost, element, type);
                default: {
                    if (!this.rendererByCompId.has(type.id)) {
                        var styles = flattenStyles(type.id, type.styles, []);
                        this.sharedStylesHost.addStyles(styles);
                        this.rendererByCompId.set(type.id, this.defaultRenderer);
                    }
                    return this.defaultRenderer;
                }
            }
        };
        DomRendererFactory2.prototype.begin = function () { };
        DomRendererFactory2.prototype.end = function () { };
        DomRendererFactory2 = __decorate([
            core.Injectable(),
            __param(2, core.Inject(core.APP_ID)),
            __metadata("design:paramtypes", [EventManager, DomSharedStylesHost, String])
        ], DomRendererFactory2);
        return DomRendererFactory2;
    }());
    var DefaultDomRenderer2 = /** @class */ (function () {
        function DefaultDomRenderer2(eventManager) {
            this.eventManager = eventManager;
            this.data = Object.create(null);
        }
        DefaultDomRenderer2.prototype.destroy = function () { };
        DefaultDomRenderer2.prototype.createElement = function (name, namespace) {
            if (namespace) {
                return document.createElementNS(NAMESPACE_URIS[namespace], name);
            }
            return document.createElement(name);
        };
        DefaultDomRenderer2.prototype.createComment = function (value) { return document.createComment(value); };
        DefaultDomRenderer2.prototype.createText = function (value) { return document.createTextNode(value); };
        DefaultDomRenderer2.prototype.appendChild = function (parent, newChild) { parent.appendChild(newChild); };
        DefaultDomRenderer2.prototype.insertBefore = function (parent, newChild, refChild) {
            if (parent) {
                parent.insertBefore(newChild, refChild);
            }
        };
        DefaultDomRenderer2.prototype.removeChild = function (parent, oldChild) {
            if (parent) {
                parent.removeChild(oldChild);
            }
        };
        DefaultDomRenderer2.prototype.selectRootElement = function (selectorOrNode, preserveContent) {
            var el = typeof selectorOrNode === 'string' ? document.querySelector(selectorOrNode) :
                selectorOrNode;
            if (!el) {
                throw new Error("The selector \"" + selectorOrNode + "\" did not match any elements");
            }
            if (!preserveContent) {
                el.textContent = '';
            }
            return el;
        };
        DefaultDomRenderer2.prototype.parentNode = function (node) { return node.parentNode; };
        DefaultDomRenderer2.prototype.nextSibling = function (node) { return node.nextSibling; };
        DefaultDomRenderer2.prototype.setAttribute = function (el, name, value, namespace) {
            if (namespace) {
                name = namespace + ":" + name;
                var namespaceUri = NAMESPACE_URIS[namespace];
                if (namespaceUri) {
                    el.setAttributeNS(namespaceUri, name, value);
                }
                else {
                    el.setAttribute(name, value);
                }
            }
            else {
                el.setAttribute(name, value);
            }
        };
        DefaultDomRenderer2.prototype.removeAttribute = function (el, name, namespace) {
            if (namespace) {
                var namespaceUri = NAMESPACE_URIS[namespace];
                if (namespaceUri) {
                    el.removeAttributeNS(namespaceUri, name);
                }
                else {
                    el.removeAttribute(namespace + ":" + name);
                }
            }
            else {
                el.removeAttribute(name);
            }
        };
        DefaultDomRenderer2.prototype.addClass = function (el, name) { el.classList.add(name); };
        DefaultDomRenderer2.prototype.removeClass = function (el, name) { el.classList.remove(name); };
        DefaultDomRenderer2.prototype.setStyle = function (el, style, value, flags) {
            if (flags & core.RendererStyleFlags2.DashCase) {
                el.style.setProperty(style, value, !!(flags & core.RendererStyleFlags2.Important) ? 'important' : '');
            }
            else {
                el.style[style] = value;
            }
        };
        DefaultDomRenderer2.prototype.removeStyle = function (el, style, flags) {
            if (flags & core.RendererStyleFlags2.DashCase) {
                el.style.removeProperty(style);
            }
            else {
                // IE requires '' instead of null
                // see https://github.com/angular/angular/issues/7916
                el.style[style] = '';
            }
        };
        DefaultDomRenderer2.prototype.setProperty = function (el, name, value) {
            checkNoSyntheticProp(name, 'property');
            el[name] = value;
        };
        DefaultDomRenderer2.prototype.setValue = function (node, value) { node.nodeValue = value; };
        DefaultDomRenderer2.prototype.listen = function (target, event, callback) {
            checkNoSyntheticProp(event, 'listener');
            if (typeof target === 'string') {
                return this.eventManager.addGlobalEventListener(target, event, decoratePreventDefault(callback));
            }
            return this.eventManager.addEventListener(target, event, decoratePreventDefault(callback));
        };
        return DefaultDomRenderer2;
    }());
    var AT_CHARCODE = '@'.charCodeAt(0);
    function checkNoSyntheticProp(name, nameKind) {
        if (name.charCodeAt(0) === AT_CHARCODE) {
            throw new Error("Found the synthetic " + nameKind + " " + name + ". Please include either \"BrowserAnimationsModule\" or \"NoopAnimationsModule\" in your application.");
        }
    }
    var EmulatedEncapsulationDomRenderer2 = /** @class */ (function (_super) {
        __extends(EmulatedEncapsulationDomRenderer2, _super);
        function EmulatedEncapsulationDomRenderer2(eventManager, sharedStylesHost, component, appId) {
            var _this = _super.call(this, eventManager) || this;
            _this.component = component;
            var styles = flattenStyles(appId + '-' + component.id, component.styles, []);
            sharedStylesHost.addStyles(styles);
            _this.contentAttr = shimContentAttribute(appId + '-' + component.id);
            _this.hostAttr = shimHostAttribute(appId + '-' + component.id);
            return _this;
        }
        EmulatedEncapsulationDomRenderer2.prototype.applyToHost = function (element) { _super.prototype.setAttribute.call(this, element, this.hostAttr, ''); };
        EmulatedEncapsulationDomRenderer2.prototype.createElement = function (parent, name) {
            var el = _super.prototype.createElement.call(this, parent, name);
            _super.prototype.setAttribute.call(this, el, this.contentAttr, '');
            return el;
        };
        return EmulatedEncapsulationDomRenderer2;
    }(DefaultDomRenderer2));
    var ShadowDomRenderer = /** @class */ (function (_super) {
        __extends(ShadowDomRenderer, _super);
        function ShadowDomRenderer(eventManager, sharedStylesHost, hostEl, component) {
            var _this = _super.call(this, eventManager) || this;
            _this.sharedStylesHost = sharedStylesHost;
            _this.hostEl = hostEl;
            _this.component = component;
            if (component.encapsulation === core.ViewEncapsulation.ShadowDom) {
                _this.shadowRoot = hostEl.attachShadow({ mode: 'open' });
            }
            else {
                _this.shadowRoot = hostEl.createShadowRoot();
            }
            _this.sharedStylesHost.addHost(_this.shadowRoot);
            var styles = flattenStyles(component.id, component.styles, []);
            for (var i = 0; i < styles.length; i++) {
                var styleEl = document.createElement('style');
                styleEl.textContent = styles[i];
                _this.shadowRoot.appendChild(styleEl);
            }
            return _this;
        }
        ShadowDomRenderer.prototype.nodeOrShadowRoot = function (node) { return node === this.hostEl ? this.shadowRoot : node; };
        ShadowDomRenderer.prototype.destroy = function () { this.sharedStylesHost.removeHost(this.shadowRoot); };
        ShadowDomRenderer.prototype.appendChild = function (parent, newChild) {
            return _super.prototype.appendChild.call(this, this.nodeOrShadowRoot(parent), newChild);
        };
        ShadowDomRenderer.prototype.insertBefore = function (parent, newChild, refChild) {
            return _super.prototype.insertBefore.call(this, this.nodeOrShadowRoot(parent), newChild, refChild);
        };
        ShadowDomRenderer.prototype.removeChild = function (parent, oldChild) {
            return _super.prototype.removeChild.call(this, this.nodeOrShadowRoot(parent), oldChild);
        };
        ShadowDomRenderer.prototype.parentNode = function (node) {
            return this.nodeOrShadowRoot(_super.prototype.parentNode.call(this, this.nodeOrShadowRoot(node)));
        };
        return ShadowDomRenderer;
    }(DefaultDomRenderer2));

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    var ɵ0 = function (v) {
        return '__zone_symbol__' + v;
    };
    /**
     * Detect if Zone is present. If it is then use simple zone aware 'addEventListener'
     * since Angular can do much more
     * efficient bookkeeping than Zone can, because we have additional information. This speeds up
     * addEventListener by 3x.
     */
    var __symbol__ = (typeof Zone !== 'undefined') && Zone['__symbol__'] || ɵ0;
    var ADD_EVENT_LISTENER = __symbol__('addEventListener');
    var REMOVE_EVENT_LISTENER = __symbol__('removeEventListener');
    var symbolNames = {};
    var FALSE = 'FALSE';
    var ANGULAR = 'ANGULAR';
    var NATIVE_ADD_LISTENER = 'addEventListener';
    var NATIVE_REMOVE_LISTENER = 'removeEventListener';
    // use the same symbol string which is used in zone.js
    var stopSymbol = '__zone_symbol__propagationStopped';
    var stopMethodSymbol = '__zone_symbol__stopImmediatePropagation';
    var blackListedEvents = (typeof Zone !== 'undefined') && Zone[__symbol__('BLACK_LISTED_EVENTS')];
    var blackListedMap;
    if (blackListedEvents) {
        blackListedMap = {};
        blackListedEvents.forEach(function (eventName) { blackListedMap[eventName] = eventName; });
    }
    var isBlackListedEvent = function (eventName) {
        if (!blackListedMap) {
            return false;
        }
        return blackListedMap.hasOwnProperty(eventName);
    };
    // a global listener to handle all dom event,
    // so we do not need to create a closure every time
    var globalListener = function (event) {
        var symbolName = symbolNames[event.type];
        if (!symbolName) {
            return;
        }
        var taskDatas = this[symbolName];
        if (!taskDatas) {
            return;
        }
        var args = [event];
        if (taskDatas.length === 1) {
            // if taskDatas only have one element, just invoke it
            var taskData = taskDatas[0];
            if (taskData.zone !== Zone.current) {
                // only use Zone.run when Zone.current not equals to stored zone
                return taskData.zone.run(taskData.handler, this, args);
            }
            else {
                return taskData.handler.apply(this, args);
            }
        }
        else {
            // copy tasks as a snapshot to avoid event handlers remove
            // itself or others
            var copiedTasks = taskDatas.slice();
            for (var i = 0; i < copiedTasks.length; i++) {
                // if other listener call event.stopImmediatePropagation
                // just break
                if (event[stopSymbol] === true) {
                    break;
                }
                var taskData = copiedTasks[i];
                if (taskData.zone !== Zone.current) {
                    // only use Zone.run when Zone.current not equals to stored zone
                    taskData.zone.run(taskData.handler, this, args);
                }
                else {
                    taskData.handler.apply(this, args);
                }
            }
        }
    };
    var DomEventsPlugin = /** @class */ (function (_super) {
        __extends(DomEventsPlugin, _super);
        function DomEventsPlugin(doc, ngZone, platformId) {
            var _this = _super.call(this, doc) || this;
            _this.ngZone = ngZone;
            if (!platformId || !common.isPlatformServer(platformId)) {
                _this.patchEvent();
            }
            return _this;
        }
        DomEventsPlugin.prototype.patchEvent = function () {
            if (typeof Event === 'undefined' || !Event || !Event.prototype) {
                return;
            }
            if (Event.prototype[stopMethodSymbol]) {
                // already patched by zone.js
                return;
            }
            var delegate = Event.prototype[stopMethodSymbol] =
                Event.prototype.stopImmediatePropagation;
            Event.prototype.stopImmediatePropagation = function () {
                if (this) {
                    this[stopSymbol] = true;
                }
                // should call native delegate in case
                // in some environment part of the application
                // will not use the patched Event
                delegate && delegate.apply(this, arguments);
            };
        };
        // This plugin should come last in the list of plugins, because it accepts all
        // events.
        DomEventsPlugin.prototype.supports = function (eventName) { return true; };
        DomEventsPlugin.prototype.addEventListener = function (element, eventName, handler) {
            var _this = this;
            var zoneJsLoaded = element[ADD_EVENT_LISTENER];
            var callback = handler;
            // if zonejs is loaded and current zone is not ngZone
            // we keep Zone.current on target for later restoration.
            if (zoneJsLoaded && (!core.NgZone.isInAngularZone() || isBlackListedEvent(eventName))) {
                var symbolName = symbolNames[eventName];
                if (!symbolName) {
                    symbolName = symbolNames[eventName] = __symbol__(ANGULAR + eventName + FALSE);
                }
                var taskDatas = element[symbolName];
                var globalListenerRegistered = taskDatas && taskDatas.length > 0;
                if (!taskDatas) {
                    taskDatas = element[symbolName] = [];
                }
                var zone = isBlackListedEvent(eventName) ? Zone.root : Zone.current;
                if (taskDatas.length === 0) {
                    taskDatas.push({ zone: zone, handler: callback });
                }
                else {
                    var callbackRegistered = false;
                    for (var i = 0; i < taskDatas.length; i++) {
                        if (taskDatas[i].handler === callback) {
                            callbackRegistered = true;
                            break;
                        }
                    }
                    if (!callbackRegistered) {
                        taskDatas.push({ zone: zone, handler: callback });
                    }
                }
                if (!globalListenerRegistered) {
                    element[ADD_EVENT_LISTENER](eventName, globalListener, false);
                }
            }
            else {
                element[NATIVE_ADD_LISTENER](eventName, callback, false);
            }
            return function () { return _this.removeEventListener(element, eventName, callback); };
        };
        DomEventsPlugin.prototype.removeEventListener = function (target, eventName, callback) {
            var underlyingRemove = target[REMOVE_EVENT_LISTENER];
            // zone.js not loaded, use native removeEventListener
            if (!underlyingRemove) {
                return target[NATIVE_REMOVE_LISTENER].apply(target, [eventName, callback, false]);
            }
            var symbolName = symbolNames[eventName];
            var taskDatas = symbolName && target[symbolName];
            if (!taskDatas) {
                // addEventListener not using patched version
                // just call native removeEventListener
                return target[NATIVE_REMOVE_LISTENER].apply(target, [eventName, callback, false]);
            }
            // fix issue 20532, should be able to remove
            // listener which was added inside of ngZone
            var found = false;
            for (var i = 0; i < taskDatas.length; i++) {
                // remove listener from taskDatas if the callback equals
                if (taskDatas[i].handler === callback) {
                    found = true;
                    taskDatas.splice(i, 1);
                    break;
                }
            }
            if (found) {
                if (taskDatas.length === 0) {
                    // all listeners are removed, we can remove the globalListener from target
                    underlyingRemove.apply(target, [eventName, globalListener, false]);
                }
            }
            else {
                // not found in taskDatas, the callback may be added inside of ngZone
                // use native remove listener to remove the callback
                target[NATIVE_REMOVE_LISTENER].apply(target, [eventName, callback, false]);
            }
        };
        DomEventsPlugin = __decorate([
            core.Injectable(),
            __param(0, core.Inject(DOCUMENT$1)),
            __param(2, core.Optional()), __param(2, core.Inject(core.PLATFORM_ID)),
            __metadata("design:paramtypes", [Object, core.NgZone, Object])
        ], DomEventsPlugin);
        return DomEventsPlugin;
    }(EventManagerPlugin));

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    /**
     * Supported HammerJS recognizer event names.
     */
    var EVENT_NAMES = {
        // pan
        'pan': true,
        'panstart': true,
        'panmove': true,
        'panend': true,
        'pancancel': true,
        'panleft': true,
        'panright': true,
        'panup': true,
        'pandown': true,
        // pinch
        'pinch': true,
        'pinchstart': true,
        'pinchmove': true,
        'pinchend': true,
        'pinchcancel': true,
        'pinchin': true,
        'pinchout': true,
        // press
        'press': true,
        'pressup': true,
        // rotate
        'rotate': true,
        'rotatestart': true,
        'rotatemove': true,
        'rotateend': true,
        'rotatecancel': true,
        // swipe
        'swipe': true,
        'swipeleft': true,
        'swiperight': true,
        'swipeup': true,
        'swipedown': true,
        // tap
        'tap': true,
    };
    /**
     * DI token for providing [HammerJS](http://hammerjs.github.io/) support to Angular.
     * @see `HammerGestureConfig`
     *
     * @publicApi
     */
    var HAMMER_GESTURE_CONFIG = new core.InjectionToken('HammerGestureConfig');
    /**
     * Injection token used to provide a {@link HammerLoader} to Angular.
     *
     * @publicApi
     */
    var HAMMER_LOADER = new core.InjectionToken('HammerLoader');
    /**
     * An injectable [HammerJS Manager](http://hammerjs.github.io/api/#hammer.manager)
     * for gesture recognition. Configures specific event recognition.
     * @publicApi
     */
    var HammerGestureConfig = /** @class */ (function () {
        function HammerGestureConfig() {
            /**
             * A set of supported event names for gestures to be used in Angular.
             * Angular supports all built-in recognizers, as listed in
             * [HammerJS documentation](http://hammerjs.github.io/).
             */
            this.events = [];
            /**
            * Maps gesture event names to a set of configuration options
            * that specify overrides to the default values for specific properties.
            *
            * The key is a supported event name to be configured,
            * and the options object contains a set of properties, with override values
            * to be applied to the named recognizer event.
            * For example, to disable recognition of the rotate event, specify
            *  `{"rotate": {"enable": false}}`.
            *
            * Properties that are not present take the HammerJS default values.
            * For information about which properties are supported for which events,
            * and their allowed and default values, see
            * [HammerJS documentation](http://hammerjs.github.io/).
            *
            */
            this.overrides = {};
        }
        /**
         * Creates a [HammerJS Manager](http://hammerjs.github.io/api/#hammer.manager)
         * and attaches it to a given HTML element.
         * @param element The element that will recognize gestures.
         * @returns A HammerJS event-manager object.
         */
        HammerGestureConfig.prototype.buildHammer = function (element) {
            var mc = new Hammer(element, this.options);
            mc.get('pinch').set({ enable: true });
            mc.get('rotate').set({ enable: true });
            for (var eventName in this.overrides) {
                mc.get(eventName).set(this.overrides[eventName]);
            }
            return mc;
        };
        HammerGestureConfig = __decorate([
            core.Injectable()
        ], HammerGestureConfig);
        return HammerGestureConfig;
    }());
    var HammerGesturesPlugin = /** @class */ (function (_super) {
        __extends(HammerGesturesPlugin, _super);
        function HammerGesturesPlugin(doc, _config, console, loader) {
            var _this = _super.call(this, doc) || this;
            _this._config = _config;
            _this.console = console;
            _this.loader = loader;
            return _this;
        }
        HammerGesturesPlugin.prototype.supports = function (eventName) {
            if (!EVENT_NAMES.hasOwnProperty(eventName.toLowerCase()) && !this.isCustomEvent(eventName)) {
                return false;
            }
            if (!window.Hammer && !this.loader) {
                this.console.warn("The \"" + eventName + "\" event cannot be bound because Hammer.JS is not " +
                    "loaded and no custom loader has been specified.");
                return false;
            }
            return true;
        };
        HammerGesturesPlugin.prototype.addEventListener = function (element, eventName, handler) {
            var _this = this;
            var zone = this.manager.getZone();
            eventName = eventName.toLowerCase();
            // If Hammer is not present but a loader is specified, we defer adding the event listener
            // until Hammer is loaded.
            if (!window.Hammer && this.loader) {
                // This `addEventListener` method returns a function to remove the added listener.
                // Until Hammer is loaded, the returned function needs to *cancel* the registration rather
                // than remove anything.
                var cancelRegistration_1 = false;
                var deregister_1 = function () { cancelRegistration_1 = true; };
                this.loader()
                    .then(function () {
                    // If Hammer isn't actually loaded when the custom loader resolves, give up.
                    if (!window.Hammer) {
                        _this.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present.");
                        deregister_1 = function () { };
                        return;
                    }
                    if (!cancelRegistration_1) {
                        // Now that Hammer is loaded and the listener is being loaded for real,
                        // the deregistration function changes from canceling registration to removal.
                        deregister_1 = _this.addEventListener(element, eventName, handler);
                    }
                })
                    .catch(function () {
                    _this.console.warn("The \"" + eventName + "\" event cannot be bound because the custom " +
                        "Hammer.JS loader failed.");
                    deregister_1 = function () { };
                });
                // Return a function that *executes* `deregister` (and not `deregister` itself) so that we
                // can change the behavior of `deregister` once the listener is added. Using a closure in
                // this way allows us to avoid any additional data structures to track listener removal.
                return function () { deregister_1(); };
            }
            return zone.runOutsideAngular(function () {
                // Creating the manager bind events, must be done outside of angular
                var mc = _this._config.buildHammer(element);
                var callback = function (eventObj) {
                    zone.runGuarded(function () { handler(eventObj); });
                };
                mc.on(eventName, callback);
                return function () {
                    mc.off(eventName, callback);
                    // destroy mc to prevent memory leak
                    if (typeof mc.destroy === 'function') {
                        mc.destroy();
                    }
                };
            });
        };
        HammerGesturesPlugin.prototype.isCustomEvent = function (eventName) { return this._config.events.indexOf(eventName) > -1; };
        HammerGesturesPlugin = __decorate([
            core.Injectable(),
            __param(0, core.Inject(DOCUMENT$1)),
            __param(1, core.Inject(HAMMER_GESTURE_CONFIG)),
            __param(3, core.Optional()), __param(3, core.Inject(HAMMER_LOADER)),
            __metadata("design:paramtypes", [Object, HammerGestureConfig, core["ɵConsole"], Object])
        ], HammerGesturesPlugin);
        return HammerGesturesPlugin;
    }(EventManagerPlugin));

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    /**
     * Defines supported modifiers for key events.
     */
    var MODIFIER_KEYS = ['alt', 'control', 'meta', 'shift'];
    var ɵ0$1 = function (event) { return event.altKey; }, ɵ1$1 = function (event) { return event.ctrlKey; }, ɵ2$1 = function (event) { return event.metaKey; }, ɵ3 = function (event) { return event.shiftKey; };
    /**
     * Retrieves modifiers from key-event objects.
     */
    var MODIFIER_KEY_GETTERS = {
        'alt': ɵ0$1,
        'control': ɵ1$1,
        'meta': ɵ2$1,
        'shift': ɵ3
    };
    /**
     * @publicApi
     * A browser plug-in that provides support for handling of key events in Angular.
     */
    var KeyEventsPlugin = /** @class */ (function (_super) {
        __extends(KeyEventsPlugin, _super);
        /**
         * Initializes an instance of the browser plug-in.
         * @param doc The document in which key events will be detected.
         */
        function KeyEventsPlugin(doc) {
            return _super.call(this, doc) || this;
        }
        KeyEventsPlugin_1 = KeyEventsPlugin;
        /**
          * Reports whether a named key event is supported.
          * @param eventName The event name to query.
          * @return True if the named key event is supported.
         */
        KeyEventsPlugin.prototype.supports = function (eventName) { return KeyEventsPlugin_1.parseEventName(eventName) != null; };
        /**
         * Registers a handler for a specific element and key event.
         * @param element The HTML element to receive event notifications.
         * @param eventName The name of the key event to listen for.
         * @param handler A function to call when the notification occurs. Receives the
         * event object as an argument.
         * @returns The key event that was registered.
        */
        KeyEventsPlugin.prototype.addEventListener = function (element, eventName, handler) {
            var parsedEvent = KeyEventsPlugin_1.parseEventName(eventName);
            var outsideHandler = KeyEventsPlugin_1.eventCallback(parsedEvent['fullKey'], handler, this.manager.getZone());
            return this.manager.getZone().runOutsideAngular(function () {
                return getDOM().onAndCancel(element, parsedEvent['domEventName'], outsideHandler);
            });
        };
        KeyEventsPlugin.parseEventName = function (eventName) {
            var parts = eventName.toLowerCase().split('.');
            var domEventName = parts.shift();
            if ((parts.length === 0) || !(domEventName === 'keydown' || domEventName === 'keyup')) {
                return null;
            }
            var key = KeyEventsPlugin_1._normalizeKey(parts.pop());
            var fullKey = '';
            MODIFIER_KEYS.forEach(function (modifierName) {
                var index = parts.indexOf(modifierName);
                if (index > -1) {
                    parts.splice(index, 1);
                    fullKey += modifierName + '.';
                }
            });
            fullKey += key;
            if (parts.length != 0 || key.length === 0) {
                // returning null instead of throwing to let another plugin process the event
                return null;
            }
            var result = {};
            result['domEventName'] = domEventName;
            result['fullKey'] = fullKey;
            return result;
        };
        KeyEventsPlugin.getEventFullKey = function (event) {
            var fullKey = '';
            var key = getDOM().getEventKey(event);
            key = key.toLowerCase();
            if (key === ' ') {
                key = 'space'; // for readability
            }
            else if (key === '.') {
                key = 'dot'; // because '.' is used as a separator in event names
            }
            MODIFIER_KEYS.forEach(function (modifierName) {
                if (modifierName != key) {
                    var modifierGetter = MODIFIER_KEY_GETTERS[modifierName];
                    if (modifierGetter(event)) {
                        fullKey += modifierName + '.';
                    }
                }
            });
            fullKey += key;
            return fullKey;
        };
        /**
         * Configures a handler callback for a key event.
         * @param fullKey The event name that combines all simultaneous keystrokes.
         * @param handler The function that responds to the key event.
         * @param zone The zone in which the event occurred.
         * @returns A callback function.
         */
        KeyEventsPlugin.eventCallback = function (fullKey, handler, zone) {
            return function (event /** TODO #9100 */) {
                if (KeyEventsPlugin_1.getEventFullKey(event) === fullKey) {
                    zone.runGuarded(function () { return handler(event); });
                }
            };
        };
        /** @internal */
        KeyEventsPlugin._normalizeKey = function (keyName) {
            // TODO: switch to a Map if the mapping grows too much
            switch (keyName) {
                case 'esc':
                    return 'escape';
                default:
                    return keyName;
            }
        };
        var KeyEventsPlugin_1;
        KeyEventsPlugin = KeyEventsPlugin_1 = __decorate([
            core.Injectable(),
            __param(0, core.Inject(DOCUMENT$1)),
            __metadata("design:paramtypes", [Object])
        ], KeyEventsPlugin);
        return KeyEventsPlugin;
    }(EventManagerPlugin));

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    /**
     * DomSanitizer helps preventing Cross Site Scripting Security bugs (XSS) by sanitizing
     * values to be safe to use in the different DOM contexts.
     *
     * For example, when binding a URL in an `<a [href]="someValue">` hyperlink, `someValue` will be
     * sanitized so that an attacker cannot inject e.g. a `javascript:` URL that would execute code on
     * the website.
     *
     * In specific situations, it might be necessary to disable sanitization, for example if the
     * application genuinely needs to produce a `javascript:` style link with a dynamic value in it.
     * Users can bypass security by constructing a value with one of the `bypassSecurityTrust...`
     * methods, and then binding to that value from the template.
     *
     * These situations should be very rare, and extraordinary care must be taken to avoid creating a
     * Cross Site Scripting (XSS) security bug!
     *
     * When using `bypassSecurityTrust...`, make sure to call the method as early as possible and as
     * close as possible to the source of the value, to make it easy to verify no security bug is
     * created by its use.
     *
     * It is not required (and not recommended) to bypass security if the value is safe, e.g. a URL that
     * does not start with a suspicious protocol, or an HTML snippet that does not contain dangerous
     * code. The sanitizer leaves safe values intact.
     *
     * @security Calling any of the `bypassSecurityTrust...` APIs disables Angular's built-in
     * sanitization for the value passed in. Carefully check and audit all values and code paths going
     * into this call. Make sure any user data is appropriately escaped for this security context.
     * For more detail, see the [Security Guide](http://g.co/ng/security).
     *
     * @publicApi
     */
    var DomSanitizer = /** @class */ (function () {
        function DomSanitizer() {
        }
        return DomSanitizer;
    }());
    var DomSanitizerImpl = /** @class */ (function (_super) {
        __extends(DomSanitizerImpl, _super);
        function DomSanitizerImpl(_doc) {
            var _this = _super.call(this) || this;
            _this._doc = _doc;
            return _this;
        }
        DomSanitizerImpl.prototype.sanitize = function (ctx, value) {
            if (value == null)
                return null;
            switch (ctx) {
                case core.SecurityContext.NONE:
                    return value;
                case core.SecurityContext.HTML:
                    if (value instanceof SafeHtmlImpl)
                        return value.changingThisBreaksApplicationSecurity;
                    this.checkNotSafeValue(value, 'HTML');
                    return core["ɵ_sanitizeHtml"](this._doc, String(value));
                case core.SecurityContext.STYLE:
                    if (value instanceof SafeStyleImpl)
                        return value.changingThisBreaksApplicationSecurity;
                    this.checkNotSafeValue(value, 'Style');
                    return core["ɵ_sanitizeStyle"](value);
                case core.SecurityContext.SCRIPT:
                    if (value instanceof SafeScriptImpl)
                        return value.changingThisBreaksApplicationSecurity;
                    this.checkNotSafeValue(value, 'Script');
                    throw new Error('unsafe value used in a script context');
                case core.SecurityContext.URL:
                    if (value instanceof SafeResourceUrlImpl || value instanceof SafeUrlImpl) {
                        // Allow resource URLs in URL contexts, they are strictly more trusted.
                        return value.changingThisBreaksApplicationSecurity;
                    }
                    this.checkNotSafeValue(value, 'URL');
                    return core["ɵ_sanitizeUrl"](String(value));
                case core.SecurityContext.RESOURCE_URL:
                    if (value instanceof SafeResourceUrlImpl) {
                        return value.changingThisBreaksApplicationSecurity;
                    }
                    this.checkNotSafeValue(value, 'ResourceURL');
                    throw new Error('unsafe value used in a resource URL context (see http://g.co/ng/security#xss)');
                default:
                    throw new Error("Unexpected SecurityContext " + ctx + " (see http://g.co/ng/security#xss)");
            }
        };
        DomSanitizerImpl.prototype.checkNotSafeValue = function (value, expectedType) {
            if (value instanceof SafeValueImpl) {
                throw new Error("Required a safe " + expectedType + ", got a " + value.getTypeName() + " " +
                    "(see http://g.co/ng/security#xss)");
            }
        };
        DomSanitizerImpl.prototype.bypassSecurityTrustHtml = function (value) { return new SafeHtmlImpl(value); };
        DomSanitizerImpl.prototype.bypassSecurityTrustStyle = function (value) { return new SafeStyleImpl(value); };
        DomSanitizerImpl.prototype.bypassSecurityTrustScript = function (value) { return new SafeScriptImpl(value); };
        DomSanitizerImpl.prototype.bypassSecurityTrustUrl = function (value) { return new SafeUrlImpl(value); };
        DomSanitizerImpl.prototype.bypassSecurityTrustResourceUrl = function (value) {
            return new SafeResourceUrlImpl(value);
        };
        DomSanitizerImpl = __decorate([
            core.Injectable(),
            __param(0, core.Inject(DOCUMENT$1)),
            __metadata("design:paramtypes", [Object])
        ], DomSanitizerImpl);
        return DomSanitizerImpl;
    }(DomSanitizer));
    var SafeValueImpl = /** @class */ (function () {
        function SafeValueImpl(changingThisBreaksApplicationSecurity) {
            this.changingThisBreaksApplicationSecurity = changingThisBreaksApplicationSecurity;
            // empty
        }
        SafeValueImpl.prototype.toString = function () {
            return "SafeValue must use [property]=binding: " + this.changingThisBreaksApplicationSecurity +
                " (see http://g.co/ng/security#xss)";
        };
        return SafeValueImpl;
    }());
    var SafeHtmlImpl = /** @class */ (function (_super) {
        __extends(SafeHtmlImpl, _super);
        function SafeHtmlImpl() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        SafeHtmlImpl.prototype.getTypeName = function () { return 'HTML'; };
        return SafeHtmlImpl;
    }(SafeValueImpl));
    var SafeStyleImpl = /** @class */ (function (_super) {
        __extends(SafeStyleImpl, _super);
        function SafeStyleImpl() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        SafeStyleImpl.prototype.getTypeName = function () { return 'Style'; };
        return SafeStyleImpl;
    }(SafeValueImpl));
    var SafeScriptImpl = /** @class */ (function (_super) {
        __extends(SafeScriptImpl, _super);
        function SafeScriptImpl() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        SafeScriptImpl.prototype.getTypeName = function () { return 'Script'; };
        return SafeScriptImpl;
    }(SafeValueImpl));
    var SafeUrlImpl = /** @class */ (function (_super) {
        __extends(SafeUrlImpl, _super);
        function SafeUrlImpl() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        SafeUrlImpl.prototype.getTypeName = function () { return 'URL'; };
        return SafeUrlImpl;
    }(SafeValueImpl));
    var SafeResourceUrlImpl = /** @class */ (function (_super) {
        __extends(SafeResourceUrlImpl, _super);
        function SafeResourceUrlImpl() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        SafeResourceUrlImpl.prototype.getTypeName = function () { return 'ResourceURL'; };
        return SafeResourceUrlImpl;
    }(SafeValueImpl));

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    var INTERNAL_BROWSER_PLATFORM_PROVIDERS = [
        { provide: core.PLATFORM_ID, useValue: common["ɵPLATFORM_BROWSER_ID"] },
        { provide: core.PLATFORM_INITIALIZER, useValue: initDomAdapter, multi: true },
        { provide: common.PlatformLocation, useClass: BrowserPlatformLocation, deps: [DOCUMENT$1] },
        { provide: DOCUMENT$1, useFactory: _document, deps: [] },
    ];
    /**
     * @security Replacing built-in sanitization providers exposes the application to XSS risks.
     * Attacker-controlled data introduced by an unsanitized provider could expose your
     * application to XSS risks. For more detail, see the [Security Guide](http://g.co/ng/security).
     * @publicApi
     */
    var BROWSER_SANITIZATION_PROVIDERS = [
        { provide: core.Sanitizer, useExisting: DomSanitizer },
        { provide: DomSanitizer, useClass: DomSanitizerImpl, deps: [DOCUMENT$1] },
    ];
    /**
     * @publicApi
     */
    var platformBrowser = core.createPlatformFactory(core.platformCore, 'browser', INTERNAL_BROWSER_PLATFORM_PROVIDERS);
    function initDomAdapter() {
        BrowserDomAdapter.makeCurrent();
        BrowserGetTestability.init();
    }
    function errorHandler() {
        return new core.ErrorHandler();
    }
    function _document() {
        return document;
    }
    var BROWSER_MODULE_PROVIDERS = [
        BROWSER_SANITIZATION_PROVIDERS,
        { provide: core["ɵAPP_ROOT"], useValue: true },
        { provide: core.ErrorHandler, useFactory: errorHandler, deps: [] },
        {
            provide: EVENT_MANAGER_PLUGINS,
            useClass: DomEventsPlugin,
            multi: true,
            deps: [DOCUMENT$1, core.NgZone, core.PLATFORM_ID]
        },
        { provide: EVENT_MANAGER_PLUGINS, useClass: KeyEventsPlugin, multi: true, deps: [DOCUMENT$1] },
        {
            provide: EVENT_MANAGER_PLUGINS,
            useClass: HammerGesturesPlugin,
            multi: true,
            deps: [DOCUMENT$1, HAMMER_GESTURE_CONFIG, core["ɵConsole"], [new core.Optional(), HAMMER_LOADER]]
        },
        { provide: HAMMER_GESTURE_CONFIG, useClass: HammerGestureConfig, deps: [] },
        {
            provide: DomRendererFactory2,
            useClass: DomRendererFactory2,
            deps: [EventManager, DomSharedStylesHost, core.APP_ID]
        },
        { provide: core.RendererFactory2, useExisting: DomRendererFactory2 },
        { provide: SharedStylesHost, useExisting: DomSharedStylesHost },
        { provide: DomSharedStylesHost, useClass: DomSharedStylesHost, deps: [DOCUMENT$1] },
        { provide: core.Testability, useClass: core.Testability, deps: [core.NgZone] },
        { provide: EventManager, useClass: EventManager, deps: [EVENT_MANAGER_PLUGINS, core.NgZone] },
        ELEMENT_PROBE_PROVIDERS,
    ];
    /**
     * Exports required infrastructure for all Angular apps.
     * Included by default in all Angular apps created with the CLI
     * `new` command.
     * Re-exports `CommonModule` and `ApplicationModule`, making their
     * exports and providers available to all apps.
     *
     * @publicApi
     */
    var BrowserModule = /** @class */ (function () {
        function BrowserModule(parentModule) {
            if (parentModule) {
                throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.");
            }
        }
        BrowserModule_1 = BrowserModule;
        /**
         * Configures a browser-based app to transition from a server-rendered app, if
         * one is present on the page.
         *
         * @param params An object containing an identifier for the app to transition.
         * The ID must match between the client and server versions of the app.
         * @returns The reconfigured `BrowserModule` to import into the app's root `AppModule`.
         */
        BrowserModule.withServerTransition = function (params) {
            return {
                ngModule: BrowserModule_1,
                providers: [
                    { provide: core.APP_ID, useValue: params.appId },
                    { provide: TRANSITION_ID, useExisting: core.APP_ID },
                    SERVER_TRANSITION_PROVIDERS,
                ],
            };
        };
        var BrowserModule_1;
        BrowserModule = BrowserModule_1 = __decorate([
            core.NgModule({ providers: BROWSER_MODULE_PROVIDERS, exports: [common.CommonModule, core.ApplicationModule] }),
            __param(0, core.Optional()), __param(0, core.SkipSelf()), __param(0, core.Inject(BrowserModule_1)),
            __metadata("design:paramtypes", [Object])
        ], BrowserModule);
        return BrowserModule;
    }());

    /**
     * Factory to create Meta service.
     */
    function createMeta() {
        return new Meta(core.inject(DOCUMENT$1));
    }
    /**
     * A service that can be used to get and add meta tags.
     *
     * @publicApi
     */
    var Meta = /** @class */ (function () {
        function Meta(_doc) {
            this._doc = _doc;
            this._dom = getDOM();
        }
        Meta.prototype.addTag = function (tag, forceCreation) {
            if (forceCreation === void 0) { forceCreation = false; }
            if (!tag)
                return null;
            return this._getOrCreateElement(tag, forceCreation);
        };
        Meta.prototype.addTags = function (tags, forceCreation) {
            var _this = this;
            if (forceCreation === void 0) { forceCreation = false; }
            if (!tags)
                return [];
            return tags.reduce(function (result, tag) {
                if (tag) {
                    result.push(_this._getOrCreateElement(tag, forceCreation));
                }
                return result;
            }, []);
        };
        Meta.prototype.getTag = function (attrSelector) {
            if (!attrSelector)
                return null;
            return this._dom.querySelector(this._doc, "meta[" + attrSelector + "]") || null;
        };
        Meta.prototype.getTags = function (attrSelector) {
            if (!attrSelector)
                return [];
            var list /*NodeList*/ = this._dom.querySelectorAll(this._doc, "meta[" + attrSelector + "]");
            return list ? [].slice.call(list) : [];
        };
        Meta.prototype.updateTag = function (tag, selector) {
            if (!tag)
                return null;
            selector = selector || this._parseSelector(tag);
            var meta = this.getTag(selector);
            if (meta) {
                return this._setMetaElementAttributes(tag, meta);
            }
            return this._getOrCreateElement(tag, true);
        };
        Meta.prototype.removeTag = function (attrSelector) { this.removeTagElement(this.getTag(attrSelector)); };
        Meta.prototype.removeTagElement = function (meta) {
            if (meta) {
                this._dom.remove(meta);
            }
        };
        Meta.prototype._getOrCreateElement = function (meta, forceCreation) {
            if (forceCreation === void 0) { forceCreation = false; }
            if (!forceCreation) {
                var selector = this._parseSelector(meta);
                var elem = this.getTag(selector);
                // It's allowed to have multiple elements with the same name so it's not enough to
                // just check that element with the same name already present on the page. We also need to
                // check if element has tag attributes
                if (elem && this._containsAttributes(meta, elem))
                    return elem;
            }
            var element = this._dom.createElement('meta');
            this._setMetaElementAttributes(meta, element);
            var head = this._dom.getElementsByTagName(this._doc, 'head')[0];
            this._dom.appendChild(head, element);
            return element;
        };
        Meta.prototype._setMetaElementAttributes = function (tag, el) {
            var _this = this;
            Object.keys(tag).forEach(function (prop) { return _this._dom.setAttribute(el, prop, tag[prop]); });
            return el;
        };
        Meta.prototype._parseSelector = function (tag) {
            var attr = tag.name ? 'name' : 'property';
            return attr + "=\"" + tag[attr] + "\"";
        };
        Meta.prototype._containsAttributes = function (tag, elem) {
            var _this = this;
            return Object.keys(tag).every(function (key) { return _this._dom.getAttribute(elem, key) === tag[key]; });
        };
        Meta.ngInjectableDef = core.defineInjectable({ factory: createMeta, token: Meta, providedIn: "root" });
        Meta = __decorate([
            core.Injectable({ providedIn: 'root', useFactory: createMeta, deps: [] }),
            __param(0, core.Inject(DOCUMENT$1)),
            __metadata("design:paramtypes", [Object])
        ], Meta);
        return Meta;
    }());

    /**
     * Factory to create Title service.
     */
    function createTitle() {
        return new Title(core.inject(DOCUMENT$1));
    }
    /**
     * A service that can be used to get and set the title of a current HTML document.
     *
     * Since an Angular application can't be bootstrapped on the entire HTML document (`<html>` tag)
     * it is not possible to bind to the `text` property of the `HTMLTitleElement` elements
     * (representing the `<title>` tag). Instead, this service can be used to set and get the current
     * title value.
     *
     * @publicApi
     */
    var Title = /** @class */ (function () {
        function Title(_doc) {
            this._doc = _doc;
        }
        /**
         * Get the title of the current HTML document.
         */
        Title.prototype.getTitle = function () { return getDOM().getTitle(this._doc); };
        /**
         * Set the title of the current HTML document.
         * @param newTitle
         */
        Title.prototype.setTitle = function (newTitle) { getDOM().setTitle(this._doc, newTitle); };
        Title.ngInjectableDef = core.defineInjectable({ factory: createTitle, token: Title, providedIn: "root" });
        Title = __decorate([
            core.Injectable({ providedIn: 'root', useFactory: createTitle, deps: [] }),
            __param(0, core.Inject(DOCUMENT$1)),
            __metadata("design:paramtypes", [Object])
        ], Title);
        return Title;
    }());
    function unescapeHtml(text) {
        var unescapedText = {
            '&a;': '&',
            '&q;': '"',
            '&s;': '\'',
            '&l;': '<',
            '&g;': '>',
        };
        return text.replace(/&[^;]+;/g, function (s) { return unescapedText[s]; });
    }
    /**
     * A key value store that is transferred from the application on the server side to the application
     * on the client side.
     *
     * `TransferState` will be available as an injectable token. To use it import
     * `ServerTransferStateModule` on the server and `BrowserTransferStateModule` on the client.
     *
     * The values in the store are serialized/deserialized using JSON.stringify/JSON.parse. So only
     * boolean, number, string, null and non-class objects will be serialized and deserialzied in a
     * non-lossy manner.
     *
     * @publicApi
     */
    var TransferState = /** @class */ (function () {
        function TransferState() {
            this.store = {};
            this.onSerializeCallbacks = {};
        }
        TransferState_1 = TransferState;
        /** @internal */
        TransferState.init = function (initState) {
            var transferState = new TransferState_1();
            transferState.store = initState;
            return transferState;
        };
        /**
         * Get the value corresponding to a key. Return `defaultValue` if key is not found.
         */
        TransferState.prototype.get = function (key, defaultValue) {
            return this.store[key] !== undefined ? this.store[key] : defaultValue;
        };
        /**
         * Set the value corresponding to a key.
         */
        TransferState.prototype.set = function (key, value) { this.store[key] = value; };
        /**
         * Remove a key from the store.
         */
        TransferState.prototype.remove = function (key) { delete this.store[key]; };
        /**
         * Test whether a key exists in the store.
         */
        TransferState.prototype.hasKey = function (key) { return this.store.hasOwnProperty(key); };
        /**
         * Register a callback to provide the value for a key when `toJson` is called.
         */
        TransferState.prototype.onSerialize = function (key, callback) {
            this.onSerializeCallbacks[key] = callback;
        };
        /**
         * Serialize the current state of the store to JSON.
         */
        TransferState.prototype.toJson = function () {
            // Call the onSerialize callbacks and put those values into the store.
            for (var key in this.onSerializeCallbacks) {
                if (this.onSerializeCallbacks.hasOwnProperty(key)) {
                    try {
                        this.store[key] = this.onSerializeCallbacks[key]();
                    }
                    catch (e) {
                        console.warn('Exception in onSerialize callback: ', e);
                    }
                }
            }
            return JSON.stringify(this.store);
        };
        var TransferState_1;
        TransferState = TransferState_1 = __decorate([
            core.Injectable()
        ], TransferState);
        return TransferState;
    }());
    function initTransferState(doc, appId) {
        // Locate the script tag with the JSON data transferred from the server.
        // The id of the script tag is set to the Angular appId + 'state'.
        var script = doc.getElementById(appId + '-state');
        var initialState = {};
        if (script && script.textContent) {
            try {
                initialState = JSON.parse(unescapeHtml(script.textContent));
            }
            catch (e) {
                console.warn('Exception while restoring TransferState for app ' + appId, e);
            }
        }
        return TransferState.init(initialState);
    }
    /**
     * NgModule to install on the client side while using the `TransferState` to transfer state from
     * server to client.
     *
     * @publicApi
     */
    var BrowserTransferStateModule = /** @class */ (function () {
        function BrowserTransferStateModule() {
        }
        BrowserTransferStateModule = __decorate([
            core.NgModule({
                providers: [{ provide: TransferState, useFactory: initTransferState, deps: [DOCUMENT$1, core.APP_ID] }],
            })
        ], BrowserTransferStateModule);
        return BrowserTransferStateModule;
    }());

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    /**
     * @publicApi
     */
    var VERSION = new core.Version('7.2.16');

    /**
     * @license Angular v7.2.16
     * (c) 2010-2019 Google LLC. https://angular.io/
     * License: MIT
     */

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    /**
     * @description
     *
     * Base for events the Router goes through, as opposed to events tied to a specific
     * Route. `RouterEvent`s will only be fired one time for any given navigation.
     *
     * Example:
     *
     * ```
     * class MyService {
     *   constructor(public router: Router, logger: Logger) {
     *     router.events.pipe(
     *       filter(e => e instanceof RouterEvent)
     *     ).subscribe(e => {
     *       logger.log(e.id, e.url);
     *     });
     *   }
     * }
     * ```
     *
     * @publicApi
     */
    var RouterEvent = /** @class */ (function () {
        function RouterEvent(
        /** @docsNotRequired */
        id, 
        /** @docsNotRequired */
        url) {
            this.id = id;
            this.url = url;
        }
        return RouterEvent;
    }());
    /**
     * @description
     *
     * Represents an event triggered when a navigation starts.
     *
     * @publicApi
     */
    var NavigationStart = /** @class */ (function (_super) {
        __extends(NavigationStart, _super);
        function NavigationStart(
        /** @docsNotRequired */
        id, 
        /** @docsNotRequired */
        url, 
        /** @docsNotRequired */
        navigationTrigger, 
        /** @docsNotRequired */
        restoredState) {
            if (navigationTrigger === void 0) { navigationTrigger = 'imperative'; }
            if (restoredState === void 0) { restoredState = null; }
            var _this = _super.call(this, id, url) || this;
            _this.navigationTrigger = navigationTrigger;
            _this.restoredState = restoredState;
            return _this;
        }
        /** @docsNotRequired */
        NavigationStart.prototype.toString = function () { return "NavigationStart(id: " + this.id + ", url: '" + this.url + "')"; };
        return NavigationStart;
    }(RouterEvent));
    /**
     * @description
     *
     * Represents an event triggered when a navigation ends successfully.
     *
     * @publicApi
     */
    var NavigationEnd = /** @class */ (function (_super) {
        __extends(NavigationEnd, _super);
        function NavigationEnd(
        /** @docsNotRequired */
        id, 
        /** @docsNotRequired */
        url, 
        /** @docsNotRequired */
        urlAfterRedirects) {
            var _this = _super.call(this, id, url) || this;
            _this.urlAfterRedirects = urlAfterRedirects;
            return _this;
        }
        /** @docsNotRequired */
        NavigationEnd.prototype.toString = function () {
            return "NavigationEnd(id: " + this.id + ", url: '" + this.url + "', urlAfterRedirects: '" + this.urlAfterRedirects + "')";
        };
        return NavigationEnd;
    }(RouterEvent));
    /**
     * @description
     *
     * Represents an event triggered when a navigation is canceled.
     *
     * @publicApi
     */
    var NavigationCancel = /** @class */ (function (_super) {
        __extends(NavigationCancel, _super);
        function NavigationCancel(
        /** @docsNotRequired */
        id, 
        /** @docsNotRequired */
        url, 
        /** @docsNotRequired */
        reason) {
            var _this = _super.call(this, id, url) || this;
            _this.reason = reason;
            return _this;
        }
        /** @docsNotRequired */
        NavigationCancel.prototype.toString = function () { return "NavigationCancel(id: " + this.id + ", url: '" + this.url + "')"; };
        return NavigationCancel;
    }(RouterEvent));
    /**
     * @description
     *
     * Represents an event triggered when a navigation fails due to an unexpected error.
     *
     * @publicApi
     */
    var NavigationError = /** @class */ (function (_super) {
        __extends(NavigationError, _super);
        function NavigationError(
        /** @docsNotRequired */
        id, 
        /** @docsNotRequired */
        url, 
        /** @docsNotRequired */
        error) {
            var _this = _super.call(this, id, url) || this;
            _this.error = error;
            return _this;
        }
        /** @docsNotRequired */
        NavigationError.prototype.toString = function () {
            return "NavigationError(id: " + this.id + ", url: '" + this.url + "', error: " + this.error + ")";
        };
        return NavigationError;
    }(RouterEvent));
    /**
     * @description
     *
     * Represents an event triggered when routes are recognized.
     *
     * @publicApi
     */
    var RoutesRecognized = /** @class */ (function (_super) {
        __extends(RoutesRecognized, _super);
        function RoutesRecognized(
        /** @docsNotRequired */
        id, 
        /** @docsNotRequired */
        url, 
        /** @docsNotRequired */
        urlAfterRedirects, 
        /** @docsNotRequired */
        state) {
            var _this = _super.call(this, id, url) || this;
            _this.urlAfterRedirects = urlAfterRedirects;
            _this.state = state;
            return _this;
        }
        /** @docsNotRequired */
        RoutesRecognized.prototype.toString = function () {
            return "RoutesRecognized(id: " + this.id + ", url: '" + this.url + "', urlAfterRedirects: '" + this.urlAfterRedirects + "', state: " + this.state + ")";
        };
        return RoutesRecognized;
    }(RouterEvent));
    /**
     * @description
     *
     * Represents the start of the Guard phase of routing.
     *
     * @publicApi
     */
    var GuardsCheckStart = /** @class */ (function (_super) {
        __extends(GuardsCheckStart, _super);
        function GuardsCheckStart(
        /** @docsNotRequired */
        id, 
        /** @docsNotRequired */
        url, 
        /** @docsNotRequired */
        urlAfterRedirects, 
        /** @docsNotRequired */
        state) {
            var _this = _super.call(this, id, url) || this;
            _this.urlAfterRedirects = urlAfterRedirects;
            _this.state = state;
            return _this;
        }
        GuardsCheckStart.prototype.toString = function () {
            return "GuardsCheckStart(id: " + this.id + ", url: '" + this.url + "', urlAfterRedirects: '" + this.urlAfterRedirects + "', state: " + this.state + ")";
        };
        return GuardsCheckStart;
    }(RouterEvent));
    /**
     * @description
     *
     * Represents the end of the Guard phase of routing.
     *
     * @publicApi
     */
    var GuardsCheckEnd = /** @class */ (function (_super) {
        __extends(GuardsCheckEnd, _super);
        function GuardsCheckEnd(
        /** @docsNotRequired */
        id, 
        /** @docsNotRequired */
        url, 
        /** @docsNotRequired */
        urlAfterRedirects, 
        /** @docsNotRequired */
        state, 
        /** @docsNotRequired */
        shouldActivate) {
            var _this = _super.call(this, id, url) || this;
            _this.urlAfterRedirects = urlAfterRedirects;
            _this.state = state;
            _this.shouldActivate = shouldActivate;
            return _this;
        }
        GuardsCheckEnd.prototype.toString = function () {
            return "GuardsCheckEnd(id: " + this.id + ", url: '" + this.url + "', urlAfterRedirects: '" + this.urlAfterRedirects + "', state: " + this.state + ", shouldActivate: " + this.shouldActivate + ")";
        };
        return GuardsCheckEnd;
    }(RouterEvent));
    /**
     * @description
     *
     * Represents the start of the Resolve phase of routing. The timing of this
     * event may change, thus it's experimental. In the current iteration it will run
     * in the "resolve" phase whether there's things to resolve or not. In the future this
     * behavior may change to only run when there are things to be resolved.
     *
     * @publicApi
     */
    var ResolveStart = /** @class */ (function (_super) {
        __extends(ResolveStart, _super);
        function ResolveStart(
        /** @docsNotRequired */
        id, 
        /** @docsNotRequired */
        url, 
        /** @docsNotRequired */
        urlAfterRedirects, 
        /** @docsNotRequired */
        state) {
            var _this = _super.call(this, id, url) || this;
            _this.urlAfterRedirects = urlAfterRedirects;
            _this.state = state;
            return _this;
        }
        ResolveStart.prototype.toString = function () {
            return "ResolveStart(id: " + this.id + ", url: '" + this.url + "', urlAfterRedirects: '" + this.urlAfterRedirects + "', state: " + this.state + ")";
        };
        return ResolveStart;
    }(RouterEvent));
    /**
     * @description
     *
     * Represents the end of the Resolve phase of routing. See note on
     * `ResolveStart` for use of this experimental API.
     *
     * @publicApi
     */
    var ResolveEnd = /** @class */ (function (_super) {
        __extends(ResolveEnd, _super);
        function ResolveEnd(
        /** @docsNotRequired */
        id, 
        /** @docsNotRequired */
        url, 
        /** @docsNotRequired */
        urlAfterRedirects, 
        /** @docsNotRequired */
        state) {
            var _this = _super.call(this, id, url) || this;
            _this.urlAfterRedirects = urlAfterRedirects;
            _this.state = state;
            return _this;
        }
        ResolveEnd.prototype.toString = function () {
            return "ResolveEnd(id: " + this.id + ", url: '" + this.url + "', urlAfterRedirects: '" + this.urlAfterRedirects + "', state: " + this.state + ")";
        };
        return ResolveEnd;
    }(RouterEvent));
    /**
     * @description
     *
     * Represents an event triggered before lazy loading a route config.
     *
     * @publicApi
     */
    var RouteConfigLoadStart = /** @class */ (function () {
        function RouteConfigLoadStart(
        /** @docsNotRequired */
        route) {
            this.route = route;
        }
        RouteConfigLoadStart.prototype.toString = function () { return "RouteConfigLoadStart(path: " + this.route.path + ")"; };
        return RouteConfigLoadStart;
    }());
    /**
     * @description
     *
     * Represents an event triggered when a route has been lazy loaded.
     *
     * @publicApi
     */
    var RouteConfigLoadEnd = /** @class */ (function () {
        function RouteConfigLoadEnd(
        /** @docsNotRequired */
        route) {
            this.route = route;
        }
        RouteConfigLoadEnd.prototype.toString = function () { return "RouteConfigLoadEnd(path: " + this.route.path + ")"; };
        return RouteConfigLoadEnd;
    }());
    /**
     * @description
     *
     * Represents the start of end of the Resolve phase of routing. See note on
     * `ChildActivationEnd` for use of this experimental API.
     *
     * @publicApi
     */
    var ChildActivationStart = /** @class */ (function () {
        function ChildActivationStart(
        /** @docsNotRequired */
        snapshot) {
            this.snapshot = snapshot;
        }
        ChildActivationStart.prototype.toString = function () {
            var path = this.snapshot.routeConfig && this.snapshot.routeConfig.path || '';
            return "ChildActivationStart(path: '" + path + "')";
        };
        return ChildActivationStart;
    }());
    /**
     * @description
     *
     * Represents the start of end of the Resolve phase of routing. See note on
     * `ChildActivationStart` for use of this experimental API.
     *
     * @publicApi
     */
    var ChildActivationEnd = /** @class */ (function () {
        function ChildActivationEnd(
        /** @docsNotRequired */
        snapshot) {
            this.snapshot = snapshot;
        }
        ChildActivationEnd.prototype.toString = function () {
            var path = this.snapshot.routeConfig && this.snapshot.routeConfig.path || '';
            return "ChildActivationEnd(path: '" + path + "')";
        };
        return ChildActivationEnd;
    }());
    /**
     * @description
     *
     * Represents the start of end of the Resolve phase of routing. See note on
     * `ActivationEnd` for use of this experimental API.
     *
     * @publicApi
     */
    var ActivationStart = /** @class */ (function () {
        function ActivationStart(
        /** @docsNotRequired */
        snapshot) {
            this.snapshot = snapshot;
        }
        ActivationStart.prototype.toString = function () {
            var path = this.snapshot.routeConfig && this.snapshot.routeConfig.path || '';
            return "ActivationStart(path: '" + path + "')";
        };
        return ActivationStart;
    }());
    /**
     * @description
     *
     * Represents the start of end of the Resolve phase of routing. See note on
     * `ActivationStart` for use of this experimental API.
     *
     * @publicApi
     */
    var ActivationEnd = /** @class */ (function () {
        function ActivationEnd(
        /** @docsNotRequired */
        snapshot) {
            this.snapshot = snapshot;
        }
        ActivationEnd.prototype.toString = function () {
            var path = this.snapshot.routeConfig && this.snapshot.routeConfig.path || '';
            return "ActivationEnd(path: '" + path + "')";
        };
        return ActivationEnd;
    }());
    /**
     * @description
     *
     * Represents a scrolling event.
     *
     * @publicApi
     */
    var Scroll = /** @class */ (function () {
        function Scroll(
        /** @docsNotRequired */
        routerEvent, 
        /** @docsNotRequired */
        position, 
        /** @docsNotRequired */
        anchor) {
            this.routerEvent = routerEvent;
            this.position = position;
            this.anchor = anchor;
        }
        Scroll.prototype.toString = function () {
            var pos = this.position ? this.position[0] + ", " + this.position[1] : null;
            return "Scroll(anchor: '" + this.anchor + "', position: '" + pos + "')";
        };
        return Scroll;
    }());

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    /**
     * This component is used internally within the router to be a placeholder when an empty
     * router-outlet is needed. For example, with a config such as:
     *
     * `{path: 'parent', outlet: 'nav', children: [...]}`
     *
     * In order to render, there needs to be a component on this config, which will default
     * to this `EmptyOutletComponent`.
     */
    var EmptyOutletComponent = /** @class */ (function () {
        function EmptyOutletComponent() {
        }
        EmptyOutletComponent = __decorate([
            core.Component({ template: "<router-outlet></router-outlet>" })
        ], EmptyOutletComponent);
        return EmptyOutletComponent;
    }());

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    /**
     * @description
     *
     * Name of the primary outlet.
     *
     * @publicApi
     */
    var PRIMARY_OUTLET = 'primary';
    var ParamsAsMap = /** @class */ (function () {
        function ParamsAsMap(params) {
            this.params = params || {};
        }
        ParamsAsMap.prototype.has = function (name) { return this.params.hasOwnProperty(name); };
        ParamsAsMap.prototype.get = function (name) {
            if (this.has(name)) {
                var v = this.params[name];
                return Array.isArray(v) ? v[0] : v;
            }
            return null;
        };
        ParamsAsMap.prototype.getAll = function (name) {
            if (this.has(name)) {
                var v = this.params[name];
                return Array.isArray(v) ? v : [v];
            }
            return [];
        };
        Object.defineProperty(ParamsAsMap.prototype, "keys", {
            get: function () { return Object.keys(this.params); },
            enumerable: true,
            configurable: true
        });
        return ParamsAsMap;
    }());
    /**
     * Convert a `Params` instance to a `ParamMap`.
     *
     * @publicApi
     */
    function convertToParamMap(params) {
        return new ParamsAsMap(params);
    }
    var NAVIGATION_CANCELING_ERROR = 'ngNavigationCancelingError';
    function navigationCancelingError(message) {
        var error = Error('NavigationCancelingError: ' + message);
        error[NAVIGATION_CANCELING_ERROR] = true;
        return error;
    }
    function isNavigationCancelingError(error) {
        return error && error[NAVIGATION_CANCELING_ERROR];
    }
    // Matches the route configuration (`route`) against the actual URL (`segments`).
    function defaultUrlMatcher(segments, segmentGroup, route) {
        var parts = route.path.split('/');
        if (parts.length > segments.length) {
            // The actual URL is shorter than the config, no match
            return null;
        }
        if (route.pathMatch === 'full' &&
            (segmentGroup.hasChildren() || parts.length < segments.length)) {
            // The config is longer than the actual URL but we are looking for a full match, return null
            return null;
        }
        var posParams = {};
        // Check each config part against the actual URL
        for (var index = 0; index < parts.length; index++) {
            var part = parts[index];
            var segment = segments[index];
            var isParameter = part.startsWith(':');
            if (isParameter) {
                posParams[part.substring(1)] = segment;
            }
            else if (part !== segment.path) {
                // The actual URL part does not match the config, no match
                return null;
            }
        }
        return { consumed: segments.slice(0, parts.length), posParams: posParams };
    }

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    var LoadedRouterConfig = /** @class */ (function () {
        function LoadedRouterConfig(routes, module) {
            this.routes = routes;
            this.module = module;
        }
        return LoadedRouterConfig;
    }());
    function validateConfig(config, parentPath) {
        if (parentPath === void 0) { parentPath = ''; }
        // forEach doesn't iterate undefined values
        for (var i = 0; i < config.length; i++) {
            var route = config[i];
            var fullPath = getFullPath(parentPath, route);
            validateNode(route, fullPath);
        }
    }
    function validateNode(route, fullPath) {
        if (!route) {
            throw new Error("\n      Invalid configuration of route '" + fullPath + "': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    ");
        }
        if (Array.isArray(route)) {
            throw new Error("Invalid configuration of route '" + fullPath + "': Array cannot be specified");
        }
        if (!route.component && !route.children && !route.loadChildren &&
            (route.outlet && route.outlet !== PRIMARY_OUTLET)) {
            throw new Error("Invalid configuration of route '" + fullPath + "': a componentless route without children or loadChildren cannot have a named outlet set");
        }
        if (route.redirectTo && route.children) {
            throw new Error("Invalid configuration of route '" + fullPath + "': redirectTo and children cannot be used together");
        }
        if (route.redirectTo && route.loadChildren) {
            throw new Error("Invalid configuration of route '" + fullPath + "': redirectTo and loadChildren cannot be used together");
        }
        if (route.children && route.loadChildren) {
            throw new Error("Invalid configuration of route '" + fullPath + "': children and loadChildren cannot be used together");
        }
        if (route.redirectTo && route.component) {
            throw new Error("Invalid configuration of route '" + fullPath + "': redirectTo and component cannot be used together");
        }
        if (route.path && route.matcher) {
            throw new Error("Invalid configuration of route '" + fullPath + "': path and matcher cannot be used together");
        }
        if (route.redirectTo === void 0 && !route.component && !route.children && !route.loadChildren) {
            throw new Error("Invalid configuration of route '" + fullPath + "'. One of the following must be provided: component, redirectTo, children or loadChildren");
        }
        if (route.path === void 0 && route.matcher === void 0) {
            throw new Error("Invalid configuration of route '" + fullPath + "': routes must have either a path or a matcher specified");
        }
        if (typeof route.path === 'string' && route.path.charAt(0) === '/') {
            throw new Error("Invalid configuration of route '" + fullPath + "': path cannot start with a slash");
        }
        if (route.path === '' && route.redirectTo !== void 0 && route.pathMatch === void 0) {
            var exp = "The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.";
            throw new Error("Invalid configuration of route '{path: \"" + fullPath + "\", redirectTo: \"" + route.redirectTo + "\"}': please provide 'pathMatch'. " + exp);
        }
        if (route.pathMatch !== void 0 && route.pathMatch !== 'full' && route.pathMatch !== 'prefix') {
            throw new Error("Invalid configuration of route '" + fullPath + "': pathMatch can only be set to 'prefix' or 'full'");
        }
        if (route.children) {
            validateConfig(route.children, fullPath);
        }
    }
    function getFullPath(parentPath, currentRoute) {
        if (!currentRoute) {
            return parentPath;
        }
        if (!parentPath && !currentRoute.path) {
            return '';
        }
        else if (parentPath && !currentRoute.path) {
            return parentPath + "/";
        }
        else if (!parentPath && currentRoute.path) {
            return currentRoute.path;
        }
        else {
            return parentPath + "/" + currentRoute.path;
        }
    }
    /**
     * Makes a copy of the config and adds any default required properties.
     */
    function standardizeConfig(r) {
        var children = r.children && r.children.map(standardizeConfig);
        var c = children ? __assign({}, r, { children: children }) : __assign({}, r);
        if (!c.component && (children || c.loadChildren) && (c.outlet && c.outlet !== PRIMARY_OUTLET)) {
            c.component = EmptyOutletComponent;
        }
        return c;
    }

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    function shallowEqualArrays(a, b) {
        if (a.length !== b.length)
            return false;
        for (var i = 0; i < a.length; ++i) {
            if (!shallowEqual(a[i], b[i]))
                return false;
        }
        return true;
    }
    function shallowEqual(a, b) {
        var k1 = Object.keys(a);
        var k2 = Object.keys(b);
        if (k1.length != k2.length) {
            return false;
        }
        var key;
        for (var i = 0; i < k1.length; i++) {
            key = k1[i];
            if (a[key] !== b[key]) {
                return false;
            }
        }
        return true;
    }
    /**
     * Flattens single-level nested arrays.
     */
    function flatten(arr) {
        return Array.prototype.concat.apply([], arr);
    }
    /**
     * Return the last element of an array.
     */
    function last$1(a) {
        return a.length > 0 ? a[a.length - 1] : null;
    }
    function forEach(map$$1, callback) {
        for (var prop in map$$1) {
            if (map$$1.hasOwnProperty(prop)) {
                callback(map$$1[prop], prop);
            }
        }
    }
    function waitForMap(obj, fn) {
        if (Object.keys(obj).length === 0) {
            return rxjs.of({});
        }
        var waitHead = [];
        var waitTail = [];
        var res = {};
        forEach(obj, function (a, k) {
            var mapped = fn(k, a).pipe(operators.map(function (r) { return res[k] = r; }));
            if (k === PRIMARY_OUTLET) {
                waitHead.push(mapped);
            }
            else {
                waitTail.push(mapped);
            }
        });
        // Closure compiler has problem with using spread operator here. So just using Array.concat.
        return rxjs.of.apply(null, waitHead.concat(waitTail)).pipe(operators.concatAll(), operators.last(), operators.map(function () { return res; }));
    }
    function wrapIntoObservable(value) {
        if (core["ɵisObservable"](value)) {
            return value;
        }
        if (core["ɵisPromise"](value)) {
            // Use `Promise.resolve()` to wrap promise-like instances.
            // Required ie when a Resolver returns a AngularJS `$q` promise to correctly trigger the
            // change detection.
            return rxjs.from(Promise.resolve(value));
        }
        return rxjs.of(value);
    }

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    function createEmptyUrlTree() {
        return new UrlTree(new UrlSegmentGroup([], {}), {}, null);
    }
    function containsTree(container, containee, exact) {
        if (exact) {
            return equalQueryParams(container.queryParams, containee.queryParams) &&
                equalSegmentGroups(container.root, containee.root);
        }
        return containsQueryParams(container.queryParams, containee.queryParams) &&
            containsSegmentGroup(container.root, containee.root);
    }
    function equalQueryParams(container, containee) {
        // TODO: This does not handle array params correctly.
        return shallowEqual(container, containee);
    }
    function equalSegmentGroups(container, containee) {
        if (!equalPath(container.segments, containee.segments))
            return false;
        if (container.numberOfChildren !== containee.numberOfChildren)
            return false;
        for (var c in containee.children) {
            if (!container.children[c])
                return false;
            if (!equalSegmentGroups(container.children[c], containee.children[c]))
                return false;
        }
        return true;
    }
    function containsQueryParams(container, containee) {
        // TODO: This does not handle array params correctly.
        return Object.keys(containee).length <= Object.keys(container).length &&
            Object.keys(containee).every(function (key) { return containee[key] === container[key]; });
    }
    function containsSegmentGroup(container, containee) {
        return containsSegmentGroupHelper(container, containee, containee.segments);
    }
    function containsSegmentGroupHelper(container, containee, containeePaths) {
        if (container.segments.length > containeePaths.length) {
            var current = container.segments.slice(0, containeePaths.length);
            if (!equalPath(current, containeePaths))
                return false;
            if (containee.hasChildren())
                return false;
            return true;
        }
        else if (container.segments.length === containeePaths.length) {
            if (!equalPath(container.segments, containeePaths))
                return false;
            for (var c in containee.children) {
                if (!container.children[c])
                    return false;
                if (!containsSegmentGroup(container.children[c], containee.children[c]))
                    return false;
            }
            return true;
        }
        else {
            var current = containeePaths.slice(0, container.segments.length);
            var next = containeePaths.slice(container.segments.length);
            if (!equalPath(container.segments, current))
                return false;
            if (!container.children[PRIMARY_OUTLET])
                return false;
            return containsSegmentGroupHelper(container.children[PRIMARY_OUTLET], containee, next);
        }
    }
    /**
     * @description
     *
     * Represents the parsed URL.
     *
     * Since a router state is a tree, and the URL is nothing but a serialized state, the URL is a
     * serialized tree.
     * UrlTree is a data structure that provides a lot of affordances in dealing with URLs
     *
     * @usageNotes
     * ### Example
     *
     * ```
     * @Component({templateUrl:'template.html'})
     * class MyComponent {
     *   constructor(router: Router) {
     *     const tree: UrlTree =
     *       router.parseUrl('/team/33/(user/victor//support:help)?debug=true#fragment');
     *     const f = tree.fragment; // return 'fragment'
     *     const q = tree.queryParams; // returns {debug: 'true'}
     *     const g: UrlSegmentGroup = tree.root.children[PRIMARY_OUTLET];
     *     const s: UrlSegment[] = g.segments; // returns 2 segments 'team' and '33'
     *     g.children[PRIMARY_OUTLET].segments; // returns 2 segments 'user' and 'victor'
     *     g.children['support'].segments; // return 1 segment 'help'
     *   }
     * }
     * ```
     *
     * @publicApi
     */
    var UrlTree = /** @class */ (function () {
        /** @internal */
        function UrlTree(
        /** The root segment group of the URL tree */
        root, 
        /** The query params of the URL */
        queryParams, 
        /** The fragment of the URL */
        fragment) {
            this.root = root;
            this.queryParams = queryParams;
            this.fragment = fragment;
        }
        Object.defineProperty(UrlTree.prototype, "queryParamMap", {
            get: function () {
                if (!this._queryParamMap) {
                    this._queryParamMap = convertToParamMap(this.queryParams);
                }
                return this._queryParamMap;
            },
            enumerable: true,
            configurable: true
        });
        /** @docsNotRequired */
        UrlTree.prototype.toString = function () { return DEFAULT_SERIALIZER.serialize(this); };
        return UrlTree;
    }());
    /**
     * @description
     *
     * Represents the parsed URL segment group.
     *
     * See `UrlTree` for more information.
     *
     * @publicApi
     */
    var UrlSegmentGroup = /** @class */ (function () {
        function UrlSegmentGroup(
        /** The URL segments of this group. See `UrlSegment` for more information */
        segments, 
        /** The list of children of this group */
        children) {
            var _this = this;
            this.segments = segments;
            this.children = children;
            /** The parent node in the url tree */
            this.parent = null;
            forEach(children, function (v, k) { return v.parent = _this; });
        }
        /** Whether the segment has child segments */
        UrlSegmentGroup.prototype.hasChildren = function () { return this.numberOfChildren > 0; };
        Object.defineProperty(UrlSegmentGroup.prototype, "numberOfChildren", {
            /** Number of child segments */
            get: function () { return Object.keys(this.children).length; },
            enumerable: true,
            configurable: true
        });
        /** @docsNotRequired */
        UrlSegmentGroup.prototype.toString = function () { return serializePaths(this); };
        return UrlSegmentGroup;
    }());
    /**
     * @description
     *
     * Represents a single URL segment.
     *
     * A UrlSegment is a part of a URL between the two slashes. It contains a path and the matrix
     * parameters associated with the segment.
     *
     * @usageNotes
     * ### Example
     *
     * ```
     * @Component({templateUrl:'template.html'})
     * class MyComponent {
     *   constructor(router: Router) {
     *     const tree: UrlTree = router.parseUrl('/team;id=33');
     *     const g: UrlSegmentGroup = tree.root.children[PRIMARY_OUTLET];
     *     const s: UrlSegment[] = g.segments;
     *     s[0].path; // returns 'team'
     *     s[0].parameters; // returns {id: 33}
     *   }
     * }
     * ```
     *
     * @publicApi
     */
    var UrlSegment = /** @class */ (function () {
        function UrlSegment(
        /** The path part of a URL segment */
        path, 
        /** The matrix parameters associated with a segment */
        parameters) {
            this.path = path;
            this.parameters = parameters;
        }
        Object.defineProperty(UrlSegment.prototype, "parameterMap", {
            get: function () {
                if (!this._parameterMap) {
                    this._parameterMap = convertToParamMap(this.parameters);
                }
                return this._parameterMap;
            },
            enumerable: true,
            configurable: true
        });
        /** @docsNotRequired */
        UrlSegment.prototype.toString = function () { return serializePath(this); };
        return UrlSegment;
    }());
    function equalSegments(as, bs) {
        return equalPath(as, bs) && as.every(function (a, i) { return shallowEqual(a.parameters, bs[i].parameters); });
    }
    function equalPath(as, bs) {
        if (as.length !== bs.length)
            return false;
        return as.every(function (a, i) { return a.path === bs[i].path; });
    }
    function mapChildrenIntoArray(segment, fn) {
        var res = [];
        forEach(segment.children, function (child, childOutlet) {
            if (childOutlet === PRIMARY_OUTLET) {
                res = res.concat(fn(child, childOutlet));
            }
        });
        forEach(segment.children, function (child, childOutlet) {
            if (childOutlet !== PRIMARY_OUTLET) {
                res = res.concat(fn(child, childOutlet));
            }
        });
        return res;
    }
    /**
     * @description
     *
     * Serializes and deserializes a URL string into a URL tree.
     *
     * The url serialization strategy is customizable. You can
     * make all URLs case insensitive by providing a custom UrlSerializer.
     *
     * See `DefaultUrlSerializer` for an example of a URL serializer.
     *
     * @publicApi
     */
    var UrlSerializer = /** @class */ (function () {
        function UrlSerializer() {
        }
        return UrlSerializer;
    }());
    /**
     * @description
     *
     * A default implementation of the `UrlSerializer`.
     *
     * Example URLs:
     *
     * ```
     * /inbox/33(popup:compose)
     * /inbox/33;open=true/messages/44
     * ```
     *
     * DefaultUrlSerializer uses parentheses to serialize secondary segments (e.g., popup:compose), the
     * colon syntax to specify the outlet, and the ';parameter=value' syntax (e.g., open=true) to
     * specify route specific parameters.
     *
     * @publicApi
     */
    var DefaultUrlSerializer = /** @class */ (function () {
        function DefaultUrlSerializer() {
        }
        /** Parses a url into a `UrlTree` */
        DefaultUrlSerializer.prototype.parse = function (url) {
            var p = new UrlParser(url);
            return new UrlTree(p.parseRootSegment(), p.parseQueryParams(), p.parseFragment());
        };
        /** Converts a `UrlTree` into a url */
        DefaultUrlSerializer.prototype.serialize = function (tree) {
            var segment = "/" + serializeSegment(tree.root, true);
            var query = serializeQueryParams(tree.queryParams);
            var fragment = typeof tree.fragment === "string" ? "#" + encodeUriFragment(tree.fragment) : '';
            return "" + segment + query + fragment;
        };
        return DefaultUrlSerializer;
    }());
    var DEFAULT_SERIALIZER = new DefaultUrlSerializer();
    function serializePaths(segment) {
        return segment.segments.map(function (p) { return serializePath(p); }).join('/');
    }
    function serializeSegment(segment, root) {
        if (!segment.hasChildren()) {
            return serializePaths(segment);
        }
        if (root) {
            var primary = segment.children[PRIMARY_OUTLET] ?
                serializeSegment(segment.children[PRIMARY_OUTLET], false) :
                '';
            var children_1 = [];
            forEach(segment.children, function (v, k) {
                if (k !== PRIMARY_OUTLET) {
                    children_1.push(k + ":" + serializeSegment(v, false));
                }
            });
            return children_1.length > 0 ? primary + "(" + children_1.join('//') + ")" : primary;
        }
        else {
            var children = mapChildrenIntoArray(segment, function (v, k) {
                if (k === PRIMARY_OUTLET) {
                    return [serializeSegment(segment.children[PRIMARY_OUTLET], false)];
                }
                return [k + ":" + serializeSegment(v, false)];
            });
            return serializePaths(segment) + "/(" + children.join('//') + ")";
        }
    }
    /**
     * Encodes a URI string with the default encoding. This function will only ever be called from
     * `encodeUriQuery` or `encodeUriSegment` as it's the base set of encodings to be used. We need
     * a custom encoding because encodeURIComponent is too aggressive and encodes stuff that doesn't
     * have to be encoded per https://url.spec.whatwg.org.
     */
    function encodeUriString(s) {
        return encodeURIComponent(s)
            .replace(/%40/g, '@')
            .replace(/%3A/gi, ':')
            .replace(/%24/g, '$')
            .replace(/%2C/gi, ',');
    }
    /**
     * This function should be used to encode both keys and values in a query string key/value. In
     * the following URL, you need to call encodeUriQuery on "k" and "v":
     *
     * http://www.site.org/html;mk=mv?k=v#f
     */
    function encodeUriQuery(s) {
        return encodeUriString(s).replace(/%3B/gi, ';');
    }
    /**
     * This function should be used to encode a URL fragment. In the following URL, you need to call
     * encodeUriFragment on "f":
     *
     * http://www.site.org/html;mk=mv?k=v#f
     */
    function encodeUriFragment(s) {
        return encodeURI(s);
    }
    /**
     * This function should be run on any URI segment as well as the key and value in a key/value
     * pair for matrix params. In the following URL, you need to call encodeUriSegment on "html",
     * "mk", and "mv":
     *
     * http://www.site.org/html;mk=mv?k=v#f
     */
    function encodeUriSegment(s) {
        return encodeUriString(s).replace(/\(/g, '%28').replace(/\)/g, '%29').replace(/%26/gi, '&');
    }
    function decode(s) {
        return decodeURIComponent(s);
    }
    // Query keys/values should have the "+" replaced first, as "+" in a query string is " ".
    // decodeURIComponent function will not decode "+" as a space.
    function decodeQuery(s) {
        return decode(s.replace(/\+/g, '%20'));
    }
    function serializePath(path) {
        return "" + encodeUriSegment(path.path) + serializeMatrixParams(path.parameters);
    }
    function serializeMatrixParams(params) {
        return Object.keys(params)
            .map(function (key) { return ";" + encodeUriSegment(key) + "=" + encodeUriSegment(params[key]); })
            .join('');
    }
    function serializeQueryParams(params) {
        var strParams = Object.keys(params).map(function (name) {
            var value = params[name];
            return Array.isArray(value) ?
                value.map(function (v) { return encodeUriQuery(name) + "=" + encodeUriQuery(v); }).join('&') :
                encodeUriQuery(name) + "=" + encodeUriQuery(value);
        });
        return strParams.length ? "?" + strParams.join("&") : '';
    }
    var SEGMENT_RE = /^[^\/()?;=#]+/;
    function matchSegments(str) {
        var match = str.match(SEGMENT_RE);
        return match ? match[0] : '';
    }
    var QUERY_PARAM_RE = /^[^=?&#]+/;
    // Return the name of the query param at the start of the string or an empty string
    function matchQueryParams(str) {
        var match = str.match(QUERY_PARAM_RE);
        return match ? match[0] : '';
    }
    var QUERY_PARAM_VALUE_RE = /^[^?&#]+/;
    // Return the value of the query param at the start of the string or an empty string
    function matchUrlQueryParamValue(str) {
        var match = str.match(QUERY_PARAM_VALUE_RE);
        return match ? match[0] : '';
    }
    var UrlParser = /** @class */ (function () {
        function UrlParser(url) {
            this.url = url;
            this.remaining = url;
        }
        UrlParser.prototype.parseRootSegment = function () {
            this.consumeOptional('/');
            if (this.remaining === '' || this.peekStartsWith('?') || this.peekStartsWith('#')) {
                return new UrlSegmentGroup([], {});
            }
            // The root segment group never has segments
            return new UrlSegmentGroup([], this.parseChildren());
        };
        UrlParser.prototype.parseQueryParams = function () {
            var params = {};
            if (this.consumeOptional('?')) {
                do {
                    this.parseQueryParam(params);
                } while (this.consumeOptional('&'));
            }
            return params;
        };
        UrlParser.prototype.parseFragment = function () {
            return this.consumeOptional('#') ? decodeURIComponent(this.remaining) : null;
        };
        UrlParser.prototype.parseChildren = function () {
            if (this.remaining === '') {
                return {};
            }
            this.consumeOptional('/');
            var segments = [];
            if (!this.peekStartsWith('(')) {
                segments.push(this.parseSegment());
            }
            while (this.peekStartsWith('/') && !this.peekStartsWith('//') && !this.peekStartsWith('/(')) {
                this.capture('/');
                segments.push(this.parseSegment());
            }
            var children = {};
            if (this.peekStartsWith('/(')) {
                this.capture('/');
                children = this.parseParens(true);
            }
            var res = {};
            if (this.peekStartsWith('(')) {
                res = this.parseParens(false);
            }
            if (segments.length > 0 || Object.keys(children).length > 0) {
                res[PRIMARY_OUTLET] = new UrlSegmentGroup(segments, children);
            }
            return res;
        };
        // parse a segment with its matrix parameters
        // ie `name;k1=v1;k2`
        UrlParser.prototype.parseSegment = function () {
            var path = matchSegments(this.remaining);
            if (path === '' && this.peekStartsWith(';')) {
                throw new Error("Empty path url segment cannot have parameters: '" + this.remaining + "'.");
            }
            this.capture(path);
            return new UrlSegment(decode(path), this.parseMatrixParams());
        };
        UrlParser.prototype.parseMatrixParams = function () {
            var params = {};
            while (this.consumeOptional(';')) {
                this.parseParam(params);
            }
            return params;
        };
        UrlParser.prototype.parseParam = function (params) {
            var key = matchSegments(this.remaining);
            if (!key) {
                return;
            }
            this.capture(key);
            var value = '';
            if (this.consumeOptional('=')) {
                var valueMatch = matchSegments(this.remaining);
                if (valueMatch) {
                    value = valueMatch;
                    this.capture(value);
                }
            }
            params[decode(key)] = decode(value);
        };
        // Parse a single query parameter `name[=value]`
        UrlParser.prototype.parseQueryParam = function (params) {
            var key = matchQueryParams(this.remaining);
            if (!key) {
                return;
            }
            this.capture(key);
            var value = '';
            if (this.consumeOptional('=')) {
                var valueMatch = matchUrlQueryParamValue(this.remaining);
                if (valueMatch) {
                    value = valueMatch;
                    this.capture(value);
                }
            }
            var decodedKey = decodeQuery(key);
            var decodedVal = decodeQuery(value);
            if (params.hasOwnProperty(decodedKey)) {
                // Append to existing values
                var currentVal = params[decodedKey];
                if (!Array.isArray(currentVal)) {
                    currentVal = [currentVal];
                    params[decodedKey] = currentVal;
                }
                currentVal.push(decodedVal);
            }
            else {
                // Create a new value
                params[decodedKey] = decodedVal;
            }
        };
        // parse `(a/b//outlet_name:c/d)`
        UrlParser.prototype.parseParens = function (allowPrimary) {
            var segments = {};
            this.capture('(');
            while (!this.consumeOptional(')') && this.remaining.length > 0) {
                var path = matchSegments(this.remaining);
                var next = this.remaining[path.length];
                // if is is not one of these characters, then the segment was unescaped
                // or the group was not closed
                if (next !== '/' && next !== ')' && next !== ';') {
                    throw new Error("Cannot parse url '" + this.url + "'");
                }
                var outletName = undefined;
                if (path.indexOf(':') > -1) {
                    outletName = path.substr(0, path.indexOf(':'));
                    this.capture(outletName);
                    this.capture(':');
                }
                else if (allowPrimary) {
                    outletName = PRIMARY_OUTLET;
                }
                var children = this.parseChildren();
                segments[outletName] = Object.keys(children).length === 1 ? children[PRIMARY_OUTLET] :
                    new UrlSegmentGroup([], children);
                this.consumeOptional('//');
            }
            return segments;
        };
        UrlParser.prototype.peekStartsWith = function (str) { return this.remaining.startsWith(str); };
        // Consumes the prefix when it is present and returns whether it has been consumed
        UrlParser.prototype.consumeOptional = function (str) {
            if (this.peekStartsWith(str)) {
                this.remaining = this.remaining.substring(str.length);
                return true;
            }
            return false;
        };
        UrlParser.prototype.capture = function (str) {
            if (!this.consumeOptional(str)) {
                throw new Error("Expected \"" + str + "\".");
            }
        };
        return UrlParser;
    }());

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    var Tree = /** @class */ (function () {
        function Tree(root) {
            this._root = root;
        }
        Object.defineProperty(Tree.prototype, "root", {
            get: function () { return this._root.value; },
            enumerable: true,
            configurable: true
        });
        /**
         * @internal
         */
        Tree.prototype.parent = function (t) {
            var p = this.pathFromRoot(t);
            return p.length > 1 ? p[p.length - 2] : null;
        };
        /**
         * @internal
         */
        Tree.prototype.children = function (t) {
            var n = findNode(t, this._root);
            return n ? n.children.map(function (t) { return t.value; }) : [];
        };
        /**
         * @internal
         */
        Tree.prototype.firstChild = function (t) {
            var n = findNode(t, this._root);
            return n && n.children.length > 0 ? n.children[0].value : null;
        };
        /**
         * @internal
         */
        Tree.prototype.siblings = function (t) {
            var p = findPath(t, this._root);
            if (p.length < 2)
                return [];
            var c = p[p.length - 2].children.map(function (c) { return c.value; });
            return c.filter(function (cc) { return cc !== t; });
        };
        /**
         * @internal
         */
        Tree.prototype.pathFromRoot = function (t) { return findPath(t, this._root).map(function (s) { return s.value; }); };
        return Tree;
    }());
    // DFS for the node matching the value
    function findNode(value, node) {
        var e_1, _a;
        if (value === node.value)
            return node;
        try {
            for (var _b = __values(node.children), _c = _b.next(); !_c.done; _c = _b.next()) {
                var child = _c.value;
                var node_1 = findNode(value, child);
                if (node_1)
                    return node_1;
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return null;
    }
    // Return the path to the node with the given value using DFS
    function findPath(value, node) {
        var e_2, _a;
        if (value === node.value)
            return [node];
        try {
            for (var _b = __values(node.children), _c = _b.next(); !_c.done; _c = _b.next()) {
                var child = _c.value;
                var path = findPath(value, child);
                if (path.length) {
                    path.unshift(node);
                    return path;
                }
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_2) throw e_2.error; }
        }
        return [];
    }
    var TreeNode = /** @class */ (function () {
        function TreeNode(value, children) {
            this.value = value;
            this.children = children;
        }
        TreeNode.prototype.toString = function () { return "TreeNode(" + this.value + ")"; };
        return TreeNode;
    }());
    // Return the list of T indexed by outlet name
    function nodeChildrenAsMap(node) {
        var map$$1 = {};
        if (node) {
            node.children.forEach(function (child) { return map$$1[child.value.outlet] = child; });
        }
        return map$$1;
    }

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    /**
     * @description
     *
     * Represents the state of the router.
     *
     * RouterState is a tree of activated routes. Every node in this tree knows about the "consumed" URL
     * segments, the extracted parameters, and the resolved data.
     *
     * @usageNotes
     * ### Example
     *
     * ```
     * @Component({templateUrl:'template.html'})
     * class MyComponent {
     *   constructor(router: Router) {
     *     const state: RouterState = router.routerState;
     *     const root: ActivatedRoute = state.root;
     *     const child = root.firstChild;
     *     const id: Observable<string> = child.params.map(p => p.id);
     *     //...
     *   }
     * }
     * ```
     *
     * See `ActivatedRoute` for more information.
     *
     * @publicApi
     */
    var RouterState = /** @class */ (function (_super) {
        __extends(RouterState, _super);
        /** @internal */
        function RouterState(root, 
        /** The current snapshot of the router state */
        snapshot) {
            var _this = _super.call(this, root) || this;
            _this.snapshot = snapshot;
            setRouterState(_this, root);
            return _this;
        }
        RouterState.prototype.toString = function () { return this.snapshot.toString(); };
        return RouterState;
    }(Tree));
    function createEmptyState(urlTree, rootComponent) {
        var snapshot = createEmptyStateSnapshot(urlTree, rootComponent);
        var emptyUrl = new rxjs.BehaviorSubject([new UrlSegment('', {})]);
        var emptyParams = new rxjs.BehaviorSubject({});
        var emptyData = new rxjs.BehaviorSubject({});
        var emptyQueryParams = new rxjs.BehaviorSubject({});
        var fragment = new rxjs.BehaviorSubject('');
        var activated = new ActivatedRoute(emptyUrl, emptyParams, emptyQueryParams, fragment, emptyData, PRIMARY_OUTLET, rootComponent, snapshot.root);
        activated.snapshot = snapshot.root;
        return new RouterState(new TreeNode(activated, []), snapshot);
    }
    function createEmptyStateSnapshot(urlTree, rootComponent) {
        var emptyParams = {};
        var emptyData = {};
        var emptyQueryParams = {};
        var fragment = '';
        var activated = new ActivatedRouteSnapshot([], emptyParams, emptyQueryParams, fragment, emptyData, PRIMARY_OUTLET, rootComponent, null, urlTree.root, -1, {});
        return new RouterStateSnapshot('', new TreeNode(activated, []));
    }
    /**
     * @description
     *
     * Contains the information about a route associated with a component loaded in an
     * outlet.  An `ActivatedRoute` can also be used to traverse the router state tree.
     *
     * ```
     * @Component({...})
     * class MyComponent {
     *   constructor(route: ActivatedRoute) {
     *     const id: Observable<string> = route.params.pipe(map(p => p.id));
     *     const url: Observable<string> = route.url.pipe(map(segments => segments.join('')));
     *     // route.data includes both `data` and `resolve`
     *     const user = route.data.pipe(map(d => d.user));
     *   }
     * }
     * ```
     *
     * @publicApi
     */
    var ActivatedRoute = /** @class */ (function () {
        /** @internal */
        function ActivatedRoute(
        /** An observable of the URL segments matched by this route */
        url, 
        /** An observable of the matrix parameters scoped to this route */
        params, 
        /** An observable of the query parameters shared by all the routes */
        queryParams, 
        /** An observable of the URL fragment shared by all the routes */
        fragment, 
        /** An observable of the static and resolved data of this route. */
        data, 
        /** The outlet name of the route. It's a constant */
        outlet, 
        /** The component of the route. It's a constant */
        // TODO(vsavkin): remove |string
        component, futureSnapshot) {
            this.url = url;
            this.params = params;
            this.queryParams = queryParams;
            this.fragment = fragment;
            this.data = data;
            this.outlet = outlet;
            this.component = component;
            this._futureSnapshot = futureSnapshot;
        }
        Object.defineProperty(ActivatedRoute.prototype, "routeConfig", {
            /** The configuration used to match this route */
            get: function () { return this._futureSnapshot.routeConfig; },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ActivatedRoute.prototype, "root", {
            /** The root of the router state */
            get: function () { return this._routerState.root; },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ActivatedRoute.prototype, "parent", {
            /** The parent of this route in the router state tree */
            get: function () { return this._routerState.parent(this); },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ActivatedRoute.prototype, "firstChild", {
            /** The first child of this route in the router state tree */
            get: function () { return this._routerState.firstChild(this); },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ActivatedRoute.prototype, "children", {
            /** The children of this route in the router state tree */
            get: function () { return this._routerState.children(this); },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ActivatedRoute.prototype, "pathFromRoot", {
            /** The path from the root of the router state tree to this route */
            get: function () { return this._routerState.pathFromRoot(this); },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ActivatedRoute.prototype, "paramMap", {
            get: function () {
                if (!this._paramMap) {
                    this._paramMap = this.params.pipe(operators.map(function (p) { return convertToParamMap(p); }));
                }
                return this._paramMap;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ActivatedRoute.prototype, "queryParamMap", {
            get: function () {
                if (!this._queryParamMap) {
                    this._queryParamMap =
                        this.queryParams.pipe(operators.map(function (p) { return convertToParamMap(p); }));
                }
                return this._queryParamMap;
            },
            enumerable: true,
            configurable: true
        });
        ActivatedRoute.prototype.toString = function () {
            return this.snapshot ? this.snapshot.toString() : "Future(" + this._futureSnapshot + ")";
        };
        return ActivatedRoute;
    }());
    /**
     * Returns the inherited params, data, and resolve for a given route.
     * By default, this only inherits values up to the nearest path-less or component-less route.
     * @internal
     */
    function inheritedParamsDataResolve(route, paramsInheritanceStrategy) {
        if (paramsInheritanceStrategy === void 0) { paramsInheritanceStrategy = 'emptyOnly'; }
        var pathFromRoot = route.pathFromRoot;
        var inheritingStartingFrom = 0;
        if (paramsInheritanceStrategy !== 'always') {
            inheritingStartingFrom = pathFromRoot.length - 1;
            while (inheritingStartingFrom >= 1) {
                var current = pathFromRoot[inheritingStartingFrom];
                var parent_1 = pathFromRoot[inheritingStartingFrom - 1];
                // current route is an empty path => inherits its parent's params and data
                if (current.routeConfig && current.routeConfig.path === '') {
                    inheritingStartingFrom--;
                    // parent is componentless => current route should inherit its params and data
                }
                else if (!parent_1.component) {
                    inheritingStartingFrom--;
                }
                else {
                    break;
                }
            }
        }
        return flattenInherited(pathFromRoot.slice(inheritingStartingFrom));
    }
    /** @internal */
    function flattenInherited(pathFromRoot) {
        return pathFromRoot.reduce(function (res, curr) {
            var params = __assign({}, res.params, curr.params);
            var data = __assign({}, res.data, curr.data);
            var resolve = __assign({}, res.resolve, curr._resolvedData);
            return { params: params, data: data, resolve: resolve };
        }, { params: {}, data: {}, resolve: {} });
    }
    /**
     * @description
     *
     * Contains the information about a route associated with a component loaded in an
     * outlet at a particular moment in time. ActivatedRouteSnapshot can also be used to
     * traverse the router state tree.
     *
     * ```
     * @Component({templateUrl:'./my-component.html'})
     * class MyComponent {
     *   constructor(route: ActivatedRoute) {
     *     const id: string = route.snapshot.params.id;
     *     const url: string = route.snapshot.url.join('');
     *     const user = route.snapshot.data.user;
     *   }
     * }
     * ```
     *
     * @publicApi
     */
    var ActivatedRouteSnapshot = /** @class */ (function () {
        /** @internal */
        function ActivatedRouteSnapshot(
        /** The URL segments matched by this route */
        url, 
        /** The matrix parameters scoped to this route */
        params, 
        /** The query parameters shared by all the routes */
        queryParams, 
        /** The URL fragment shared by all the routes */
        fragment, 
        /** The static and resolved data of this route */
        data, 
        /** The outlet name of the route */
        outlet, 
        /** The component of the route */
        component, routeConfig, urlSegment, lastPathIndex, resolve) {
            this.url = url;
            this.params = params;
            this.queryParams = queryParams;
            this.fragment = fragment;
            this.data = data;
            this.outlet = outlet;
            this.component = component;
            this.routeConfig = routeConfig;
            this._urlSegment = urlSegment;
            this._lastPathIndex = lastPathIndex;
            this._resolve = resolve;
        }
        Object.defineProperty(ActivatedRouteSnapshot.prototype, "root", {
            /** The root of the router state */
            get: function () { return this._routerState.root; },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ActivatedRouteSnapshot.prototype, "parent", {
            /** The parent of this route in the router state tree */
            get: function () { return this._routerState.parent(this); },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ActivatedRouteSnapshot.prototype, "firstChild", {
            /** The first child of this route in the router state tree */
            get: function () { return this._routerState.firstChild(this); },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ActivatedRouteSnapshot.prototype, "children", {
            /** The children of this route in the router state tree */
            get: function () { return this._routerState.children(this); },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ActivatedRouteSnapshot.prototype, "pathFromRoot", {
            /** The path from the root of the router state tree to this route */
            get: function () { return this._routerState.pathFromRoot(this); },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ActivatedRouteSnapshot.prototype, "paramMap", {
            get: function () {
                if (!this._paramMap) {
                    this._paramMap = convertToParamMap(this.params);
                }
                return this._paramMap;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ActivatedRouteSnapshot.prototype, "queryParamMap", {
            get: function () {
                if (!this._queryParamMap) {
                    this._queryParamMap = convertToParamMap(this.queryParams);
                }
                return this._queryParamMap;
            },
            enumerable: true,
            configurable: true
        });
        ActivatedRouteSnapshot.prototype.toString = function () {
            var url = this.url.map(function (segment) { return segment.toString(); }).join('/');
            var matched = this.routeConfig ? this.routeConfig.path : '';
            return "Route(url:'" + url + "', path:'" + matched + "')";
        };
        return ActivatedRouteSnapshot;
    }());
    /**
     * @description
     *
     * Represents the state of the router at a moment in time.
     *
     * This is a tree of activated route snapshots. Every node in this tree knows about
     * the "consumed" URL segments, the extracted parameters, and the resolved data.
     *
     * @usageNotes
     * ### Example
     *
     * ```
     * @Component({templateUrl:'template.html'})
     * class MyComponent {
     *   constructor(router: Router) {
     *     const state: RouterState = router.routerState;
     *     const snapshot: RouterStateSnapshot = state.snapshot;
     *     const root: ActivatedRouteSnapshot = snapshot.root;
     *     const child = root.firstChild;
     *     const id: Observable<string> = child.params.map(p => p.id);
     *     //...
     *   }
     * }
     * ```
     *
     * @publicApi
     */
    var RouterStateSnapshot = /** @class */ (function (_super) {
        __extends(RouterStateSnapshot, _super);
        /** @internal */
        function RouterStateSnapshot(
        /** The url from which this snapshot was created */
        url, root) {
            var _this = _super.call(this, root) || this;
            _this.url = url;
            setRouterState(_this, root);
            return _this;
        }
        RouterStateSnapshot.prototype.toString = function () { return serializeNode(this._root); };
        return RouterStateSnapshot;
    }(Tree));
    function setRouterState(state, node) {
        node.value._routerState = state;
        node.children.forEach(function (c) { return setRouterState(state, c); });
    }
    function serializeNode(node) {
        var c = node.children.length > 0 ? " { " + node.children.map(serializeNode).join(', ') + " } " : '';
        return "" + node.value + c;
    }
    /**
     * The expectation is that the activate route is created with the right set of parameters.
     * So we push new values into the observables only when they are not the initial values.
     * And we detect that by checking if the snapshot field is set.
     */
    function advanceActivatedRoute(route) {
        if (route.snapshot) {
            var currentSnapshot = route.snapshot;
            var nextSnapshot = route._futureSnapshot;
            route.snapshot = nextSnapshot;
            if (!shallowEqual(currentSnapshot.queryParams, nextSnapshot.queryParams)) {
                route.queryParams.next(nextSnapshot.queryParams);
            }
            if (currentSnapshot.fragment !== nextSnapshot.fragment) {
                route.fragment.next(nextSnapshot.fragment);
            }
            if (!shallowEqual(currentSnapshot.params, nextSnapshot.params)) {
                route.params.next(nextSnapshot.params);
            }
            if (!shallowEqualArrays(currentSnapshot.url, nextSnapshot.url)) {
                route.url.next(nextSnapshot.url);
            }
            if (!shallowEqual(currentSnapshot.data, nextSnapshot.data)) {
                route.data.next(nextSnapshot.data);
            }
        }
        else {
            route.snapshot = route._futureSnapshot;
            // this is for resolved data
            route.data.next(route._futureSnapshot.data);
        }
    }
    function equalParamsAndUrlSegments(a, b) {
        var equalUrlParams = shallowEqual(a.params, b.params) && equalSegments(a.url, b.url);
        var parentsMismatch = !a.parent !== !b.parent;
        return equalUrlParams && !parentsMismatch &&
            (!a.parent || equalParamsAndUrlSegments(a.parent, b.parent));
    }

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    function createRouterState(routeReuseStrategy, curr, prevState) {
        var root = createNode(routeReuseStrategy, curr._root, prevState ? prevState._root : undefined);
        return new RouterState(root, curr);
    }
    function createNode(routeReuseStrategy, curr, prevState) {
        // reuse an activated route that is currently displayed on the screen
        if (prevState && routeReuseStrategy.shouldReuseRoute(curr.value, prevState.value.snapshot)) {
            var value = prevState.value;
            value._futureSnapshot = curr.value;
            var children = createOrReuseChildren(routeReuseStrategy, curr, prevState);
            return new TreeNode(value, children);
            // retrieve an activated route that is used to be displayed, but is not currently displayed
        }
        else {
            var detachedRouteHandle = routeReuseStrategy.retrieve(curr.value);
            if (detachedRouteHandle) {
                var tree = detachedRouteHandle.route;
                setFutureSnapshotsOfActivatedRoutes(curr, tree);
                return tree;
            }
            else {
                var value = createActivatedRoute(curr.value);
                var children = curr.children.map(function (c) { return createNode(routeReuseStrategy, c); });
                return new TreeNode(value, children);
            }
        }
    }
    function setFutureSnapshotsOfActivatedRoutes(curr, result) {
        if (curr.value.routeConfig !== result.value.routeConfig) {
            throw new Error('Cannot reattach ActivatedRouteSnapshot created from a different route');
        }
        if (curr.children.length !== result.children.length) {
            throw new Error('Cannot reattach ActivatedRouteSnapshot with a different number of children');
        }
        result.value._futureSnapshot = curr.value;
        for (var i = 0; i < curr.children.length; ++i) {
            setFutureSnapshotsOfActivatedRoutes(curr.children[i], result.children[i]);
        }
    }
    function createOrReuseChildren(routeReuseStrategy, curr, prevState) {
        return curr.children.map(function (child) {
            var e_1, _a;
            try {
                for (var _b = __values(prevState.children), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var p = _c.value;
                    if (routeReuseStrategy.shouldReuseRoute(p.value.snapshot, child.value)) {
                        return createNode(routeReuseStrategy, child, p);
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_1) throw e_1.error; }
            }
            return createNode(routeReuseStrategy, child);
        });
    }
    function createActivatedRoute(c) {
        return new ActivatedRoute(new rxjs.BehaviorSubject(c.url), new rxjs.BehaviorSubject(c.params), new rxjs.BehaviorSubject(c.queryParams), new rxjs.BehaviorSubject(c.fragment), new rxjs.BehaviorSubject(c.data), c.outlet, c.component, c);
    }

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    function createUrlTree(route, urlTree, commands, queryParams, fragment) {
        if (commands.length === 0) {
            return tree(urlTree.root, urlTree.root, urlTree, queryParams, fragment);
        }
        var nav = computeNavigation(commands);
        if (nav.toRoot()) {
            return tree(urlTree.root, new UrlSegmentGroup([], {}), urlTree, queryParams, fragment);
        }
        var startingPosition = findStartingPosition(nav, urlTree, route);
        var segmentGroup = startingPosition.processChildren ?
            updateSegmentGroupChildren(startingPosition.segmentGroup, startingPosition.index, nav.commands) :
            updateSegmentGroup(startingPosition.segmentGroup, startingPosition.index, nav.commands);
        return tree(startingPosition.segmentGroup, segmentGroup, urlTree, queryParams, fragment);
    }
    function isMatrixParams(command) {
        return typeof command === 'object' && command != null && !command.outlets && !command.segmentPath;
    }
    function tree(oldSegmentGroup, newSegmentGroup, urlTree, queryParams, fragment) {
        var qp = {};
        if (queryParams) {
            forEach(queryParams, function (value, name) {
                qp[name] = Array.isArray(value) ? value.map(function (v) { return "" + v; }) : "" + value;
            });
        }
        if (urlTree.root === oldSegmentGroup) {
            return new UrlTree(newSegmentGroup, qp, fragment);
        }
        return new UrlTree(replaceSegment(urlTree.root, oldSegmentGroup, newSegmentGroup), qp, fragment);
    }
    function replaceSegment(current, oldSegment, newSegment) {
        var children = {};
        forEach(current.children, function (c, outletName) {
            if (c === oldSegment) {
                children[outletName] = newSegment;
            }
            else {
                children[outletName] = replaceSegment(c, oldSegment, newSegment);
            }
        });
        return new UrlSegmentGroup(current.segments, children);
    }
    var Navigation = /** @class */ (function () {
        function Navigation(isAbsolute, numberOfDoubleDots, commands) {
            this.isAbsolute = isAbsolute;
            this.numberOfDoubleDots = numberOfDoubleDots;
            this.commands = commands;
            if (isAbsolute && commands.length > 0 && isMatrixParams(commands[0])) {
                throw new Error('Root segment cannot have matrix parameters');
            }
            var cmdWithOutlet = commands.find(function (c) { return typeof c === 'object' && c != null && c.outlets; });
            if (cmdWithOutlet && cmdWithOutlet !== last$1(commands)) {
                throw new Error('{outlets:{}} has to be the last command');
            }
        }
        Navigation.prototype.toRoot = function () {
            return this.isAbsolute && this.commands.length === 1 && this.commands[0] == '/';
        };
        return Navigation;
    }());
    /** Transforms commands to a normalized `Navigation` */
    function computeNavigation(commands) {
        if ((typeof commands[0] === 'string') && commands.length === 1 && commands[0] === '/') {
            return new Navigation(true, 0, commands);
        }
        var numberOfDoubleDots = 0;
        var isAbsolute = false;
        var res = commands.reduce(function (res, cmd, cmdIdx) {
            if (typeof cmd === 'object' && cmd != null) {
                if (cmd.outlets) {
                    var outlets_1 = {};
                    forEach(cmd.outlets, function (commands, name) {
                        outlets_1[name] = typeof commands === 'string' ? commands.split('/') : commands;
                    });
                    return __spread(res, [{ outlets: outlets_1 }]);
                }
                if (cmd.segmentPath) {
                    return __spread(res, [cmd.segmentPath]);
                }
            }
            if (!(typeof cmd === 'string')) {
                return __spread(res, [cmd]);
            }
            if (cmdIdx === 0) {
                cmd.split('/').forEach(function (urlPart, partIndex) {
                    if (partIndex == 0 && urlPart === '.') ;
                    else if (partIndex == 0 && urlPart === '') { //  '/a'
                        isAbsolute = true;
                    }
                    else if (urlPart === '..') { //  '../a'
                        numberOfDoubleDots++;
                    }
                    else if (urlPart != '') {
                        res.push(urlPart);
                    }
                });
                return res;
            }
            return __spread(res, [cmd]);
        }, []);
        return new Navigation(isAbsolute, numberOfDoubleDots, res);
    }
    var Position = /** @class */ (function () {
        function Position(segmentGroup, processChildren, index) {
            this.segmentGroup = segmentGroup;
            this.processChildren = processChildren;
            this.index = index;
        }
        return Position;
    }());
    function findStartingPosition(nav, tree, route) {
        if (nav.isAbsolute) {
            return new Position(tree.root, true, 0);
        }
        if (route.snapshot._lastPathIndex === -1) {
            return new Position(route.snapshot._urlSegment, true, 0);
        }
        var modifier = isMatrixParams(nav.commands[0]) ? 0 : 1;
        var index = route.snapshot._lastPathIndex + modifier;
        return createPositionApplyingDoubleDots(route.snapshot._urlSegment, index, nav.numberOfDoubleDots);
    }
    function createPositionApplyingDoubleDots(group, index, numberOfDoubleDots) {
        var g = group;
        var ci = index;
        var dd = numberOfDoubleDots;
        while (dd > ci) {
            dd -= ci;
            g = g.parent;
            if (!g) {
                throw new Error('Invalid number of \'../\'');
            }
            ci = g.segments.length;
        }
        return new Position(g, false, ci - dd);
    }
    function getPath(command) {
        if (typeof command === 'object' && command != null && command.outlets) {
            return command.outlets[PRIMARY_OUTLET];
        }
        return "" + command;
    }
    function getOutlets(commands) {
        var _a, _b;
        if (!(typeof commands[0] === 'object'))
            return _a = {}, _a[PRIMARY_OUTLET] = commands, _a;
        if (commands[0].outlets === undefined)
            return _b = {}, _b[PRIMARY_OUTLET] = commands, _b;
        return commands[0].outlets;
    }
    function updateSegmentGroup(segmentGroup, startIndex, commands) {
        if (!segmentGroup) {
            segmentGroup = new UrlSegmentGroup([], {});
        }
        if (segmentGroup.segments.length === 0 && segmentGroup.hasChildren()) {
            return updateSegmentGroupChildren(segmentGroup, startIndex, commands);
        }
        var m = prefixedWith(segmentGroup, startIndex, commands);
        var slicedCommands = commands.slice(m.commandIndex);
        if (m.match && m.pathIndex < segmentGroup.segments.length) {
            var g = new UrlSegmentGroup(segmentGroup.segments.slice(0, m.pathIndex), {});
            g.children[PRIMARY_OUTLET] =
                new UrlSegmentGroup(segmentGroup.segments.slice(m.pathIndex), segmentGroup.children);
            return updateSegmentGroupChildren(g, 0, slicedCommands);
        }
        else if (m.match && slicedCommands.length === 0) {
            return new UrlSegmentGroup(segmentGroup.segments, {});
        }
        else if (m.match && !segmentGroup.hasChildren()) {
            return createNewSegmentGroup(segmentGroup, startIndex, commands);
        }
        else if (m.match) {
            return updateSegmentGroupChildren(segmentGroup, 0, slicedCommands);
        }
        else {
            return createNewSegmentGroup(segmentGroup, startIndex, commands);
        }
    }
    function updateSegmentGroupChildren(segmentGroup, startIndex, commands) {
        if (commands.length === 0) {
            return new UrlSegmentGroup(segmentGroup.segments, {});
        }
        else {
            var outlets_2 = getOutlets(commands);
            var children_1 = {};
            forEach(outlets_2, function (commands, outlet) {
                if (commands !== null) {
                    children_1[outlet] = updateSegmentGroup(segmentGroup.children[outlet], startIndex, commands);
                }
            });
            forEach(segmentGroup.children, function (child, childOutlet) {
                if (outlets_2[childOutlet] === undefined) {
                    children_1[childOutlet] = child;
                }
            });
            return new UrlSegmentGroup(segmentGroup.segments, children_1);
        }
    }
    function prefixedWith(segmentGroup, startIndex, commands) {
        var currentCommandIndex = 0;
        var currentPathIndex = startIndex;
        var noMatch = { match: false, pathIndex: 0, commandIndex: 0 };
        while (currentPathIndex < segmentGroup.segments.length) {
            if (currentCommandIndex >= commands.length)
                return noMatch;
            var path = segmentGroup.segments[currentPathIndex];
            var curr = getPath(commands[currentCommandIndex]);
            var next = currentCommandIndex < commands.length - 1 ? commands[currentCommandIndex + 1] : null;
            if (currentPathIndex > 0 && curr === undefined)
                break;
            if (curr && next && (typeof next === 'object') && next.outlets === undefined) {
                if (!compare(curr, next, path))
                    return noMatch;
                currentCommandIndex += 2;
            }
            else {
                if (!compare(curr, {}, path))
                    return noMatch;
                currentCommandIndex++;
            }
            currentPathIndex++;
        }
        return { match: true, pathIndex: currentPathIndex, commandIndex: currentCommandIndex };
    }
    function createNewSegmentGroup(segmentGroup, startIndex, commands) {
        var paths = segmentGroup.segments.slice(0, startIndex);
        var i = 0;
        while (i < commands.length) {
            if (typeof commands[i] === 'object' && commands[i].outlets !== undefined) {
                var children = createNewSegmentChildren(commands[i].outlets);
                return new UrlSegmentGroup(paths, children);
            }
            // if we start with an object literal, we need to reuse the path part from the segment
            if (i === 0 && isMatrixParams(commands[0])) {
                var p = segmentGroup.segments[startIndex];
                paths.push(new UrlSegment(p.path, commands[0]));
                i++;
                continue;
            }
            var curr = getPath(commands[i]);
            var next = (i < commands.length - 1) ? commands[i + 1] : null;
            if (curr && next && isMatrixParams(next)) {
                paths.push(new UrlSegment(curr, stringify(next)));
                i += 2;
            }
            else {
                paths.push(new UrlSegment(curr, {}));
                i++;
            }
        }
        return new UrlSegmentGroup(paths, {});
    }
    function createNewSegmentChildren(outlets) {
        var children = {};
        forEach(outlets, function (commands, outlet) {
            if (commands !== null) {
                children[outlet] = createNewSegmentGroup(new UrlSegmentGroup([], {}), 0, commands);
            }
        });
        return children;
    }
    function stringify(params) {
        var res = {};
        forEach(params, function (v, k) { return res[k] = "" + v; });
        return res;
    }
    function compare(path, params, segment) {
        return path == segment.path && shallowEqual(params, segment.parameters);
    }

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    var activateRoutes = function (rootContexts, routeReuseStrategy, forwardEvent) {
        return operators.map(function (t) {
            new ActivateRoutes(routeReuseStrategy, t.targetRouterState, t.currentRouterState, forwardEvent)
                .activate(rootContexts);
            return t;
        });
    };
    var ActivateRoutes = /** @class */ (function () {
        function ActivateRoutes(routeReuseStrategy, futureState, currState, forwardEvent) {
            this.routeReuseStrategy = routeReuseStrategy;
            this.futureState = futureState;
            this.currState = currState;
            this.forwardEvent = forwardEvent;
        }
        ActivateRoutes.prototype.activate = function (parentContexts) {
            var futureRoot = this.futureState._root;
            var currRoot = this.currState ? this.currState._root : null;
            this.deactivateChildRoutes(futureRoot, currRoot, parentContexts);
            advanceActivatedRoute(this.futureState.root);
            this.activateChildRoutes(futureRoot, currRoot, parentContexts);
        };
        // De-activate the child route that are not re-used for the future state
        ActivateRoutes.prototype.deactivateChildRoutes = function (futureNode, currNode, contexts) {
            var _this = this;
            var children = nodeChildrenAsMap(currNode);
            // Recurse on the routes active in the future state to de-activate deeper children
            futureNode.children.forEach(function (futureChild) {
                var childOutletName = futureChild.value.outlet;
                _this.deactivateRoutes(futureChild, children[childOutletName], contexts);
                delete children[childOutletName];
            });
            // De-activate the routes that will not be re-used
            forEach(children, function (v, childName) {
                _this.deactivateRouteAndItsChildren(v, contexts);
            });
        };
        ActivateRoutes.prototype.deactivateRoutes = function (futureNode, currNode, parentContext) {
            var future = futureNode.value;
            var curr = currNode ? currNode.value : null;
            if (future === curr) {
                // Reusing the node, check to see if the children need to be de-activated
                if (future.component) {
                    // If we have a normal route, we need to go through an outlet.
                    var context = parentContext.getContext(future.outlet);
                    if (context) {
                        this.deactivateChildRoutes(futureNode, currNode, context.children);
                    }
                }
                else {
                    // if we have a componentless route, we recurse but keep the same outlet map.
                    this.deactivateChildRoutes(futureNode, currNode, parentContext);
                }
            }
            else {
                if (curr) {
                    // Deactivate the current route which will not be re-used
                    this.deactivateRouteAndItsChildren(currNode, parentContext);
                }
            }
        };
        ActivateRoutes.prototype.deactivateRouteAndItsChildren = function (route, parentContexts) {
            if (this.routeReuseStrategy.shouldDetach(route.value.snapshot)) {
                this.detachAndStoreRouteSubtree(route, parentContexts);
            }
            else {
                this.deactivateRouteAndOutlet(route, parentContexts);
            }
        };
        ActivateRoutes.prototype.detachAndStoreRouteSubtree = function (route, parentContexts) {
            var context = parentContexts.getContext(route.value.outlet);
            if (context && context.outlet) {
                var componentRef = context.outlet.detach();
                var contexts = context.children.onOutletDeactivated();
                this.routeReuseStrategy.store(route.value.snapshot, { componentRef: componentRef, route: route, contexts: contexts });
            }
        };
        ActivateRoutes.prototype.deactivateRouteAndOutlet = function (route, parentContexts) {
            var _this = this;
            var context = parentContexts.getContext(route.value.outlet);
            if (context) {
                var children = nodeChildrenAsMap(route);
                var contexts_1 = route.value.component ? context.children : parentContexts;
                forEach(children, function (v, k) { return _this.deactivateRouteAndItsChildren(v, contexts_1); });
                if (context.outlet) {
                    // Destroy the component
                    context.outlet.deactivate();
                    // Destroy the contexts for all the outlets that were in the component
                    context.children.onOutletDeactivated();
                }
            }
        };
        ActivateRoutes.prototype.activateChildRoutes = function (futureNode, currNode, contexts) {
            var _this = this;
            var children = nodeChildrenAsMap(currNode);
            futureNode.children.forEach(function (c) {
                _this.activateRoutes(c, children[c.value.outlet], contexts);
                _this.forwardEvent(new ActivationEnd(c.value.snapshot));
            });
            if (futureNode.children.length) {
                this.forwardEvent(new ChildActivationEnd(futureNode.value.snapshot));
            }
        };
        ActivateRoutes.prototype.activateRoutes = function (futureNode, currNode, parentContexts) {
            var future = futureNode.value;
            var curr = currNode ? currNode.value : null;
            advanceActivatedRoute(future);
            // reusing the node
            if (future === curr) {
                if (future.component) {
                    // If we have a normal route, we need to go through an outlet.
                    var context = parentContexts.getOrCreateContext(future.outlet);
                    this.activateChildRoutes(futureNode, currNode, context.children);
                }
                else {
                    // if we have a componentless route, we recurse but keep the same outlet map.
                    this.activateChildRoutes(futureNode, currNode, parentContexts);
                }
            }
            else {
                if (future.component) {
                    // if we have a normal route, we need to place the component into the outlet and recurse.
                    var context = parentContexts.getOrCreateContext(future.outlet);
                    if (this.routeReuseStrategy.shouldAttach(future.snapshot)) {
                        var stored = this.routeReuseStrategy.retrieve(future.snapshot);
                        this.routeReuseStrategy.store(future.snapshot, null);
                        context.children.onOutletReAttached(stored.contexts);
                        context.attachRef = stored.componentRef;
                        context.route = stored.route.value;
                        if (context.outlet) {
                            // Attach right away when the outlet has already been instantiated
                            // Otherwise attach from `RouterOutlet.ngOnInit` when it is instantiated
                            context.outlet.attach(stored.componentRef, stored.route.value);
                        }
                        advanceActivatedRouteNodeAndItsChildren(stored.route);
                    }
                    else {
                        var config = parentLoadedConfig(future.snapshot);
                        var cmpFactoryResolver = config ? config.module.componentFactoryResolver : null;
                        context.attachRef = null;
                        context.route = future;
                        context.resolver = cmpFactoryResolver;
                        if (context.outlet) {
                            // Activate the outlet when it has already been instantiated
                            // Otherwise it will get activated from its `ngOnInit` when instantiated
                            context.outlet.activateWith(future, cmpFactoryResolver);
                        }
                        this.activateChildRoutes(futureNode, null, context.children);
                    }
                }
                else {
                    // if we have a componentless route, we recurse but keep the same outlet map.
                    this.activateChildRoutes(futureNode, null, parentContexts);
                }
            }
        };
        return ActivateRoutes;
    }());
    function advanceActivatedRouteNodeAndItsChildren(node) {
        advanceActivatedRoute(node.value);
        node.children.forEach(advanceActivatedRouteNodeAndItsChildren);
    }
    function parentLoadedConfig(snapshot) {
        for (var s = snapshot.parent; s; s = s.parent) {
            var route = s.routeConfig;
            if (route && route._loadedConfig)
                return route._loadedConfig;
            if (route && route.component)
                return null;
        }
        return null;
    }

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    /**
     * Simple function check, but generic so type inference will flow. Example:
     *
     * function product(a: number, b: number) {
     *   return a * b;
     * }
     *
     * if (isFunction<product>(fn)) {
     *   return fn(1, 2);
     * } else {
     *   throw "Must provide the `product` function";
     * }
     */
    function isFunction(v) {
        return typeof v === 'function';
    }
    function isBoolean(v) {
        return typeof v === 'boolean';
    }
    function isUrlTree(v) {
        return v instanceof UrlTree;
    }
    function isCanLoad(guard) {
        return guard && isFunction(guard.canLoad);
    }
    function isCanActivate(guard) {
        return guard && isFunction(guard.canActivate);
    }
    function isCanActivateChild(guard) {
        return guard && isFunction(guard.canActivateChild);
    }
    function isCanDeactivate(guard) {
        return guard && isFunction(guard.canDeactivate);
    }

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    var NoMatch = /** @class */ (function () {
        function NoMatch(segmentGroup) {
            this.segmentGroup = segmentGroup || null;
        }
        return NoMatch;
    }());
    var AbsoluteRedirect = /** @class */ (function () {
        function AbsoluteRedirect(urlTree) {
            this.urlTree = urlTree;
        }
        return AbsoluteRedirect;
    }());
    function noMatch(segmentGroup) {
        return new rxjs.Observable(function (obs) { return obs.error(new NoMatch(segmentGroup)); });
    }
    function absoluteRedirect(newTree) {
        return new rxjs.Observable(function (obs) { return obs.error(new AbsoluteRedirect(newTree)); });
    }
    function namedOutletsRedirect(redirectTo) {
        return new rxjs.Observable(function (obs) { return obs.error(new Error("Only absolute redirects can have named outlets. redirectTo: '" + redirectTo + "'")); });
    }
    function canLoadFails(route) {
        return new rxjs.Observable(function (obs) { return obs.error(navigationCancelingError("Cannot load children because the guard of the route \"path: '" + route.path + "'\" returned false")); });
    }
    /**
     * Returns the `UrlTree` with the redirection applied.
     *
     * Lazy modules are loaded along the way.
     */
    function applyRedirects(moduleInjector, configLoader, urlSerializer, urlTree, config) {
        return new ApplyRedirects(moduleInjector, configLoader, urlSerializer, urlTree, config).apply();
    }
    var ApplyRedirects = /** @class */ (function () {
        function ApplyRedirects(moduleInjector, configLoader, urlSerializer, urlTree, config) {
            this.configLoader = configLoader;
            this.urlSerializer = urlSerializer;
            this.urlTree = urlTree;
            this.config = config;
            this.allowRedirects = true;
            this.ngModule = moduleInjector.get(core.NgModuleRef);
        }
        ApplyRedirects.prototype.apply = function () {
            var _this = this;
            var expanded$ = this.expandSegmentGroup(this.ngModule, this.config, this.urlTree.root, PRIMARY_OUTLET);
            var urlTrees$ = expanded$.pipe(operators.map(function (rootSegmentGroup) { return _this.createUrlTree(rootSegmentGroup, _this.urlTree.queryParams, _this.urlTree.fragment); }));
            return urlTrees$.pipe(operators.catchError(function (e) {
                if (e instanceof AbsoluteRedirect) {
                    // after an absolute redirect we do not apply any more redirects!
                    _this.allowRedirects = false;
                    // we need to run matching, so we can fetch all lazy-loaded modules
                    return _this.match(e.urlTree);
                }
                if (e instanceof NoMatch) {
                    throw _this.noMatchError(e);
                }
                throw e;
            }));
        };
        ApplyRedirects.prototype.match = function (tree) {
            var _this = this;
            var expanded$ = this.expandSegmentGroup(this.ngModule, this.config, tree.root, PRIMARY_OUTLET);
            var mapped$ = expanded$.pipe(operators.map(function (rootSegmentGroup) {
                return _this.createUrlTree(rootSegmentGroup, tree.queryParams, tree.fragment);
            }));
            return mapped$.pipe(operators.catchError(function (e) {
                if (e instanceof NoMatch) {
                    throw _this.noMatchError(e);
                }
                throw e;
            }));
        };
        ApplyRedirects.prototype.noMatchError = function (e) {
            return new Error("Cannot match any routes. URL Segment: '" + e.segmentGroup + "'");
        };
        ApplyRedirects.prototype.createUrlTree = function (rootCandidate, queryParams, fragment) {
            var _a;
            var root = rootCandidate.segments.length > 0 ?
                new UrlSegmentGroup([], (_a = {}, _a[PRIMARY_OUTLET] = rootCandidate, _a)) :
                rootCandidate;
            return new UrlTree(root, queryParams, fragment);
        };
        ApplyRedirects.prototype.expandSegmentGroup = function (ngModule, routes, segmentGroup, outlet) {
            if (segmentGroup.segments.length === 0 && segmentGroup.hasChildren()) {
                return this.expandChildren(ngModule, routes, segmentGroup)
                    .pipe(operators.map(function (children) { return new UrlSegmentGroup([], children); }));
            }
            return this.expandSegment(ngModule, segmentGroup, routes, segmentGroup.segments, outlet, true);
        };
        // Recursively expand segment groups for all the child outlets
        ApplyRedirects.prototype.expandChildren = function (ngModule, routes, segmentGroup) {
            var _this = this;
            return waitForMap(segmentGroup.children, function (childOutlet, child) { return _this.expandSegmentGroup(ngModule, routes, child, childOutlet); });
        };
        ApplyRedirects.prototype.expandSegment = function (ngModule, segmentGroup, routes, segments, outlet, allowRedirects) {
            var _this = this;
            return rxjs.of.apply(void 0, __spread(routes)).pipe(operators.map(function (r) {
                var expanded$ = _this.expandSegmentAgainstRoute(ngModule, segmentGroup, routes, r, segments, outlet, allowRedirects);
                return expanded$.pipe(operators.catchError(function (e) {
                    if (e instanceof NoMatch) {
                        // TODO(i): this return type doesn't match the declared Observable<UrlSegmentGroup> -
                        // talk to Jason
                        return rxjs.of(null);
                    }
                    throw e;
                }));
            }), operators.concatAll(), operators.first(function (s) { return !!s; }), operators.catchError(function (e, _) {
                if (e instanceof rxjs.EmptyError || e.name === 'EmptyError') {
                    if (_this.noLeftoversInUrl(segmentGroup, segments, outlet)) {
                        return rxjs.of(new UrlSegmentGroup([], {}));
                    }
                    throw new NoMatch(segmentGroup);
                }
                throw e;
            }));
        };
        ApplyRedirects.prototype.noLeftoversInUrl = function (segmentGroup, segments, outlet) {
            return segments.length === 0 && !segmentGroup.children[outlet];
        };
        ApplyRedirects.prototype.expandSegmentAgainstRoute = function (ngModule, segmentGroup, routes, route, paths, outlet, allowRedirects) {
            if (getOutlet(route) !== outlet) {
                return noMatch(segmentGroup);
            }
            if (route.redirectTo === undefined) {
                return this.matchSegmentAgainstRoute(ngModule, segmentGroup, route, paths);
            }
            if (allowRedirects && this.allowRedirects) {
                return this.expandSegmentAgainstRouteUsingRedirect(ngModule, segmentGroup, routes, route, paths, outlet);
            }
            return noMatch(segmentGroup);
        };
        ApplyRedirects.prototype.expandSegmentAgainstRouteUsingRedirect = function (ngModule, segmentGroup, routes, route, segments, outlet) {
            if (route.path === '**') {
                return this.expandWildCardWithParamsAgainstRouteUsingRedirect(ngModule, routes, route, outlet);
            }
            return this.expandRegularSegmentAgainstRouteUsingRedirect(ngModule, segmentGroup, routes, route, segments, outlet);
        };
        ApplyRedirects.prototype.expandWildCardWithParamsAgainstRouteUsingRedirect = function (ngModule, routes, route, outlet) {
            var _this = this;
            var newTree = this.applyRedirectCommands([], route.redirectTo, {});
            if (route.redirectTo.startsWith('/')) {
                return absoluteRedirect(newTree);
            }
            return this.lineralizeSegments(route, newTree).pipe(operators.mergeMap(function (newSegments) {
                var group = new UrlSegmentGroup(newSegments, {});
                return _this.expandSegment(ngModule, group, routes, newSegments, outlet, false);
            }));
        };
        ApplyRedirects.prototype.expandRegularSegmentAgainstRouteUsingRedirect = function (ngModule, segmentGroup, routes, route, segments, outlet) {
            var _this = this;
            var _a = match(segmentGroup, route, segments), matched = _a.matched, consumedSegments = _a.consumedSegments, lastChild = _a.lastChild, positionalParamSegments = _a.positionalParamSegments;
            if (!matched)
                return noMatch(segmentGroup);
            var newTree = this.applyRedirectCommands(consumedSegments, route.redirectTo, positionalParamSegments);
            if (route.redirectTo.startsWith('/')) {
                return absoluteRedirect(newTree);
            }
            return this.lineralizeSegments(route, newTree).pipe(operators.mergeMap(function (newSegments) {
                return _this.expandSegment(ngModule, segmentGroup, routes, newSegments.concat(segments.slice(lastChild)), outlet, false);
            }));
        };
        ApplyRedirects.prototype.matchSegmentAgainstRoute = function (ngModule, rawSegmentGroup, route, segments) {
            var _this = this;
            if (route.path === '**') {
                if (route.loadChildren) {
                    return this.configLoader.load(ngModule.injector, route)
                        .pipe(operators.map(function (cfg) {
                        route._loadedConfig = cfg;
                        return new UrlSegmentGroup(segments, {});
                    }));
                }
                return rxjs.of(new UrlSegmentGroup(segments, {}));
            }
            var _a = match(rawSegmentGroup, route, segments), matched = _a.matched, consumedSegments = _a.consumedSegments, lastChild = _a.lastChild;
            if (!matched)
                return noMatch(rawSegmentGroup);
            var rawSlicedSegments = segments.slice(lastChild);
            var childConfig$ = this.getChildConfig(ngModule, route, segments);
            return childConfig$.pipe(operators.mergeMap(function (routerConfig) {
                var childModule = routerConfig.module;
                var childConfig = routerConfig.routes;
                var _a = split(rawSegmentGroup, consumedSegments, rawSlicedSegments, childConfig), segmentGroup = _a.segmentGroup, slicedSegments = _a.slicedSegments;
                if (slicedSegments.length === 0 && segmentGroup.hasChildren()) {
                    var expanded$_1 = _this.expandChildren(childModule, childConfig, segmentGroup);
                    return expanded$_1.pipe(operators.map(function (children) { return new UrlSegmentGroup(consumedSegments, children); }));
                }
                if (childConfig.length === 0 && slicedSegments.length === 0) {
                    return rxjs.of(new UrlSegmentGroup(consumedSegments, {}));
                }
                var expanded$ = _this.expandSegment(childModule, segmentGroup, childConfig, slicedSegments, PRIMARY_OUTLET, true);
                return expanded$.pipe(operators.map(function (cs) {
                    return new UrlSegmentGroup(consumedSegments.concat(cs.segments), cs.children);
                }));
            }));
        };
        ApplyRedirects.prototype.getChildConfig = function (ngModule, route, segments) {
            var _this = this;
            if (route.children) {
                // The children belong to the same module
                return rxjs.of(new LoadedRouterConfig(route.children, ngModule));
            }
            if (route.loadChildren) {
                // lazy children belong to the loaded module
                if (route._loadedConfig !== undefined) {
                    return rxjs.of(route._loadedConfig);
                }
                return runCanLoadGuard(ngModule.injector, route, segments)
                    .pipe(operators.mergeMap(function (shouldLoad) {
                    if (shouldLoad) {
                        return _this.configLoader.load(ngModule.injector, route)
                            .pipe(operators.map(function (cfg) {
                            route._loadedConfig = cfg;
                            return cfg;
                        }));
                    }
                    return canLoadFails(route);
                }));
            }
            return rxjs.of(new LoadedRouterConfig([], ngModule));
        };
        ApplyRedirects.prototype.lineralizeSegments = function (route, urlTree) {
            var res = [];
            var c = urlTree.root;
            while (true) {
                res = res.concat(c.segments);
                if (c.numberOfChildren === 0) {
                    return rxjs.of(res);
                }
                if (c.numberOfChildren > 1 || !c.children[PRIMARY_OUTLET]) {
                    return namedOutletsRedirect(route.redirectTo);
                }
                c = c.children[PRIMARY_OUTLET];
            }
        };
        ApplyRedirects.prototype.applyRedirectCommands = function (segments, redirectTo, posParams) {
            return this.applyRedirectCreatreUrlTree(redirectTo, this.urlSerializer.parse(redirectTo), segments, posParams);
        };
        ApplyRedirects.prototype.applyRedirectCreatreUrlTree = function (redirectTo, urlTree, segments, posParams) {
            var newRoot = this.createSegmentGroup(redirectTo, urlTree.root, segments, posParams);
            return new UrlTree(newRoot, this.createQueryParams(urlTree.queryParams, this.urlTree.queryParams), urlTree.fragment);
        };
        ApplyRedirects.prototype.createQueryParams = function (redirectToParams, actualParams) {
            var res = {};
            forEach(redirectToParams, function (v, k) {
                var copySourceValue = typeof v === 'string' && v.startsWith(':');
                if (copySourceValue) {
                    var sourceName = v.substring(1);
                    res[k] = actualParams[sourceName];
                }
                else {
                    res[k] = v;
                }
            });
            return res;
        };
        ApplyRedirects.prototype.createSegmentGroup = function (redirectTo, group, segments, posParams) {
            var _this = this;
            var updatedSegments = this.createSegments(redirectTo, group.segments, segments, posParams);
            var children = {};
            forEach(group.children, function (child, name) {
                children[name] = _this.createSegmentGroup(redirectTo, child, segments, posParams);
            });
            return new UrlSegmentGroup(updatedSegments, children);
        };
        ApplyRedirects.prototype.createSegments = function (redirectTo, redirectToSegments, actualSegments, posParams) {
            var _this = this;
            return redirectToSegments.map(function (s) { return s.path.startsWith(':') ? _this.findPosParam(redirectTo, s, posParams) :
                _this.findOrReturn(s, actualSegments); });
        };
        ApplyRedirects.prototype.findPosParam = function (redirectTo, redirectToUrlSegment, posParams) {
            var pos = posParams[redirectToUrlSegment.path.substring(1)];
            if (!pos)
                throw new Error("Cannot redirect to '" + redirectTo + "'. Cannot find '" + redirectToUrlSegment.path + "'.");
            return pos;
        };
        ApplyRedirects.prototype.findOrReturn = function (redirectToUrlSegment, actualSegments) {
            var e_1, _a;
            var idx = 0;
            try {
                for (var actualSegments_1 = __values(actualSegments), actualSegments_1_1 = actualSegments_1.next(); !actualSegments_1_1.done; actualSegments_1_1 = actualSegments_1.next()) {
                    var s = actualSegments_1_1.value;
                    if (s.path === redirectToUrlSegment.path) {
                        actualSegments.splice(idx);
                        return s;
                    }
                    idx++;
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (actualSegments_1_1 && !actualSegments_1_1.done && (_a = actualSegments_1.return)) _a.call(actualSegments_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
            return redirectToUrlSegment;
        };
        return ApplyRedirects;
    }());
    function runCanLoadGuard(moduleInjector, route, segments) {
        var canLoad = route.canLoad;
        if (!canLoad || canLoad.length === 0)
            return rxjs.of(true);
        var obs = rxjs.from(canLoad).pipe(operators.map(function (injectionToken) {
            var guard = moduleInjector.get(injectionToken);
            var guardVal;
            if (isCanLoad(guard)) {
                guardVal = guard.canLoad(route, segments);
            }
            else if (isFunction(guard)) {
                guardVal = guard(route, segments);
            }
            else {
                throw new Error('Invalid CanLoad guard');
            }
            return wrapIntoObservable(guardVal);
        }));
        return obs.pipe(operators.concatAll(), operators.every(function (result) { return result === true; }));
    }
    function match(segmentGroup, route, segments) {
        if (route.path === '') {
            if ((route.pathMatch === 'full') && (segmentGroup.hasChildren() || segments.length > 0)) {
                return { matched: false, consumedSegments: [], lastChild: 0, positionalParamSegments: {} };
            }
            return { matched: true, consumedSegments: [], lastChild: 0, positionalParamSegments: {} };
        }
        var matcher = route.matcher || defaultUrlMatcher;
        var res = matcher(segments, segmentGroup, route);
        if (!res) {
            return {
                matched: false,
                consumedSegments: [],
                lastChild: 0,
                positionalParamSegments: {},
            };
        }
        return {
            matched: true,
            consumedSegments: res.consumed,
            lastChild: res.consumed.length,
            positionalParamSegments: res.posParams,
        };
    }
    function split(segmentGroup, consumedSegments, slicedSegments, config) {
        if (slicedSegments.length > 0 &&
            containsEmptyPathRedirectsWithNamedOutlets(segmentGroup, slicedSegments, config)) {
            var s = new UrlSegmentGroup(consumedSegments, createChildrenForEmptySegments(config, new UrlSegmentGroup(slicedSegments, segmentGroup.children)));
            return { segmentGroup: mergeTrivialChildren(s), slicedSegments: [] };
        }
        if (slicedSegments.length === 0 &&
            containsEmptyPathRedirects(segmentGroup, slicedSegments, config)) {
            var s = new UrlSegmentGroup(segmentGroup.segments, addEmptySegmentsToChildrenIfNeeded(segmentGroup, slicedSegments, config, segmentGroup.children));
            return { segmentGroup: mergeTrivialChildren(s), slicedSegments: slicedSegments };
        }
        return { segmentGroup: segmentGroup, slicedSegments: slicedSegments };
    }
    function mergeTrivialChildren(s) {
        if (s.numberOfChildren === 1 && s.children[PRIMARY_OUTLET]) {
            var c = s.children[PRIMARY_OUTLET];
            return new UrlSegmentGroup(s.segments.concat(c.segments), c.children);
        }
        return s;
    }
    function addEmptySegmentsToChildrenIfNeeded(segmentGroup, slicedSegments, routes, children) {
        var e_2, _a;
        var res = {};
        try {
            for (var routes_1 = __values(routes), routes_1_1 = routes_1.next(); !routes_1_1.done; routes_1_1 = routes_1.next()) {
                var r = routes_1_1.value;
                if (isEmptyPathRedirect(segmentGroup, slicedSegments, r) && !children[getOutlet(r)]) {
                    res[getOutlet(r)] = new UrlSegmentGroup([], {});
                }
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (routes_1_1 && !routes_1_1.done && (_a = routes_1.return)) _a.call(routes_1);
            }
            finally { if (e_2) throw e_2.error; }
        }
        return __assign({}, children, res);
    }
    function createChildrenForEmptySegments(routes, primarySegmentGroup) {
        var e_3, _a;
        var res = {};
        res[PRIMARY_OUTLET] = primarySegmentGroup;
        try {
            for (var routes_2 = __values(routes), routes_2_1 = routes_2.next(); !routes_2_1.done; routes_2_1 = routes_2.next()) {
                var r = routes_2_1.value;
                if (r.path === '' && getOutlet(r) !== PRIMARY_OUTLET) {
                    res[getOutlet(r)] = new UrlSegmentGroup([], {});
                }
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (routes_2_1 && !routes_2_1.done && (_a = routes_2.return)) _a.call(routes_2);
            }
            finally { if (e_3) throw e_3.error; }
        }
        return res;
    }
    function containsEmptyPathRedirectsWithNamedOutlets(segmentGroup, segments, routes) {
        return routes.some(function (r) { return isEmptyPathRedirect(segmentGroup, segments, r) && getOutlet(r) !== PRIMARY_OUTLET; });
    }
    function containsEmptyPathRedirects(segmentGroup, segments, routes) {
        return routes.some(function (r) { return isEmptyPathRedirect(segmentGroup, segments, r); });
    }
    function isEmptyPathRedirect(segmentGroup, segments, r) {
        if ((segmentGroup.hasChildren() || segments.length > 0) && r.pathMatch === 'full') {
            return false;
        }
        return r.path === '' && r.redirectTo !== undefined;
    }
    function getOutlet(route) {
        return route.outlet || PRIMARY_OUTLET;
    }

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    function applyRedirects$1(moduleInjector, configLoader, urlSerializer, config) {
        return function (source) {
            return source.pipe(operators.switchMap(function (t) { return applyRedirects(moduleInjector, configLoader, urlSerializer, t.extractedUrl, config)
                .pipe(operators.map(function (urlAfterRedirects) { return (__assign({}, t, { urlAfterRedirects: urlAfterRedirects })); })); }));
        };
    }

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    var CanActivate = /** @class */ (function () {
        function CanActivate(path) {
            this.path = path;
            this.route = this.path[this.path.length - 1];
        }
        return CanActivate;
    }());
    var CanDeactivate = /** @class */ (function () {
        function CanDeactivate(component, route) {
            this.component = component;
            this.route = route;
        }
        return CanDeactivate;
    }());
    function getAllRouteGuards(future, curr, parentContexts) {
        var futureRoot = future._root;
        var currRoot = curr ? curr._root : null;
        return getChildRouteGuards(futureRoot, currRoot, parentContexts, [futureRoot.value]);
    }
    function getCanActivateChild(p) {
        var canActivateChild = p.routeConfig ? p.routeConfig.canActivateChild : null;
        if (!canActivateChild || canActivateChild.length === 0)
            return null;
        return { node: p, guards: canActivateChild };
    }
    function getToken(token, snapshot, moduleInjector) {
        var config = getClosestLoadedConfig(snapshot);
        var injector = config ? config.module.injector : moduleInjector;
        return injector.get(token);
    }
    function getClosestLoadedConfig(snapshot) {
        if (!snapshot)
            return null;
        for (var s = snapshot.parent; s; s = s.parent) {
            var route = s.routeConfig;
            if (route && route._loadedConfig)
                return route._loadedConfig;
        }
        return null;
    }
    function getChildRouteGuards(futureNode, currNode, contexts, futurePath, checks) {
        if (checks === void 0) { checks = {
            canDeactivateChecks: [],
            canActivateChecks: []
        }; }
        var prevChildren = nodeChildrenAsMap(currNode);
        // Process the children of the future route
        futureNode.children.forEach(function (c) {
            getRouteGuards(c, prevChildren[c.value.outlet], contexts, futurePath.concat([c.value]), checks);
            delete prevChildren[c.value.outlet];
        });
        // Process any children left from the current route (not active for the future route)
        forEach(prevChildren, function (v, k) {
            return deactivateRouteAndItsChildren(v, contexts.getContext(k), checks);
        });
        return checks;
    }
    function getRouteGuards(futureNode, currNode, parentContexts, futurePath, checks) {
        if (checks === void 0) { checks = {
            canDeactivateChecks: [],
            canActivateChecks: []
        }; }
        var future = futureNode.value;
        var curr = currNode ? currNode.value : null;
        var context = parentContexts ? parentContexts.getContext(futureNode.value.outlet) : null;
        // reusing the node
        if (curr && future.routeConfig === curr.routeConfig) {
            var shouldRun = shouldRunGuardsAndResolvers(curr, future, future.routeConfig.runGuardsAndResolvers);
            if (shouldRun) {
                checks.canActivateChecks.push(new CanActivate(futurePath));
            }
            else {
                // we need to set the data
                future.data = curr.data;
                future._resolvedData = curr._resolvedData;
            }
            // If we have a component, we need to go through an outlet.
            if (future.component) {
                getChildRouteGuards(futureNode, currNode, context ? context.children : null, futurePath, checks);
                // if we have a componentless route, we recurse but keep the same outlet map.
            }
            else {
                getChildRouteGuards(futureNode, currNode, parentContexts, futurePath, checks);
            }
            if (shouldRun) {
                var component = context && context.outlet && context.outlet.component || null;
                checks.canDeactivateChecks.push(new CanDeactivate(component, curr));
            }
        }
        else {
            if (curr) {
                deactivateRouteAndItsChildren(currNode, context, checks);
            }
            checks.canActivateChecks.push(new CanActivate(futurePath));
            // If we have a component, we need to go through an outlet.
            if (future.component) {
                getChildRouteGuards(futureNode, null, context ? context.children : null, futurePath, checks);
                // if we have a componentless route, we recurse but keep the same outlet map.
            }
            else {
                getChildRouteGuards(futureNode, null, parentContexts, futurePath, checks);
            }
        }
        return checks;
    }
    function shouldRunGuardsAndResolvers(curr, future, mode) {
        if (typeof mode === 'function') {
            return mode(curr, future);
        }
        switch (mode) {
            case 'pathParamsChange':
                return !equalPath(curr.url, future.url);
            case 'pathParamsOrQueryParamsChange':
                return !equalPath(curr.url, future.url) ||
                    !shallowEqual(curr.queryParams, future.queryParams);
            case 'always':
                return true;
            case 'paramsOrQueryParamsChange':
                return !equalParamsAndUrlSegments(curr, future) ||
                    !shallowEqual(curr.queryParams, future.queryParams);
            case 'paramsChange':
            default:
                return !equalParamsAndUrlSegments(curr, future);
        }
    }
    function deactivateRouteAndItsChildren(route, context, checks) {
        var children = nodeChildrenAsMap(route);
        var r = route.value;
        forEach(children, function (node, childName) {
            if (!r.component) {
                deactivateRouteAndItsChildren(node, context, checks);
            }
            else if (context) {
                deactivateRouteAndItsChildren(node, context.children.getContext(childName), checks);
            }
            else {
                deactivateRouteAndItsChildren(node, null, checks);
            }
        });
        if (!r.component) {
            checks.canDeactivateChecks.push(new CanDeactivate(null, r));
        }
        else if (context && context.outlet && context.outlet.isActivated) {
            checks.canDeactivateChecks.push(new CanDeactivate(context.outlet.component, r));
        }
        else {
            checks.canDeactivateChecks.push(new CanDeactivate(null, r));
        }
    }

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    var INITIAL_VALUE = Symbol('INITIAL_VALUE');
    function prioritizedGuardValue() {
        return operators.switchMap(function (obs) {
            return rxjs.combineLatest.apply(void 0, __spread(obs.map(function (o) { return o.pipe(operators.take(1), operators.startWith(INITIAL_VALUE)); }))).pipe(operators.scan(function (acc, list) {
                var isPending = false;
                return list.reduce(function (innerAcc, val, i) {
                    if (innerAcc !== INITIAL_VALUE)
                        return innerAcc;
                    // Toggle pending flag if any values haven't been set yet
                    if (val === INITIAL_VALUE)
                        isPending = true;
                    // Any other return values are only valid if we haven't yet hit a pending call.
                    // This guarantees that in the case of a guard at the bottom of the tree that
                    // returns a redirect, we will wait for the higher priority guard at the top to
                    // finish before performing the redirect.
                    if (!isPending) {
                        // Early return when we hit a `false` value as that should always cancel
                        // navigation
                        if (val === false)
                            return val;
                        if (i === list.length - 1 || isUrlTree(val)) {
                            return val;
                        }
                    }
                    return innerAcc;
                }, acc);
            }, INITIAL_VALUE), operators.filter(function (item) { return item !== INITIAL_VALUE; }), operators.map(function (item) { return isUrlTree(item) ? item : item === true; }), //
            operators.take(1));
        });
    }

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    function checkGuards(moduleInjector, forwardEvent) {
        return function (source) {
            return source.pipe(operators.mergeMap(function (t) {
                var targetSnapshot = t.targetSnapshot, currentSnapshot = t.currentSnapshot, _a = t.guards, canActivateChecks = _a.canActivateChecks, canDeactivateChecks = _a.canDeactivateChecks;
                if (canDeactivateChecks.length === 0 && canActivateChecks.length === 0) {
                    return rxjs.of(__assign({}, t, { guardsResult: true }));
                }
                return runCanDeactivateChecks(canDeactivateChecks, targetSnapshot, currentSnapshot, moduleInjector)
                    .pipe(operators.mergeMap(function (canDeactivate) {
                    return canDeactivate && isBoolean(canDeactivate) ?
                        runCanActivateChecks(targetSnapshot, canActivateChecks, moduleInjector, forwardEvent) :
                        rxjs.of(canDeactivate);
                }), operators.map(function (guardsResult) { return (__assign({}, t, { guardsResult: guardsResult })); }));
            }));
        };
    }
    function runCanDeactivateChecks(checks, futureRSS, currRSS, moduleInjector) {
        return rxjs.from(checks).pipe(operators.mergeMap(function (check) {
            return runCanDeactivate(check.component, check.route, currRSS, futureRSS, moduleInjector);
        }), operators.first(function (result) { return result !== true; }, true));
    }
    function runCanActivateChecks(futureSnapshot, checks, moduleInjector, forwardEvent) {
        return rxjs.from(checks).pipe(operators.concatMap(function (check) {
            return rxjs.from([
                fireChildActivationStart(check.route.parent, forwardEvent),
                fireActivationStart(check.route, forwardEvent),
                runCanActivateChild(futureSnapshot, check.path, moduleInjector),
                runCanActivate(futureSnapshot, check.route, moduleInjector)
            ])
                .pipe(operators.concatAll(), operators.first(function (result) {
                return result !== true;
            }, true));
        }), operators.first(function (result) { return result !== true; }, true));
    }
    /**
       * This should fire off `ActivationStart` events for each route being activated at this
       * level.
       * In other words, if you're activating `a` and `b` below, `path` will contain the
       * `ActivatedRouteSnapshot`s for both and we will fire `ActivationStart` for both. Always
       * return
       * `true` so checks continue to run.
       */
    function fireActivationStart(snapshot, forwardEvent) {
        if (snapshot !== null && forwardEvent) {
            forwardEvent(new ActivationStart(snapshot));
        }
        return rxjs.of(true);
    }
    /**
       * This should fire off `ChildActivationStart` events for each route being activated at this
       * level.
       * In other words, if you're activating `a` and `b` below, `path` will contain the
       * `ActivatedRouteSnapshot`s for both and we will fire `ChildActivationStart` for both. Always
       * return
       * `true` so checks continue to run.
       */
    function fireChildActivationStart(snapshot, forwardEvent) {
        if (snapshot !== null && forwardEvent) {
            forwardEvent(new ChildActivationStart(snapshot));
        }
        return rxjs.of(true);
    }
    function runCanActivate(futureRSS, futureARS, moduleInjector) {
        var canActivate = futureARS.routeConfig ? futureARS.routeConfig.canActivate : null;
        if (!canActivate || canActivate.length === 0)
            return rxjs.of(true);
        var canActivateObservables = canActivate.map(function (c) {
            return rxjs.defer(function () {
                var guard = getToken(c, futureARS, moduleInjector);
                var observable;
                if (isCanActivate(guard)) {
                    observable = wrapIntoObservable(guard.canActivate(futureARS, futureRSS));
                }
                else if (isFunction(guard)) {
                    observable = wrapIntoObservable(guard(futureARS, futureRSS));
                }
                else {
                    throw new Error('Invalid CanActivate guard');
                }
                return observable.pipe(operators.first());
            });
        });
        return rxjs.of(canActivateObservables).pipe(prioritizedGuardValue());
    }
    function runCanActivateChild(futureRSS, path, moduleInjector) {
        var futureARS = path[path.length - 1];
        var canActivateChildGuards = path.slice(0, path.length - 1)
            .reverse()
            .map(function (p) { return getCanActivateChild(p); })
            .filter(function (_) { return _ !== null; });
        var canActivateChildGuardsMapped = canActivateChildGuards.map(function (d) {
            return rxjs.defer(function () {
                var guardsMapped = d.guards.map(function (c) {
                    var guard = getToken(c, d.node, moduleInjector);
                    var observable;
                    if (isCanActivateChild(guard)) {
                        observable = wrapIntoObservable(guard.canActivateChild(futureARS, futureRSS));
                    }
                    else if (isFunction(guard)) {
                        observable = wrapIntoObservable(guard(futureARS, futureRSS));
                    }
                    else {
                        throw new Error('Invalid CanActivateChild guard');
                    }
                    return observable.pipe(operators.first());
                });
                return rxjs.of(guardsMapped).pipe(prioritizedGuardValue());
            });
        });
        return rxjs.of(canActivateChildGuardsMapped).pipe(prioritizedGuardValue());
    }
    function runCanDeactivate(component, currARS, currRSS, futureRSS, moduleInjector) {
        var canDeactivate = currARS && currARS.routeConfig ? currARS.routeConfig.canDeactivate : null;
        if (!canDeactivate || canDeactivate.length === 0)
            return rxjs.of(true);
        var canDeactivateObservables = canDeactivate.map(function (c) {
            var guard = getToken(c, currARS, moduleInjector);
            var observable;
            if (isCanDeactivate(guard)) {
                observable =
                    wrapIntoObservable(guard.canDeactivate(component, currARS, currRSS, futureRSS));
            }
            else if (isFunction(guard)) {
                observable = wrapIntoObservable(guard(component, currARS, currRSS, futureRSS));
            }
            else {
                throw new Error('Invalid CanDeactivate guard');
            }
            return observable.pipe(operators.first());
        });
        return rxjs.of(canDeactivateObservables).pipe(prioritizedGuardValue());
    }

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    var NoMatch$1 = /** @class */ (function () {
        function NoMatch() {
        }
        return NoMatch;
    }());
    function recognize(rootComponentType, config, urlTree, url, paramsInheritanceStrategy, relativeLinkResolution) {
        if (paramsInheritanceStrategy === void 0) { paramsInheritanceStrategy = 'emptyOnly'; }
        if (relativeLinkResolution === void 0) { relativeLinkResolution = 'legacy'; }
        return new Recognizer(rootComponentType, config, urlTree, url, paramsInheritanceStrategy, relativeLinkResolution)
            .recognize();
    }
    var Recognizer = /** @class */ (function () {
        function Recognizer(rootComponentType, config, urlTree, url, paramsInheritanceStrategy, relativeLinkResolution) {
            this.rootComponentType = rootComponentType;
            this.config = config;
            this.urlTree = urlTree;
            this.url = url;
            this.paramsInheritanceStrategy = paramsInheritanceStrategy;
            this.relativeLinkResolution = relativeLinkResolution;
        }
        Recognizer.prototype.recognize = function () {
            try {
                var rootSegmentGroup = split$1(this.urlTree.root, [], [], this.config, this.relativeLinkResolution).segmentGroup;
                var children = this.processSegmentGroup(this.config, rootSegmentGroup, PRIMARY_OUTLET);
                var root = new ActivatedRouteSnapshot([], Object.freeze({}), Object.freeze(__assign({}, this.urlTree.queryParams)), this.urlTree.fragment, {}, PRIMARY_OUTLET, this.rootComponentType, null, this.urlTree.root, -1, {});
                var rootNode = new TreeNode(root, children);
                var routeState = new RouterStateSnapshot(this.url, rootNode);
                this.inheritParamsAndData(routeState._root);
                return rxjs.of(routeState);
            }
            catch (e) {
                return new rxjs.Observable(function (obs) { return obs.error(e); });
            }
        };
        Recognizer.prototype.inheritParamsAndData = function (routeNode) {
            var _this = this;
            var route = routeNode.value;
            var i = inheritedParamsDataResolve(route, this.paramsInheritanceStrategy);
            route.params = Object.freeze(i.params);
            route.data = Object.freeze(i.data);
            routeNode.children.forEach(function (n) { return _this.inheritParamsAndData(n); });
        };
        Recognizer.prototype.processSegmentGroup = function (config, segmentGroup, outlet) {
            if (segmentGroup.segments.length === 0 && segmentGroup.hasChildren()) {
                return this.processChildren(config, segmentGroup);
            }
            return this.processSegment(config, segmentGroup, segmentGroup.segments, outlet);
        };
        Recognizer.prototype.processChildren = function (config, segmentGroup) {
            var _this = this;
            var children = mapChildrenIntoArray(segmentGroup, function (child, childOutlet) { return _this.processSegmentGroup(config, child, childOutlet); });
            checkOutletNameUniqueness(children);
            sortActivatedRouteSnapshots(children);
            return children;
        };
        Recognizer.prototype.processSegment = function (config, segmentGroup, segments, outlet) {
            var e_1, _a;
            try {
                for (var config_1 = __values(config), config_1_1 = config_1.next(); !config_1_1.done; config_1_1 = config_1.next()) {
                    var r = config_1_1.value;
                    try {
                        return this.processSegmentAgainstRoute(r, segmentGroup, segments, outlet);
                    }
                    catch (e) {
                        if (!(e instanceof NoMatch$1))
                            throw e;
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (config_1_1 && !config_1_1.done && (_a = config_1.return)) _a.call(config_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
            if (this.noLeftoversInUrl(segmentGroup, segments, outlet)) {
                return [];
            }
            throw new NoMatch$1();
        };
        Recognizer.prototype.noLeftoversInUrl = function (segmentGroup, segments, outlet) {
            return segments.length === 0 && !segmentGroup.children[outlet];
        };
        Recognizer.prototype.processSegmentAgainstRoute = function (route, rawSegment, segments, outlet) {
            if (route.redirectTo)
                throw new NoMatch$1();
            if ((route.outlet || PRIMARY_OUTLET) !== outlet)
                throw new NoMatch$1();
            var snapshot;
            var consumedSegments = [];
            var rawSlicedSegments = [];
            if (route.path === '**') {
                var params = segments.length > 0 ? last$1(segments).parameters : {};
                snapshot = new ActivatedRouteSnapshot(segments, params, Object.freeze(__assign({}, this.urlTree.queryParams)), this.urlTree.fragment, getData(route), outlet, route.component, route, getSourceSegmentGroup(rawSegment), getPathIndexShift(rawSegment) + segments.length, getResolve(route));
            }
            else {
                var result = match$1(rawSegment, route, segments);
                consumedSegments = result.consumedSegments;
                rawSlicedSegments = segments.slice(result.lastChild);
                snapshot = new ActivatedRouteSnapshot(consumedSegments, result.parameters, Object.freeze(__assign({}, this.urlTree.queryParams)), this.urlTree.fragment, getData(route), outlet, route.component, route, getSourceSegmentGroup(rawSegment), getPathIndexShift(rawSegment) + consumedSegments.length, getResolve(route));
            }
            var childConfig = getChildConfig(route);
            var _a = split$1(rawSegment, consumedSegments, rawSlicedSegments, childConfig, this.relativeLinkResolution), segmentGroup = _a.segmentGroup, slicedSegments = _a.slicedSegments;
            if (slicedSegments.length === 0 && segmentGroup.hasChildren()) {
                var children_1 = this.processChildren(childConfig, segmentGroup);
                return [new TreeNode(snapshot, children_1)];
            }
            if (childConfig.length === 0 && slicedSegments.length === 0) {
                return [new TreeNode(snapshot, [])];
            }
            var children = this.processSegment(childConfig, segmentGroup, slicedSegments, PRIMARY_OUTLET);
            return [new TreeNode(snapshot, children)];
        };
        return Recognizer;
    }());
    function sortActivatedRouteSnapshots(nodes) {
        nodes.sort(function (a, b) {
            if (a.value.outlet === PRIMARY_OUTLET)
                return -1;
            if (b.value.outlet === PRIMARY_OUTLET)
                return 1;
            return a.value.outlet.localeCompare(b.value.outlet);
        });
    }
    function getChildConfig(route) {
        if (route.children) {
            return route.children;
        }
        if (route.loadChildren) {
            return route._loadedConfig.routes;
        }
        return [];
    }
    function match$1(segmentGroup, route, segments) {
        if (route.path === '') {
            if (route.pathMatch === 'full' && (segmentGroup.hasChildren() || segments.length > 0)) {
                throw new NoMatch$1();
            }
            return { consumedSegments: [], lastChild: 0, parameters: {} };
        }
        var matcher = route.matcher || defaultUrlMatcher;
        var res = matcher(segments, segmentGroup, route);
        if (!res)
            throw new NoMatch$1();
        var posParams = {};
        forEach(res.posParams, function (v, k) { posParams[k] = v.path; });
        var parameters = res.consumed.length > 0 ? __assign({}, posParams, res.consumed[res.consumed.length - 1].parameters) :
            posParams;
        return { consumedSegments: res.consumed, lastChild: res.consumed.length, parameters: parameters };
    }
    function checkOutletNameUniqueness(nodes) {
        var names = {};
        nodes.forEach(function (n) {
            var routeWithSameOutletName = names[n.value.outlet];
            if (routeWithSameOutletName) {
                var p = routeWithSameOutletName.url.map(function (s) { return s.toString(); }).join('/');
                var c = n.value.url.map(function (s) { return s.toString(); }).join('/');
                throw new Error("Two segments cannot have the same outlet name: '" + p + "' and '" + c + "'.");
            }
            names[n.value.outlet] = n.value;
        });
    }
    function getSourceSegmentGroup(segmentGroup) {
        var s = segmentGroup;
        while (s._sourceSegment) {
            s = s._sourceSegment;
        }
        return s;
    }
    function getPathIndexShift(segmentGroup) {
        var s = segmentGroup;
        var res = (s._segmentIndexShift ? s._segmentIndexShift : 0);
        while (s._sourceSegment) {
            s = s._sourceSegment;
            res += (s._segmentIndexShift ? s._segmentIndexShift : 0);
        }
        return res - 1;
    }
    function split$1(segmentGroup, consumedSegments, slicedSegments, config, relativeLinkResolution) {
        if (slicedSegments.length > 0 &&
            containsEmptyPathMatchesWithNamedOutlets(segmentGroup, slicedSegments, config)) {
            var s_1 = new UrlSegmentGroup(consumedSegments, createChildrenForEmptyPaths(segmentGroup, consumedSegments, config, new UrlSegmentGroup(slicedSegments, segmentGroup.children)));
            s_1._sourceSegment = segmentGroup;
            s_1._segmentIndexShift = consumedSegments.length;
            return { segmentGroup: s_1, slicedSegments: [] };
        }
        if (slicedSegments.length === 0 &&
            containsEmptyPathMatches(segmentGroup, slicedSegments, config)) {
            var s_2 = new UrlSegmentGroup(segmentGroup.segments, addEmptyPathsToChildrenIfNeeded(segmentGroup, consumedSegments, slicedSegments, config, segmentGroup.children, relativeLinkResolution));
            s_2._sourceSegment = segmentGroup;
            s_2._segmentIndexShift = consumedSegments.length;
            return { segmentGroup: s_2, slicedSegments: slicedSegments };
        }
        var s = new UrlSegmentGroup(segmentGroup.segments, segmentGroup.children);
        s._sourceSegment = segmentGroup;
        s._segmentIndexShift = consumedSegments.length;
        return { segmentGroup: s, slicedSegments: slicedSegments };
    }
    function addEmptyPathsToChildrenIfNeeded(segmentGroup, consumedSegments, slicedSegments, routes, children, relativeLinkResolution) {
        var e_2, _a;
        var res = {};
        try {
            for (var routes_1 = __values(routes), routes_1_1 = routes_1.next(); !routes_1_1.done; routes_1_1 = routes_1.next()) {
                var r = routes_1_1.value;
                if (emptyPathMatch(segmentGroup, slicedSegments, r) && !children[getOutlet$1(r)]) {
                    var s = new UrlSegmentGroup([], {});
                    s._sourceSegment = segmentGroup;
                    if (relativeLinkResolution === 'legacy') {
                        s._segmentIndexShift = segmentGroup.segments.length;
                    }
                    else {
                        s._segmentIndexShift = consumedSegments.length;
                    }
                    res[getOutlet$1(r)] = s;
                }
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (routes_1_1 && !routes_1_1.done && (_a = routes_1.return)) _a.call(routes_1);
            }
            finally { if (e_2) throw e_2.error; }
        }
        return __assign({}, children, res);
    }
    function createChildrenForEmptyPaths(segmentGroup, consumedSegments, routes, primarySegment) {
        var e_3, _a;
        var res = {};
        res[PRIMARY_OUTLET] = primarySegment;
        primarySegment._sourceSegment = segmentGroup;
        primarySegment._segmentIndexShift = consumedSegments.length;
        try {
            for (var routes_2 = __values(routes), routes_2_1 = routes_2.next(); !routes_2_1.done; routes_2_1 = routes_2.next()) {
                var r = routes_2_1.value;
                if (r.path === '' && getOutlet$1(r) !== PRIMARY_OUTLET) {
                    var s = new UrlSegmentGroup([], {});
                    s._sourceSegment = segmentGroup;
                    s._segmentIndexShift = consumedSegments.length;
                    res[getOutlet$1(r)] = s;
                }
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (routes_2_1 && !routes_2_1.done && (_a = routes_2.return)) _a.call(routes_2);
            }
            finally { if (e_3) throw e_3.error; }
        }
        return res;
    }
    function containsEmptyPathMatchesWithNamedOutlets(segmentGroup, slicedSegments, routes) {
        return routes.some(function (r) { return emptyPathMatch(segmentGroup, slicedSegments, r) && getOutlet$1(r) !== PRIMARY_OUTLET; });
    }
    function containsEmptyPathMatches(segmentGroup, slicedSegments, routes) {
        return routes.some(function (r) { return emptyPathMatch(segmentGroup, slicedSegments, r); });
    }
    function emptyPathMatch(segmentGroup, slicedSegments, r) {
        if ((segmentGroup.hasChildren() || slicedSegments.length > 0) && r.pathMatch === 'full') {
            return false;
        }
        return r.path === '' && r.redirectTo === undefined;
    }
    function getOutlet$1(route) {
        return route.outlet || PRIMARY_OUTLET;
    }
    function getData(route) {
        return route.data || {};
    }
    function getResolve(route) {
        return route.resolve || {};
    }

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    function recognize$1(rootComponentType, config, serializer, paramsInheritanceStrategy, relativeLinkResolution) {
        return function (source) {
            return source.pipe(operators.mergeMap(function (t) { return recognize(rootComponentType, config, t.urlAfterRedirects, serializer(t.urlAfterRedirects), paramsInheritanceStrategy, relativeLinkResolution)
                .pipe(operators.map(function (targetSnapshot) { return (__assign({}, t, { targetSnapshot: targetSnapshot })); })); }));
        };
    }

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    function resolveData(paramsInheritanceStrategy, moduleInjector) {
        return function (source) {
            return source.pipe(operators.mergeMap(function (t) {
                var targetSnapshot = t.targetSnapshot, canActivateChecks = t.guards.canActivateChecks;
                if (!canActivateChecks.length) {
                    return rxjs.of(t);
                }
                return rxjs.from(canActivateChecks)
                    .pipe(operators.concatMap(function (check) { return runResolve(check.route, targetSnapshot, paramsInheritanceStrategy, moduleInjector); }), operators.reduce(function (_, __) { return _; }), operators.map(function (_) { return t; }));
            }));
        };
    }
    function runResolve(futureARS, futureRSS, paramsInheritanceStrategy, moduleInjector) {
        var resolve = futureARS._resolve;
        return resolveNode(resolve, futureARS, futureRSS, moduleInjector)
            .pipe(operators.map(function (resolvedData) {
            futureARS._resolvedData = resolvedData;
            futureARS.data = __assign({}, futureARS.data, inheritedParamsDataResolve(futureARS, paramsInheritanceStrategy).resolve);
            return null;
        }));
    }
    function resolveNode(resolve, futureARS, futureRSS, moduleInjector) {
        var keys = Object.keys(resolve);
        if (keys.length === 0) {
            return rxjs.of({});
        }
        if (keys.length === 1) {
            var key_1 = keys[0];
            return getResolver(resolve[key_1], futureARS, futureRSS, moduleInjector)
                .pipe(operators.map(function (value) {
                var _a;
                return _a = {}, _a[key_1] = value, _a;
            }));
        }
        var data = {};
        var runningResolvers$ = rxjs.from(keys).pipe(operators.mergeMap(function (key) {
            return getResolver(resolve[key], futureARS, futureRSS, moduleInjector)
                .pipe(operators.map(function (value) {
                data[key] = value;
                return value;
            }));
        }));
        return runningResolvers$.pipe(operators.last(), operators.map(function () { return data; }));
    }
    function getResolver(injectionToken, futureARS, futureRSS, moduleInjector) {
        var resolver = getToken(injectionToken, futureARS, moduleInjector);
        return resolver.resolve ? wrapIntoObservable(resolver.resolve(futureARS, futureRSS)) :
            wrapIntoObservable(resolver(futureARS, futureRSS));
    }

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    /**
     * Perform a side effect through a switchMap for every emission on the source Observable,
     * but return an Observable that is identical to the source. It's essentially the same as
     * the `tap` operator, but if the side effectful `next` function returns an ObservableInput,
     * it will wait before continuing with the original value.
     */
    function switchTap(next) {
        return function (source) {
            return source.pipe(operators.switchMap(function (v) {
                var nextResult = next(v);
                if (nextResult) {
                    return rxjs.from(nextResult).pipe(operators.map(function () { return v; }));
                }
                return rxjs.from([v]);
            }));
        };
    }

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    /**
     * @description
     *
     * Provides a way to customize when activated routes get reused.
     *
     * @publicApi
     */
    var RouteReuseStrategy = /** @class */ (function () {
        function RouteReuseStrategy() {
        }
        return RouteReuseStrategy;
    }());
    /**
     * Does not detach any subtrees. Reuses routes as long as their route config is the same.
     */
    var DefaultRouteReuseStrategy = /** @class */ (function () {
        function DefaultRouteReuseStrategy() {
        }
        DefaultRouteReuseStrategy.prototype.shouldDetach = function (route) { return false; };
        DefaultRouteReuseStrategy.prototype.store = function (route, detachedTree) { };
        DefaultRouteReuseStrategy.prototype.shouldAttach = function (route) { return false; };
        DefaultRouteReuseStrategy.prototype.retrieve = function (route) { return null; };
        DefaultRouteReuseStrategy.prototype.shouldReuseRoute = function (future, curr) {
            return future.routeConfig === curr.routeConfig;
        };
        return DefaultRouteReuseStrategy;
    }());

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    /**
     * @docsNotRequired
     * @publicApi
     */
    var ROUTES = new core.InjectionToken('ROUTES');
    var RouterConfigLoader = /** @class */ (function () {
        function RouterConfigLoader(loader, compiler, onLoadStartListener, onLoadEndListener) {
            this.loader = loader;
            this.compiler = compiler;
            this.onLoadStartListener = onLoadStartListener;
            this.onLoadEndListener = onLoadEndListener;
        }
        RouterConfigLoader.prototype.load = function (parentInjector, route) {
            var _this = this;
            if (this.onLoadStartListener) {
                this.onLoadStartListener(route);
            }
            var moduleFactory$ = this.loadModuleFactory(route.loadChildren);
            return moduleFactory$.pipe(operators.map(function (factory) {
                if (_this.onLoadEndListener) {
                    _this.onLoadEndListener(route);
                }
                var module = factory.create(parentInjector);
                return new LoadedRouterConfig(flatten(module.injector.get(ROUTES)).map(standardizeConfig), module);
            }));
        };
        RouterConfigLoader.prototype.loadModuleFactory = function (loadChildren) {
            var _this = this;
            if (typeof loadChildren === 'string') {
                return rxjs.from(this.loader.load(loadChildren));
            }
            else {
                return wrapIntoObservable(loadChildren()).pipe(operators.mergeMap(function (t) {
                    if (t instanceof core.NgModuleFactory) {
                        return rxjs.of(t);
                    }
                    else {
                        return rxjs.from(_this.compiler.compileModuleAsync(t));
                    }
                }));
            }
        };
        return RouterConfigLoader;
    }());

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    /**
     * @description
     *
     * Provides a way to migrate AngularJS applications to Angular.
     *
     * @publicApi
     */
    var UrlHandlingStrategy = /** @class */ (function () {
        function UrlHandlingStrategy() {
        }
        return UrlHandlingStrategy;
    }());
    /**
     * @publicApi
     */
    var DefaultUrlHandlingStrategy = /** @class */ (function () {
        function DefaultUrlHandlingStrategy() {
        }
        DefaultUrlHandlingStrategy.prototype.shouldProcessUrl = function (url) { return true; };
        DefaultUrlHandlingStrategy.prototype.extract = function (url) { return url; };
        DefaultUrlHandlingStrategy.prototype.merge = function (newUrlPart, wholeUrl) { return newUrlPart; };
        return DefaultUrlHandlingStrategy;
    }());

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    function defaultErrorHandler(error) {
        throw error;
    }
    function defaultMalformedUriErrorHandler(error, urlSerializer, url) {
        return urlSerializer.parse('/');
    }
    /**
     * @internal
     */
    function defaultRouterHook(snapshot, runExtras) {
        return rxjs.of(null);
    }
    /**
     * @description
     *
     * An NgModule that provides navigation and URL manipulation capabilities.
     *
     * @see `Route`.
     * @see [Routing and Navigation Guide](guide/router).
     *
     * @ngModule RouterModule
     *
     * @publicApi
     */
    var Router = /** @class */ (function () {
        /**
         * Creates the router service.
         */
        // TODO: vsavkin make internal after the final is out.
        function Router(rootComponentType, urlSerializer, rootContexts, location, injector, loader, compiler, config) {
            var _this = this;
            this.rootComponentType = rootComponentType;
            this.urlSerializer = urlSerializer;
            this.rootContexts = rootContexts;
            this.location = location;
            this.config = config;
            this.lastSuccessfulNavigation = null;
            this.currentNavigation = null;
            this.navigationId = 0;
            this.isNgZoneEnabled = false;
            /**
             * An event stream for routing events in this NgModule.
             */
            this.events = new rxjs.Subject();
            /**
             * A handler for navigation errors in this NgModule.
             */
            this.errorHandler = defaultErrorHandler;
            /**
             * Malformed uri error handler is invoked when `Router.parseUrl(url)` throws an
             * error due to containing an invalid character. The most common case would be a `%` sign
             * that's not encoded and is not part of a percent encoded sequence.
             */
            this.malformedUriErrorHandler = defaultMalformedUriErrorHandler;
            /**
             * True if at least one navigation event has occurred,
             * false otherwise.
             */
            this.navigated = false;
            this.lastSuccessfulId = -1;
            /**
             * Hooks that enable you to pause navigation,
             * either before or after the preactivation phase.
             * Used by `RouterModule`.
             *
             * @internal
             */
            this.hooks = {
                beforePreactivation: defaultRouterHook,
                afterPreactivation: defaultRouterHook
            };
            /**
             * Extracts and merges URLs. Used for AngularJS to Angular migrations.
             */
            this.urlHandlingStrategy = new DefaultUrlHandlingStrategy();
            /**
             * The strategy for re-using routes.
             */
            this.routeReuseStrategy = new DefaultRouteReuseStrategy();
            /**
             * How to handle a navigation request to the current URL. One of:
             * - `'ignore'` :  The router ignores the request.
             * - `'reload'` : The router reloads the URL. Use to implement a "refresh" feature.
             */
            this.onSameUrlNavigation = 'ignore';
            /**
             * How to merge parameters, data, and resolved data from parent to child
             * routes. One of:
             *
             * - `'emptyOnly'` : Inherit parent parameters, data, and resolved data
             * for path-less or component-less routes.
             * - `'always'` : Inherit parent parameters, data, and resolved data
             * for all child routes.
             */
            this.paramsInheritanceStrategy = 'emptyOnly';
            /**
             * Defines when the router updates the browser URL. The default behavior is to update after
             * successful navigation. However, some applications may prefer a mode where the URL gets
             * updated at the beginning of navigation. The most common use case would be updating the
             * URL early so if navigation fails, you can show an error message with the URL that failed.
             * Available options are:
             *
             * - `'deferred'`, the default, updates the browser URL after navigation has finished.
             * - `'eager'`, updates browser URL at the beginning of navigation.
             */
            this.urlUpdateStrategy = 'deferred';
            /**
             * See {@link RouterModule} for more information.
             */
            this.relativeLinkResolution = 'legacy';
            var onLoadStart = function (r) { return _this.triggerEvent(new RouteConfigLoadStart(r)); };
            var onLoadEnd = function (r) { return _this.triggerEvent(new RouteConfigLoadEnd(r)); };
            this.ngModule = injector.get(core.NgModuleRef);
            this.console = injector.get(core["ɵConsole"]);
            var ngZone = injector.get(core.NgZone);
            this.isNgZoneEnabled = ngZone instanceof core.NgZone;
            this.resetConfig(config);
            this.currentUrlTree = createEmptyUrlTree();
            this.rawUrlTree = this.currentUrlTree;
            this.browserUrlTree = this.currentUrlTree;
            this.configLoader = new RouterConfigLoader(loader, compiler, onLoadStart, onLoadEnd);
            this.routerState = createEmptyState(this.currentUrlTree, this.rootComponentType);
            this.transitions = new rxjs.BehaviorSubject({
                id: 0,
                currentUrlTree: this.currentUrlTree,
                currentRawUrl: this.currentUrlTree,
                extractedUrl: this.urlHandlingStrategy.extract(this.currentUrlTree),
                urlAfterRedirects: this.urlHandlingStrategy.extract(this.currentUrlTree),
                rawUrl: this.currentUrlTree,
                extras: {},
                resolve: null,
                reject: null,
                promise: Promise.resolve(true),
                source: 'imperative',
                restoredState: null,
                currentSnapshot: this.routerState.snapshot,
                targetSnapshot: null,
                currentRouterState: this.routerState,
                targetRouterState: null,
                guards: { canActivateChecks: [], canDeactivateChecks: [] },
                guardsResult: null,
            });
            this.navigations = this.setupNavigations(this.transitions);
            this.processNavigations();
        }
        Router.prototype.setupNavigations = function (transitions) {
            var _this = this;
            var eventsSubject = this.events;
            return transitions.pipe(operators.filter(function (t) { return t.id !== 0; }), 
            // Extract URL
            operators.map(function (t) { return (__assign({}, t, { extractedUrl: _this.urlHandlingStrategy.extract(t.rawUrl) })); }), 
            // Using switchMap so we cancel executing navigations when a new one comes in
            operators.switchMap(function (t) {
                var completed = false;
                var errored = false;
                return rxjs.of(t).pipe(
                // Store the Navigation object
                operators.tap(function (t) {
                    _this.currentNavigation = {
                        id: t.id,
                        initialUrl: t.currentRawUrl,
                        extractedUrl: t.extractedUrl,
                        trigger: t.source,
                        extras: t.extras,
                        previousNavigation: _this.lastSuccessfulNavigation ? __assign({}, _this.lastSuccessfulNavigation, { previousNavigation: null }) :
                            null
                    };
                }), operators.switchMap(function (t) {
                    var urlTransition = !_this.navigated || t.extractedUrl.toString() !== _this.browserUrlTree.toString();
                    var processCurrentUrl = (_this.onSameUrlNavigation === 'reload' ? true : urlTransition) &&
                        _this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl);
                    if (processCurrentUrl) {
                        return rxjs.of(t).pipe(
                        // Fire NavigationStart event
                        operators.switchMap(function (t) {
                            var transition = _this.transitions.getValue();
                            eventsSubject.next(new NavigationStart(t.id, _this.serializeUrl(t.extractedUrl), t.source, t.restoredState));
                            if (transition !== _this.transitions.getValue()) {
                                return rxjs.EMPTY;
                            }
                            return [t];
                        }), 
                        // This delay is required to match old behavior that forced navigation to
                        // always be async
                        operators.switchMap(function (t) { return Promise.resolve(t); }), 
                        // ApplyRedirects
                        applyRedirects$1(_this.ngModule.injector, _this.configLoader, _this.urlSerializer, _this.config), 
                        // Update the currentNavigation
                        operators.tap(function (t) {
                            _this.currentNavigation = __assign({}, _this.currentNavigation, { finalUrl: t.urlAfterRedirects });
                        }), 
                        // Recognize
                        recognize$1(_this.rootComponentType, _this.config, function (url) { return _this.serializeUrl(url); }, _this.paramsInheritanceStrategy, _this.relativeLinkResolution), 
                        // Update URL if in `eager` update mode
                        operators.tap(function (t) {
                            if (_this.urlUpdateStrategy === 'eager') {
                                if (!t.extras.skipLocationChange) {
                                    _this.setBrowserUrl(t.urlAfterRedirects, !!t.extras.replaceUrl, t.id);
                                }
                                _this.browserUrlTree = t.urlAfterRedirects;
                            }
                        }), 
                        // Fire RoutesRecognized
                        operators.tap(function (t) {
                            var routesRecognized = new RoutesRecognized(t.id, _this.serializeUrl(t.extractedUrl), _this.serializeUrl(t.urlAfterRedirects), t.targetSnapshot);
                            eventsSubject.next(routesRecognized);
                        }));
                    }
                    else {
                        var processPreviousUrl = urlTransition && _this.rawUrlTree &&
                            _this.urlHandlingStrategy.shouldProcessUrl(_this.rawUrlTree);
                        /* When the current URL shouldn't be processed, but the previous one was, we
                         * handle this "error condition" by navigating to the previously successful URL,
                         * but leaving the URL intact.*/
                        if (processPreviousUrl) {
                            var id = t.id, extractedUrl = t.extractedUrl, source = t.source, restoredState = t.restoredState, extras = t.extras;
                            var navStart = new NavigationStart(id, _this.serializeUrl(extractedUrl), source, restoredState);
                            eventsSubject.next(navStart);
                            var targetSnapshot = createEmptyState(extractedUrl, _this.rootComponentType).snapshot;
                            return rxjs.of(__assign({}, t, { targetSnapshot: targetSnapshot, urlAfterRedirects: extractedUrl, extras: __assign({}, extras, { skipLocationChange: false, replaceUrl: false }) }));
                        }
                        else {
                            /* When neither the current or previous URL can be processed, do nothing other
                             * than update router's internal reference to the current "settled" URL. This
                             * way the next navigation will be coming from the current URL in the browser.
                             */
                            _this.rawUrlTree = t.rawUrl;
                            t.resolve(null);
                            return rxjs.EMPTY;
                        }
                    }
                }), 
                // Before Preactivation
                switchTap(function (t) {
                    var targetSnapshot = t.targetSnapshot, navigationId = t.id, appliedUrlTree = t.extractedUrl, rawUrlTree = t.rawUrl, _a = t.extras, skipLocationChange = _a.skipLocationChange, replaceUrl = _a.replaceUrl;
                    return _this.hooks.beforePreactivation(targetSnapshot, {
                        navigationId: navigationId,
                        appliedUrlTree: appliedUrlTree,
                        rawUrlTree: rawUrlTree,
                        skipLocationChange: !!skipLocationChange,
                        replaceUrl: !!replaceUrl,
                    });
                }), 
                // --- GUARDS ---
                operators.tap(function (t) {
                    var guardsStart = new GuardsCheckStart(t.id, _this.serializeUrl(t.extractedUrl), _this.serializeUrl(t.urlAfterRedirects), t.targetSnapshot);
                    _this.triggerEvent(guardsStart);
                }), operators.map(function (t) { return (__assign({}, t, { guards: getAllRouteGuards(t.targetSnapshot, t.currentSnapshot, _this.rootContexts) })); }), checkGuards(_this.ngModule.injector, function (evt) { return _this.triggerEvent(evt); }), operators.tap(function (t) {
                    if (isUrlTree(t.guardsResult)) {
                        var error = navigationCancelingError("Redirecting to \"" + _this.serializeUrl(t.guardsResult) + "\"");
                        error.url = t.guardsResult;
                        throw error;
                    }
                }), operators.tap(function (t) {
                    var guardsEnd = new GuardsCheckEnd(t.id, _this.serializeUrl(t.extractedUrl), _this.serializeUrl(t.urlAfterRedirects), t.targetSnapshot, !!t.guardsResult);
                    _this.triggerEvent(guardsEnd);
                }), operators.filter(function (t) {
                    if (!t.guardsResult) {
                        _this.resetUrlToCurrentUrlTree();
                        var navCancel = new NavigationCancel(t.id, _this.serializeUrl(t.extractedUrl), '');
                        eventsSubject.next(navCancel);
                        t.resolve(false);
                        return false;
                    }
                    return true;
                }), 
                // --- RESOLVE ---
                switchTap(function (t) {
                    if (t.guards.canActivateChecks.length) {
                        return rxjs.of(t).pipe(operators.tap(function (t) {
                            var resolveStart = new ResolveStart(t.id, _this.serializeUrl(t.extractedUrl), _this.serializeUrl(t.urlAfterRedirects), t.targetSnapshot);
                            _this.triggerEvent(resolveStart);
                        }), resolveData(_this.paramsInheritanceStrategy, _this.ngModule.injector), //
                        operators.tap(function (t) {
                            var resolveEnd = new ResolveEnd(t.id, _this.serializeUrl(t.extractedUrl), _this.serializeUrl(t.urlAfterRedirects), t.targetSnapshot);
                            _this.triggerEvent(resolveEnd);
                        }));
                    }
                    return undefined;
                }), 
                // --- AFTER PREACTIVATION ---
                switchTap(function (t) {
                    var targetSnapshot = t.targetSnapshot, navigationId = t.id, appliedUrlTree = t.extractedUrl, rawUrlTree = t.rawUrl, _a = t.extras, skipLocationChange = _a.skipLocationChange, replaceUrl = _a.replaceUrl;
                    return _this.hooks.afterPreactivation(targetSnapshot, {
                        navigationId: navigationId,
                        appliedUrlTree: appliedUrlTree,
                        rawUrlTree: rawUrlTree,
                        skipLocationChange: !!skipLocationChange,
                        replaceUrl: !!replaceUrl,
                    });
                }), operators.map(function (t) {
                    var targetRouterState = createRouterState(_this.routeReuseStrategy, t.targetSnapshot, t.currentRouterState);
                    return (__assign({}, t, { targetRouterState: targetRouterState }));
                }), 
                /* Once here, we are about to activate syncronously. The assumption is this will
                   succeed, and user code may read from the Router service. Therefore before
                   activation, we need to update router properties storing the current URL and the
                   RouterState, as well as updated the browser URL. All this should happen *before*
                   activating. */
                operators.tap(function (t) {
                    _this.currentUrlTree = t.urlAfterRedirects;
                    _this.rawUrlTree = _this.urlHandlingStrategy.merge(_this.currentUrlTree, t.rawUrl);
                    _this.routerState = t.targetRouterState;
                    if (_this.urlUpdateStrategy === 'deferred') {
                        if (!t.extras.skipLocationChange) {
                            _this.setBrowserUrl(_this.rawUrlTree, !!t.extras.replaceUrl, t.id, t.extras.state);
                        }
                        _this.browserUrlTree = t.urlAfterRedirects;
                    }
                }), activateRoutes(_this.rootContexts, _this.routeReuseStrategy, function (evt) { return _this.triggerEvent(evt); }), operators.tap({ next: function () { completed = true; }, complete: function () { completed = true; } }), operators.finalize(function () {
                    /* When the navigation stream finishes either through error or success, we set the
                     * `completed` or `errored` flag. However, there are some situations where we could
                     * get here without either of those being set. For instance, a redirect during
                     * NavigationStart. Therefore, this is a catch-all to make sure the NavigationCancel
                     * event is fired when a navigation gets cancelled but not caught by other means. */
                    if (!completed && !errored) {
                        // Must reset to current URL tree here to ensure history.state is set. On a fresh
                        // page load, if a new navigation comes in before a successful navigation
                        // completes, there will be nothing in history.state.navigationId. This can cause
                        // sync problems with AngularJS sync code which looks for a value here in order
                        // to determine whether or not to handle a given popstate event or to leave it
                        // to the Angualr router.
                        _this.resetUrlToCurrentUrlTree();
                        var navCancel = new NavigationCancel(t.id, _this.serializeUrl(t.extractedUrl), "Navigation ID " + t.id + " is not equal to the current navigation id " + _this.navigationId);
                        eventsSubject.next(navCancel);
                        t.resolve(false);
                    }
                    // currentNavigation should always be reset to null here. If navigation was
                    // successful, lastSuccessfulTransition will have already been set. Therefore we
                    // can safely set currentNavigation to null here.
                    _this.currentNavigation = null;
                }), operators.catchError(function (e) {
                    errored = true;
                    /* This error type is issued during Redirect, and is handled as a cancellation
                     * rather than an error. */
                    if (isNavigationCancelingError(e)) {
                        var redirecting = isUrlTree(e.url);
                        if (!redirecting) {
                            // Set property only if we're not redirecting. If we landed on a page and
                            // redirect to `/` route, the new navigation is going to see the `/` isn't
                            // a change from the default currentUrlTree and won't navigate. This is
                            // only applicable with initial navigation, so setting `navigated` only when
                            // not redirecting resolves this scenario.
                            _this.navigated = true;
                            _this.resetStateAndUrl(t.currentRouterState, t.currentUrlTree, t.rawUrl);
                        }
                        var navCancel = new NavigationCancel(t.id, _this.serializeUrl(t.extractedUrl), e.message);
                        eventsSubject.next(navCancel);
                        t.resolve(false);
                        if (redirecting) {
                            _this.navigateByUrl(e.url);
                        }
                        /* All other errors should reset to the router's internal URL reference to the
                         * pre-error state. */
                    }
                    else {
                        _this.resetStateAndUrl(t.currentRouterState, t.currentUrlTree, t.rawUrl);
                        var navError = new NavigationError(t.id, _this.serializeUrl(t.extractedUrl), e);
                        eventsSubject.next(navError);
                        try {
                            t.resolve(_this.errorHandler(e));
                        }
                        catch (ee) {
                            t.reject(ee);
                        }
                    }
                    return rxjs.EMPTY;
                }));
                // TODO(jasonaden): remove cast once g3 is on updated TypeScript
            }));
        };
        /**
         * @internal
         * TODO: this should be removed once the constructor of the router made internal
         */
        Router.prototype.resetRootComponentType = function (rootComponentType) {
            this.rootComponentType = rootComponentType;
            // TODO: vsavkin router 4.0 should make the root component set to null
            // this will simplify the lifecycle of the router.
            this.routerState.root.component = this.rootComponentType;
        };
        Router.prototype.getTransition = function () { return this.transitions.value; };
        Router.prototype.setTransition = function (t) {
            this.transitions.next(__assign({}, this.getTransition(), t));
        };
        /**
         * Sets up the location change listener and performs the initial navigation.
         */
        Router.prototype.initialNavigation = function () {
            this.setUpLocationChangeListener();
            if (this.navigationId === 0) {
                this.navigateByUrl(this.location.path(true), { replaceUrl: true });
            }
        };
        /**
         * Sets up the location change listener.
         */
        Router.prototype.setUpLocationChangeListener = function () {
            var _this = this;
            // Don't need to use Zone.wrap any more, because zone.js
            // already patch onPopState, so location change callback will
            // run into ngZone
            if (!this.locationSubscription) {
                this.locationSubscription = this.location.subscribe(function (change) {
                    var rawUrlTree = _this.parseUrl(change['url']);
                    var source = change['type'] === 'popstate' ? 'popstate' : 'hashchange';
                    // Navigations coming from Angular router have a navigationId state property. When this
                    // exists, restore the state.
                    var state = change.state && change.state.navigationId ? change.state : null;
                    setTimeout(function () { _this.scheduleNavigation(rawUrlTree, source, state, { replaceUrl: true }); }, 0);
                });
            }
        };
        Object.defineProperty(Router.prototype, "url", {
            /** The current URL. */
            get: function () { return this.serializeUrl(this.currentUrlTree); },
            enumerable: true,
            configurable: true
        });
        /** The current Navigation object if one exists */
        Router.prototype.getCurrentNavigation = function () { return this.currentNavigation; };
        /** @internal */
        Router.prototype.triggerEvent = function (event) { this.events.next(event); };
        /**
         * Resets the configuration used for navigation and generating links.
         *
         * @param config The route array for the new configuration.
         *
         * @usageNotes
         *
         * ```
         * router.resetConfig([
         *  { path: 'team/:id', component: TeamCmp, children: [
         *    { path: 'simple', component: SimpleCmp },
         *    { path: 'user/:name', component: UserCmp }
         *  ]}
         * ]);
         * ```
         */
        Router.prototype.resetConfig = function (config) {
            validateConfig(config);
            this.config = config.map(standardizeConfig);
            this.navigated = false;
            this.lastSuccessfulId = -1;
        };
        /** @docsNotRequired */
        Router.prototype.ngOnDestroy = function () { this.dispose(); };
        /** Disposes of the router. */
        Router.prototype.dispose = function () {
            if (this.locationSubscription) {
                this.locationSubscription.unsubscribe();
                this.locationSubscription = null;
            }
        };
        /**
         * Applies an array of commands to the current URL tree and creates a new URL tree.
         *
         * When given an activate route, applies the given commands starting from the route.
         * When not given a route, applies the given command starting from the root.
         *
         * @param commands An array of commands to apply.
         * @param navigationExtras
         * @returns The new URL tree.
         *
         * @usageNotes
         *
         * ```
         * // create /team/33/user/11
         * router.createUrlTree(['/team', 33, 'user', 11]);
         *
         * // create /team/33;expand=true/user/11
         * router.createUrlTree(['/team', 33, {expand: true}, 'user', 11]);
         *
         * // you can collapse static segments like this (this works only with the first passed-in value):
         * router.createUrlTree(['/team/33/user', userId]);
         *
         * // If the first segment can contain slashes, and you do not want the router to split it, you
         * // can do the following:
         *
         * router.createUrlTree([{segmentPath: '/one/two'}]);
         *
         * // create /team/33/(user/11//right:chat)
         * router.createUrlTree(['/team', 33, {outlets: {primary: 'user/11', right: 'chat'}}]);
         *
         * // remove the right secondary node
         * router.createUrlTree(['/team', 33, {outlets: {primary: 'user/11', right: null}}]);
         *
         * // assuming the current url is `/team/33/user/11` and the route points to `user/11`
         *
         * // navigate to /team/33/user/11/details
         * router.createUrlTree(['details'], {relativeTo: route});
         *
         * // navigate to /team/33/user/22
         * router.createUrlTree(['../22'], {relativeTo: route});
         *
         * // navigate to /team/44/user/22
         * router.createUrlTree(['../../team/44/user/22'], {relativeTo: route});
         * ```
         */
        Router.prototype.createUrlTree = function (commands, navigationExtras) {
            if (navigationExtras === void 0) { navigationExtras = {}; }
            var relativeTo = navigationExtras.relativeTo, queryParams = navigationExtras.queryParams, fragment = navigationExtras.fragment, preserveQueryParams = navigationExtras.preserveQueryParams, queryParamsHandling = navigationExtras.queryParamsHandling, preserveFragment = navigationExtras.preserveFragment;
            if (core.isDevMode() && preserveQueryParams && console && console.warn) {
                console.warn('preserveQueryParams is deprecated, use queryParamsHandling instead.');
            }
            var a = relativeTo || this.routerState.root;
            var f = preserveFragment ? this.currentUrlTree.fragment : fragment;
            var q = null;
            if (queryParamsHandling) {
                switch (queryParamsHandling) {
                    case 'merge':
                        q = __assign({}, this.currentUrlTree.queryParams, queryParams);
                        break;
                    case 'preserve':
                        q = this.currentUrlTree.queryParams;
                        break;
                    default:
                        q = queryParams || null;
                }
            }
            else {
                q = preserveQueryParams ? this.currentUrlTree.queryParams : queryParams || null;
            }
            if (q !== null) {
                q = this.removeEmptyProps(q);
            }
            return createUrlTree(a, this.currentUrlTree, commands, q, f);
        };
        /**
         * Navigate based on the provided URL, which must be absolute.
         *
         * @param url An absolute URL. The function does not apply any delta to the current URL.
         * @param extras An object containing properties that modify the navigation strategy.
         * The function ignores any properties in the `NavigationExtras` that would change the
         * provided URL.
         *
         * @returns A Promise that resolves to 'true' when navigation succeeds,
         * to 'false' when navigation fails, or is rejected on error.
         *
         * @usageNotes
         *
         * ### Example
         *
         * ```
         * router.navigateByUrl("/team/33/user/11");
         *
         * // Navigate without updating the URL
         * router.navigateByUrl("/team/33/user/11", { skipLocationChange: true });
         * ```
         *
         */
        Router.prototype.navigateByUrl = function (url, extras) {
            if (extras === void 0) { extras = { skipLocationChange: false }; }
            if (core.isDevMode() && this.isNgZoneEnabled && !core.NgZone.isInAngularZone()) {
                this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");
            }
            var urlTree = isUrlTree(url) ? url : this.parseUrl(url);
            var mergedTree = this.urlHandlingStrategy.merge(urlTree, this.rawUrlTree);
            return this.scheduleNavigation(mergedTree, 'imperative', null, extras);
        };
        /**
         * Navigate based on the provided array of commands and a starting point.
         * If no starting route is provided, the navigation is absolute.
         *
         * Returns a promise that:
         * - resolves to 'true' when navigation succeeds,
         * - resolves to 'false' when navigation fails,
         * - is rejected when an error happens.
         *
         * @usageNotes
         *
         * ### Example
         *
         * ```
         * router.navigate(['team', 33, 'user', 11], {relativeTo: route});
         *
         * // Navigate without updating the URL
         * router.navigate(['team', 33, 'user', 11], {relativeTo: route, skipLocationChange: true});
         * ```
         *
         * The first parameter of `navigate()` is a delta to be applied to the current URL
         * or the one provided in the `relativeTo` property of the second parameter (the
         * `NavigationExtras`).
         *
         * In order to affect this browser's `history.state` entry, the `state`
         * parameter can be passed. This must be an object because the router
         * will add the `navigationId` property to this object before creating
         * the new history item.
         */
        Router.prototype.navigate = function (commands, extras) {
            if (extras === void 0) { extras = { skipLocationChange: false }; }
            validateCommands(commands);
            return this.navigateByUrl(this.createUrlTree(commands, extras), extras);
        };
        /** Serializes a `UrlTree` into a string */
        Router.prototype.serializeUrl = function (url) { return this.urlSerializer.serialize(url); };
        /** Parses a string into a `UrlTree` */
        Router.prototype.parseUrl = function (url) {
            var urlTree;
            try {
                urlTree = this.urlSerializer.parse(url);
            }
            catch (e) {
                urlTree = this.malformedUriErrorHandler(e, this.urlSerializer, url);
            }
            return urlTree;
        };
        /** Returns whether the url is activated */
        Router.prototype.isActive = function (url, exact) {
            if (isUrlTree(url)) {
                return containsTree(this.currentUrlTree, url, exact);
            }
            var urlTree = this.parseUrl(url);
            return containsTree(this.currentUrlTree, urlTree, exact);
        };
        Router.prototype.removeEmptyProps = function (params) {
            return Object.keys(params).reduce(function (result, key) {
                var value = params[key];
                if (value !== null && value !== undefined) {
                    result[key] = value;
                }
                return result;
            }, {});
        };
        Router.prototype.processNavigations = function () {
            var _this = this;
            this.navigations.subscribe(function (t) {
                _this.navigated = true;
                _this.lastSuccessfulId = t.id;
                _this.events
                    .next(new NavigationEnd(t.id, _this.serializeUrl(t.extractedUrl), _this.serializeUrl(_this.currentUrlTree)));
                _this.lastSuccessfulNavigation = _this.currentNavigation;
                _this.currentNavigation = null;
                t.resolve(true);
            }, function (e) { _this.console.warn("Unhandled Navigation Error: "); });
        };
        Router.prototype.scheduleNavigation = function (rawUrl, source, restoredState, extras) {
            var lastNavigation = this.getTransition();
            // If the user triggers a navigation imperatively (e.g., by using navigateByUrl),
            // and that navigation results in 'replaceState' that leads to the same URL,
            // we should skip those.
            if (lastNavigation && source !== 'imperative' && lastNavigation.source === 'imperative' &&
                lastNavigation.rawUrl.toString() === rawUrl.toString()) {
                return Promise.resolve(true); // return value is not used
            }
            // Because of a bug in IE and Edge, the location class fires two events (popstate and
            // hashchange) every single time. The second one should be ignored. Otherwise, the URL will
            // flicker. Handles the case when a popstate was emitted first.
            if (lastNavigation && source == 'hashchange' && lastNavigation.source === 'popstate' &&
                lastNavigation.rawUrl.toString() === rawUrl.toString()) {
                return Promise.resolve(true); // return value is not used
            }
            // Because of a bug in IE and Edge, the location class fires two events (popstate and
            // hashchange) every single time. The second one should be ignored. Otherwise, the URL will
            // flicker. Handles the case when a hashchange was emitted first.
            if (lastNavigation && source == 'popstate' && lastNavigation.source === 'hashchange' &&
                lastNavigation.rawUrl.toString() === rawUrl.toString()) {
                return Promise.resolve(true); // return value is not used
            }
            var resolve = null;
            var reject = null;
            var promise = new Promise(function (res, rej) {
                resolve = res;
                reject = rej;
            });
            var id = ++this.navigationId;
            this.setTransition({
                id: id,
                source: source,
                restoredState: restoredState,
                currentUrlTree: this.currentUrlTree,
                currentRawUrl: this.rawUrlTree, rawUrl: rawUrl, extras: extras, resolve: resolve, reject: reject, promise: promise,
                currentSnapshot: this.routerState.snapshot,
                currentRouterState: this.routerState
            });
            // Make sure that the error is propagated even though `processNavigations` catch
            // handler does not rethrow
            return promise.catch(function (e) { return Promise.reject(e); });
        };
        Router.prototype.setBrowserUrl = function (url, replaceUrl, id, state) {
            var path = this.urlSerializer.serialize(url);
            state = state || {};
            if (this.location.isCurrentPathEqualTo(path) || replaceUrl) {
                // TODO(jasonaden): Remove first `navigationId` and rely on `ng` namespace.
                this.location.replaceState(path, '', __assign({}, state, { navigationId: id }));
            }
            else {
                this.location.go(path, '', __assign({}, state, { navigationId: id }));
            }
        };
        Router.prototype.resetStateAndUrl = function (storedState, storedUrl, rawUrl) {
            this.routerState = storedState;
            this.currentUrlTree = storedUrl;
            this.rawUrlTree = this.urlHandlingStrategy.merge(this.currentUrlTree, rawUrl);
            this.resetUrlToCurrentUrlTree();
        };
        Router.prototype.resetUrlToCurrentUrlTree = function () {
            this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree), '', { navigationId: this.lastSuccessfulId });
        };
        return Router;
    }());
    function validateCommands(commands) {
        for (var i = 0; i < commands.length; i++) {
            var cmd = commands[i];
            if (cmd == null) {
                throw new Error("The requested path contains " + cmd + " segment at index " + i);
            }
        }
    }

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    /**
     * @description
     *
     * Lets you link to specific routes in your app.
     *
     * Consider the following route configuration:
     * `[{ path: 'user/:name', component: UserCmp }]`.
     * When linking to this `user/:name` route, you use the `RouterLink` directive.
     *
     * If the link is static, you can use the directive as follows:
     * `<a routerLink="/user/bob">link to user component</a>`
     *
     * If you use dynamic values to generate the link, you can pass an array of path
     * segments, followed by the params for each segment.
     *
     * For instance `['/team', teamId, 'user', userName, {details: true}]`
     * means that we want to generate a link to `/team/11/user/bob;details=true`.
     *
     * Multiple static segments can be merged into one
     * (e.g., `['/team/11/user', userName, {details: true}]`).
     *
     * The first segment name can be prepended with `/`, `./`, or `../`:
     * * If the first segment begins with `/`, the router will look up the route from the root of the
     *   app.
     * * If the first segment begins with `./`, or doesn't begin with a slash, the router will
     *   instead look in the children of the current activated route.
     * * And if the first segment begins with `../`, the router will go up one level.
     *
     * You can set query params and fragment as follows:
     *
     * ```
     * <a [routerLink]="['/user/bob']" [queryParams]="{debug: true}" fragment="education">
     *   link to user component
     * </a>
     * ```
     * RouterLink will use these to generate this link: `/user/bob#education?debug=true`.
     *
     * (Deprecated in v4.0.0 use `queryParamsHandling` instead) You can also tell the
     * directive to preserve the current query params and fragment:
     *
     * ```
     * <a [routerLink]="['/user/bob']" preserveQueryParams preserveFragment>
     *   link to user component
     * </a>
     * ```
     *
     * You can tell the directive how to handle queryParams. Available options are:
     *  - `'merge'`: merge the queryParams into the current queryParams
     *  - `'preserve'`: preserve the current queryParams
     *  - default/`''`: use the queryParams only
     *
     * Same options for {@link NavigationExtras#queryParamsHandling
     * NavigationExtras#queryParamsHandling}.
     *
     * ```
     * <a [routerLink]="['/user/bob']" [queryParams]="{debug: true}" queryParamsHandling="merge">
     *   link to user component
     * </a>
     * ```
     *
     * You can provide a `state` value to be persisted to the browser's History.state
     * property (See https://developer.mozilla.org/en-US/docs/Web/API/History#Properties). It's
     * used as follows:
     *
     * ```
     * <a [routerLink]="['/user/bob']" [state]="{tracingId: 123}">
     *   link to user component
     * </a>
     * ```
     *
     * And later the value can be read from the router through `router.getCurrentNavigation`.
     * For example, to capture the `tracingId` above during the `NavigationStart` event:
     *
     * ```
     * // Get NavigationStart events
     * router.events.pipe(filter(e => e instanceof NavigationStart)).subscribe(e => {
     *   const navigation = router.getCurrentNavigation();
     *   tracingService.trace({id: navigation.extras.state.tracingId});
     * });
     * ```
     *
     * The router link directive always treats the provided input as a delta to the current url.
     *
     * For instance, if the current url is `/user/(box//aux:team)`.
     *
     * Then the following link `<a [routerLink]="['/user/jim']">Jim</a>` will generate the link
     * `/user/(jim//aux:team)`.
     *
     * See {@link Router#createUrlTree createUrlTree} for more information.
     *
     * @ngModule RouterModule
     *
     * @publicApi
     */
    var RouterLink = /** @class */ (function () {
        function RouterLink(router, route, tabIndex, renderer, el) {
            this.router = router;
            this.route = route;
            this.commands = [];
            if (tabIndex == null) {
                renderer.setAttribute(el.nativeElement, 'tabindex', '0');
            }
        }
        Object.defineProperty(RouterLink.prototype, "routerLink", {
            set: function (commands) {
                if (commands != null) {
                    this.commands = Array.isArray(commands) ? commands : [commands];
                }
                else {
                    this.commands = [];
                }
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(RouterLink.prototype, "preserveQueryParams", {
            /**
             * @deprecated 4.0.0 use `queryParamsHandling` instead.
             */
            set: function (value) {
                if (core.isDevMode() && console && console.warn) {
                    console.warn('preserveQueryParams is deprecated!, use queryParamsHandling instead.');
                }
                this.preserve = value;
            },
            enumerable: true,
            configurable: true
        });
        RouterLink.prototype.onClick = function () {
            var extras = {
                skipLocationChange: attrBoolValue(this.skipLocationChange),
                replaceUrl: attrBoolValue(this.replaceUrl),
            };
            this.router.navigateByUrl(this.urlTree, extras);
            return true;
        };
        Object.defineProperty(RouterLink.prototype, "urlTree", {
            get: function () {
                return this.router.createUrlTree(this.commands, {
                    relativeTo: this.route,
                    queryParams: this.queryParams,
                    fragment: this.fragment,
                    preserveQueryParams: attrBoolValue(this.preserve),
                    queryParamsHandling: this.queryParamsHandling,
                    preserveFragment: attrBoolValue(this.preserveFragment),
                });
            },
            enumerable: true,
            configurable: true
        });
        __decorate([
            core.Input(),
            __metadata("design:type", Object)
        ], RouterLink.prototype, "queryParams", void 0);
        __decorate([
            core.Input(),
            __metadata("design:type", String)
        ], RouterLink.prototype, "fragment", void 0);
        __decorate([
            core.Input(),
            __metadata("design:type", String)
        ], RouterLink.prototype, "queryParamsHandling", void 0);
        __decorate([
            core.Input(),
            __metadata("design:type", Boolean)
        ], RouterLink.prototype, "preserveFragment", void 0);
        __decorate([
            core.Input(),
            __metadata("design:type", Boolean)
        ], RouterLink.prototype, "skipLocationChange", void 0);
        __decorate([
            core.Input(),
            __metadata("design:type", Boolean)
        ], RouterLink.prototype, "replaceUrl", void 0);
        __decorate([
            core.Input(),
            __metadata("design:type", Object)
        ], RouterLink.prototype, "state", void 0);
        __decorate([
            core.Input(),
            __metadata("design:type", Object),
            __metadata("design:paramtypes", [Object])
        ], RouterLink.prototype, "routerLink", null);
        __decorate([
            core.Input(),
            __metadata("design:type", Boolean),
            __metadata("design:paramtypes", [Boolean])
        ], RouterLink.prototype, "preserveQueryParams", null);
        __decorate([
            core.HostListener('click'),
            __metadata("design:type", Function),
            __metadata("design:paramtypes", []),
            __metadata("design:returntype", Boolean)
        ], RouterLink.prototype, "onClick", null);
        RouterLink = __decorate([
            core.Directive({ selector: ':not(a):not(area)[routerLink]' }),
            __param(2, core.Attribute('tabindex')),
            __metadata("design:paramtypes", [Router, ActivatedRoute, String, core.Renderer2, core.ElementRef])
        ], RouterLink);
        return RouterLink;
    }());
    /**
     * @description
     *
     * Lets you link to specific routes in your app.
     *
     * See `RouterLink` for more information.
     *
     * @ngModule RouterModule
     *
     * @publicApi
     */
    var RouterLinkWithHref = /** @class */ (function () {
        function RouterLinkWithHref(router, route, locationStrategy) {
            var _this = this;
            this.router = router;
            this.route = route;
            this.locationStrategy = locationStrategy;
            this.commands = [];
            this.subscription = router.events.subscribe(function (s) {
                if (s instanceof NavigationEnd) {
                    _this.updateTargetUrlAndHref();
                }
            });
        }
        Object.defineProperty(RouterLinkWithHref.prototype, "routerLink", {
            set: function (commands) {
                if (commands != null) {
                    this.commands = Array.isArray(commands) ? commands : [commands];
                }
                else {
                    this.commands = [];
                }
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(RouterLinkWithHref.prototype, "preserveQueryParams", {
            set: function (value) {
                if (core.isDevMode() && console && console.warn) {
                    console.warn('preserveQueryParams is deprecated, use queryParamsHandling instead.');
                }
                this.preserve = value;
            },
            enumerable: true,
            configurable: true
        });
        RouterLinkWithHref.prototype.ngOnChanges = function (changes) { this.updateTargetUrlAndHref(); };
        RouterLinkWithHref.prototype.ngOnDestroy = function () { this.subscription.unsubscribe(); };
        RouterLinkWithHref.prototype.onClick = function (button, ctrlKey, metaKey, shiftKey) {
            if (button !== 0 || ctrlKey || metaKey || shiftKey) {
                return true;
            }
            if (typeof this.target === 'string' && this.target != '_self') {
                return true;
            }
            var extras = {
                skipLocationChange: attrBoolValue(this.skipLocationChange),
                replaceUrl: attrBoolValue(this.replaceUrl),
                state: this.state
            };
            this.router.navigateByUrl(this.urlTree, extras);
            return false;
        };
        RouterLinkWithHref.prototype.updateTargetUrlAndHref = function () {
            this.href = this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree));
        };
        Object.defineProperty(RouterLinkWithHref.prototype, "urlTree", {
            get: function () {
                return this.router.createUrlTree(this.commands, {
                    relativeTo: this.route,
                    queryParams: this.queryParams,
                    fragment: this.fragment,
                    preserveQueryParams: attrBoolValue(this.preserve),
                    queryParamsHandling: this.queryParamsHandling,
                    preserveFragment: attrBoolValue(this.preserveFragment),
                });
            },
            enumerable: true,
            configurable: true
        });
        __decorate([
            core.HostBinding('attr.target'), core.Input(),
            __metadata("design:type", String)
        ], RouterLinkWithHref.prototype, "target", void 0);
        __decorate([
            core.Input(),
            __metadata("design:type", Object)
        ], RouterLinkWithHref.prototype, "queryParams", void 0);
        __decorate([
            core.Input(),
            __metadata("design:type", String)
        ], RouterLinkWithHref.prototype, "fragment", void 0);
        __decorate([
            core.Input(),
            __metadata("design:type", String)
        ], RouterLinkWithHref.prototype, "queryParamsHandling", void 0);
        __decorate([
            core.Input(),
            __metadata("design:type", Boolean)
        ], RouterLinkWithHref.prototype, "preserveFragment", void 0);
        __decorate([
            core.Input(),
            __metadata("design:type", Boolean)
        ], RouterLinkWithHref.prototype, "skipLocationChange", void 0);
        __decorate([
            core.Input(),
            __metadata("design:type", Boolean)
        ], RouterLinkWithHref.prototype, "replaceUrl", void 0);
        __decorate([
            core.Input(),
            __metadata("design:type", Object)
        ], RouterLinkWithHref.prototype, "state", void 0);
        __decorate([
            core.HostBinding(),
            __metadata("design:type", String)
        ], RouterLinkWithHref.prototype, "href", void 0);
        __decorate([
            core.Input(),
            __metadata("design:type", Object),
            __metadata("design:paramtypes", [Object])
        ], RouterLinkWithHref.prototype, "routerLink", null);
        __decorate([
            core.Input(),
            __metadata("design:type", Boolean),
            __metadata("design:paramtypes", [Boolean])
        ], RouterLinkWithHref.prototype, "preserveQueryParams", null);
        __decorate([
            core.HostListener('click', ['$event.button', '$event.ctrlKey', '$event.metaKey', '$event.shiftKey']),
            __metadata("design:type", Function),
            __metadata("design:paramtypes", [Number, Boolean, Boolean, Boolean]),
            __metadata("design:returntype", Boolean)
        ], RouterLinkWithHref.prototype, "onClick", null);
        RouterLinkWithHref = __decorate([
            core.Directive({ selector: 'a[routerLink],area[routerLink]' }),
            __metadata("design:paramtypes", [Router, ActivatedRoute,
                common.LocationStrategy])
        ], RouterLinkWithHref);
        return RouterLinkWithHref;
    }());
    function attrBoolValue(s) {
        return s === '' || !!s;
    }

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    /**
     *
     * @description
     *
     * Lets you add a CSS class to an element when the link's route becomes active.
     *
     * This directive lets you add a CSS class to an element when the link's route
     * becomes active.
     *
     * Consider the following example:
     *
     * ```
     * <a routerLink="/user/bob" routerLinkActive="active-link">Bob</a>
     * ```
     *
     * When the url is either '/user' or '/user/bob', the active-link class will
     * be added to the `a` tag. If the url changes, the class will be removed.
     *
     * You can set more than one class, as follows:
     *
     * ```
     * <a routerLink="/user/bob" routerLinkActive="class1 class2">Bob</a>
     * <a routerLink="/user/bob" [routerLinkActive]="['class1', 'class2']">Bob</a>
     * ```
     *
     * You can configure RouterLinkActive by passing `exact: true`. This will add the classes
     * only when the url matches the link exactly.
     *
     * ```
     * <a routerLink="/user/bob" routerLinkActive="active-link" [routerLinkActiveOptions]="{exact:
     * true}">Bob</a>
     * ```
     *
     * You can assign the RouterLinkActive instance to a template variable and directly check
     * the `isActive` status.
     * ```
     * <a routerLink="/user/bob" routerLinkActive #rla="routerLinkActive">
     *   Bob {{ rla.isActive ? '(already open)' : ''}}
     * </a>
     * ```
     *
     * Finally, you can apply the RouterLinkActive directive to an ancestor of a RouterLink.
     *
     * ```
     * <div routerLinkActive="active-link" [routerLinkActiveOptions]="{exact: true}">
     *   <a routerLink="/user/jim">Jim</a>
     *   <a routerLink="/user/bob">Bob</a>
     * </div>
     * ```
     *
     * This will set the active-link class on the div tag if the url is either '/user/jim' or
     * '/user/bob'.
     *
     * @ngModule RouterModule
     *
     * @publicApi
     */
    var RouterLinkActive = /** @class */ (function () {
        function RouterLinkActive(router, element, renderer, cdr) {
            var _this = this;
            this.router = router;
            this.element = element;
            this.renderer = renderer;
            this.cdr = cdr;
            this.classes = [];
            this.isActive = false;
            this.routerLinkActiveOptions = { exact: false };
            this.subscription = router.events.subscribe(function (s) {
                if (s instanceof NavigationEnd) {
                    _this.update();
                }
            });
        }
        RouterLinkActive.prototype.ngAfterContentInit = function () {
            var _this = this;
            this.links.changes.subscribe(function (_) { return _this.update(); });
            this.linksWithHrefs.changes.subscribe(function (_) { return _this.update(); });
            this.update();
        };
        Object.defineProperty(RouterLinkActive.prototype, "routerLinkActive", {
            set: function (data) {
                var classes = Array.isArray(data) ? data : data.split(' ');
                this.classes = classes.filter(function (c) { return !!c; });
            },
            enumerable: true,
            configurable: true
        });
        RouterLinkActive.prototype.ngOnChanges = function (changes) { this.update(); };
        RouterLinkActive.prototype.ngOnDestroy = function () { this.subscription.unsubscribe(); };
        RouterLinkActive.prototype.update = function () {
            var _this = this;
            if (!this.links || !this.linksWithHrefs || !this.router.navigated)
                return;
            Promise.resolve().then(function () {
                var hasActiveLinks = _this.hasActiveLinks();
                if (_this.isActive !== hasActiveLinks) {
                    _this.isActive = hasActiveLinks;
                    _this.classes.forEach(function (c) {
                        if (hasActiveLinks) {
                            _this.renderer.addClass(_this.element.nativeElement, c);
                        }
                        else {
                            _this.renderer.removeClass(_this.element.nativeElement, c);
                        }
                    });
                }
            });
        };
        RouterLinkActive.prototype.isLinkActive = function (router) {
            var _this = this;
            return function (link) {
                return router.isActive(link.urlTree, _this.routerLinkActiveOptions.exact);
            };
        };
        RouterLinkActive.prototype.hasActiveLinks = function () {
            return this.links.some(this.isLinkActive(this.router)) ||
                this.linksWithHrefs.some(this.isLinkActive(this.router));
        };
        __decorate([
            core.ContentChildren(RouterLink, { descendants: true }),
            __metadata("design:type", core.QueryList)
        ], RouterLinkActive.prototype, "links", void 0);
        __decorate([
            core.ContentChildren(RouterLinkWithHref, { descendants: true }),
            __metadata("design:type", core.QueryList)
        ], RouterLinkActive.prototype, "linksWithHrefs", void 0);
        __decorate([
            core.Input(),
            __metadata("design:type", Object)
        ], RouterLinkActive.prototype, "routerLinkActiveOptions", void 0);
        __decorate([
            core.Input(),
            __metadata("design:type", Object),
            __metadata("design:paramtypes", [Object])
        ], RouterLinkActive.prototype, "routerLinkActive", null);
        RouterLinkActive = __decorate([
            core.Directive({
                selector: '[routerLinkActive]',
                exportAs: 'routerLinkActive',
            }),
            __metadata("design:paramtypes", [Router, core.ElementRef, core.Renderer2,
                core.ChangeDetectorRef])
        ], RouterLinkActive);
        return RouterLinkActive;
    }());

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    /**
     * Store contextual information about a `RouterOutlet`
     *
     * @publicApi
     */
    var OutletContext = /** @class */ (function () {
        function OutletContext() {
            this.outlet = null;
            this.route = null;
            this.resolver = null;
            this.children = new ChildrenOutletContexts();
            this.attachRef = null;
        }
        return OutletContext;
    }());
    /**
     * Store contextual information about the children (= nested) `RouterOutlet`
     *
     * @publicApi
     */
    var ChildrenOutletContexts = /** @class */ (function () {
        function ChildrenOutletContexts() {
            // contexts for child outlets, by name.
            this.contexts = new Map();
        }
        /** Called when a `RouterOutlet` directive is instantiated */
        ChildrenOutletContexts.prototype.onChildOutletCreated = function (childName, outlet) {
            var context = this.getOrCreateContext(childName);
            context.outlet = outlet;
            this.contexts.set(childName, context);
        };
        /**
         * Called when a `RouterOutlet` directive is destroyed.
         * We need to keep the context as the outlet could be destroyed inside a NgIf and might be
         * re-created later.
         */
        ChildrenOutletContexts.prototype.onChildOutletDestroyed = function (childName) {
            var context = this.getContext(childName);
            if (context) {
                context.outlet = null;
            }
        };
        /**
         * Called when the corresponding route is deactivated during navigation.
         * Because the component get destroyed, all children outlet are destroyed.
         */
        ChildrenOutletContexts.prototype.onOutletDeactivated = function () {
            var contexts = this.contexts;
            this.contexts = new Map();
            return contexts;
        };
        ChildrenOutletContexts.prototype.onOutletReAttached = function (contexts) { this.contexts = contexts; };
        ChildrenOutletContexts.prototype.getOrCreateContext = function (childName) {
            var context = this.getContext(childName);
            if (!context) {
                context = new OutletContext();
                this.contexts.set(childName, context);
            }
            return context;
        };
        ChildrenOutletContexts.prototype.getContext = function (childName) { return this.contexts.get(childName) || null; };
        return ChildrenOutletContexts;
    }());

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    /**
     * @description
     *
     * Acts as a placeholder that Angular dynamically fills based on the current router state.
     *
     * ```
     * <router-outlet></router-outlet>
     * <router-outlet name='left'></router-outlet>
     * <router-outlet name='right'></router-outlet>
     * ```
     *
     * A router outlet will emit an activate event any time a new component is being instantiated,
     * and a deactivate event when it is being destroyed.
     *
     * ```
     * <router-outlet
     *   (activate)='onActivate($event)'
     *   (deactivate)='onDeactivate($event)'></router-outlet>
     * ```
     * @ngModule RouterModule
     *
     * @publicApi
     */
    var RouterOutlet = /** @class */ (function () {
        function RouterOutlet(parentContexts, location, resolver, name, changeDetector) {
            this.parentContexts = parentContexts;
            this.location = location;
            this.resolver = resolver;
            this.changeDetector = changeDetector;
            this.activated = null;
            this._activatedRoute = null;
            this.activateEvents = new core.EventEmitter();
            this.deactivateEvents = new core.EventEmitter();
            this.name = name || PRIMARY_OUTLET;
            parentContexts.onChildOutletCreated(this.name, this);
        }
        RouterOutlet.prototype.ngOnDestroy = function () { this.parentContexts.onChildOutletDestroyed(this.name); };
        RouterOutlet.prototype.ngOnInit = function () {
            if (!this.activated) {
                // If the outlet was not instantiated at the time the route got activated we need to populate
                // the outlet when it is initialized (ie inside a NgIf)
                var context = this.parentContexts.getContext(this.name);
                if (context && context.route) {
                    if (context.attachRef) {
                        // `attachRef` is populated when there is an existing component to mount
                        this.attach(context.attachRef, context.route);
                    }
                    else {
                        // otherwise the component defined in the configuration is created
                        this.activateWith(context.route, context.resolver || null);
                    }
                }
            }
        };
        Object.defineProperty(RouterOutlet.prototype, "isActivated", {
            get: function () { return !!this.activated; },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(RouterOutlet.prototype, "component", {
            get: function () {
                if (!this.activated)
                    throw new Error('Outlet is not activated');
                return this.activated.instance;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(RouterOutlet.prototype, "activatedRoute", {
            get: function () {
                if (!this.activated)
                    throw new Error('Outlet is not activated');
                return this._activatedRoute;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(RouterOutlet.prototype, "activatedRouteData", {
            get: function () {
                if (this._activatedRoute) {
                    return this._activatedRoute.snapshot.data;
                }
                return {};
            },
            enumerable: true,
            configurable: true
        });
        /**
         * Called when the `RouteReuseStrategy` instructs to detach the subtree
         */
        RouterOutlet.prototype.detach = function () {
            if (!this.activated)
                throw new Error('Outlet is not activated');
            this.location.detach();
            var cmp = this.activated;
            this.activated = null;
            this._activatedRoute = null;
            return cmp;
        };
        /**
         * Called when the `RouteReuseStrategy` instructs to re-attach a previously detached subtree
         */
        RouterOutlet.prototype.attach = function (ref, activatedRoute) {
            this.activated = ref;
            this._activatedRoute = activatedRoute;
            this.location.insert(ref.hostView);
        };
        RouterOutlet.prototype.deactivate = function () {
            if (this.activated) {
                var c = this.component;
                this.activated.destroy();
                this.activated = null;
                this._activatedRoute = null;
                this.deactivateEvents.emit(c);
            }
        };
        RouterOutlet.prototype.activateWith = function (activatedRoute, resolver) {
            if (this.isActivated) {
                throw new Error('Cannot activate an already activated outlet');
            }
            this._activatedRoute = activatedRoute;
            var snapshot = activatedRoute._futureSnapshot;
            var component = snapshot.routeConfig.component;
            resolver = resolver || this.resolver;
            var factory = resolver.resolveComponentFactory(component);
            var childContexts = this.parentContexts.getOrCreateContext(this.name).children;
            var injector = new OutletInjector(activatedRoute, childContexts, this.location.injector);
            this.activated = this.location.createComponent(factory, this.location.length, injector);
            // Calling `markForCheck` to make sure we will run the change detection when the
            // `RouterOutlet` is inside a `ChangeDetectionStrategy.OnPush` component.
            this.changeDetector.markForCheck();
            this.activateEvents.emit(this.activated.instance);
        };
        __decorate([
            core.Output('activate'),
            __metadata("design:type", Object)
        ], RouterOutlet.prototype, "activateEvents", void 0);
        __decorate([
            core.Output('deactivate'),
            __metadata("design:type", Object)
        ], RouterOutlet.prototype, "deactivateEvents", void 0);
        RouterOutlet = __decorate([
            core.Directive({ selector: 'router-outlet', exportAs: 'outlet' }),
            __param(3, core.Attribute('name')),
            __metadata("design:paramtypes", [ChildrenOutletContexts, core.ViewContainerRef,
                core.ComponentFactoryResolver, String, core.ChangeDetectorRef])
        ], RouterOutlet);
        return RouterOutlet;
    }());
    var OutletInjector = /** @class */ (function () {
        function OutletInjector(route, childContexts, parent) {
            this.route = route;
            this.childContexts = childContexts;
            this.parent = parent;
        }
        OutletInjector.prototype.get = function (token, notFoundValue) {
            if (token === ActivatedRoute) {
                return this.route;
            }
            if (token === ChildrenOutletContexts) {
                return this.childContexts;
            }
            return this.parent.get(token, notFoundValue);
        };
        return OutletInjector;
    }());

    /**
    *@license
    *Copyright Google Inc. All Rights Reserved.
    *
    *Use of this source code is governed by an MIT-style license that can be
    *found in the LICENSE file at https://angular.io/license
    */
    /**
     * @description
     *
     * Provides a preloading strategy.
     *
     * @publicApi
     */
    var PreloadingStrategy = /** @class */ (function () {
        function PreloadingStrategy() {
        }
        return PreloadingStrategy;
    }());
    /**
     * @description
     *
     * Provides a preloading strategy that preloads all modules as quickly as possible.
     *
     * ```
     * RouteModule.forRoot(ROUTES, {preloadingStrategy: PreloadAllModules})
     * ```
     *
     * @publicApi
     */
    var PreloadAllModules = /** @class */ (function () {
        function PreloadAllModules() {
        }
        PreloadAllModules.prototype.preload = function (route, fn) {
            return fn().pipe(operators.catchError(function () { return rxjs.of(null); }));
        };
        return PreloadAllModules;
    }());
    /**
     * @description
     *
     * Provides a preloading strategy that does not preload any modules.
     *
     * This strategy is enabled by default.
     *
     * @publicApi
     */
    var NoPreloading = /** @class */ (function () {
        function NoPreloading() {
        }
        NoPreloading.prototype.preload = function (route, fn) { return rxjs.of(null); };
        return NoPreloading;
    }());
    /**
     * The preloader optimistically loads all router configurations to
     * make navigations into lazily-loaded sections of the application faster.
     *
     * The preloader runs in the background. When the router bootstraps, the preloader
     * starts listening to all navigation events. After every such event, the preloader
     * will check if any configurations can be loaded lazily.
     *
     * If a route is protected by `canLoad` guards, the preloaded will not load it.
     *
     * @publicApi
     */
    var RouterPreloader = /** @class */ (function () {
        function RouterPreloader(router, moduleLoader, compiler, injector, preloadingStrategy) {
            this.router = router;
            this.injector = injector;
            this.preloadingStrategy = preloadingStrategy;
            var onStartLoad = function (r) { return router.triggerEvent(new RouteConfigLoadStart(r)); };
            var onEndLoad = function (r) { return router.triggerEvent(new RouteConfigLoadEnd(r)); };
            this.loader = new RouterConfigLoader(moduleLoader, compiler, onStartLoad, onEndLoad);
        }
        RouterPreloader.prototype.setUpPreloading = function () {
            var _this = this;
            this.subscription =
                this.router.events
                    .pipe(operators.filter(function (e) { return e instanceof NavigationEnd; }), operators.concatMap(function () { return _this.preload(); }))
                    .subscribe(function () { });
        };
        RouterPreloader.prototype.preload = function () {
            var ngModule = this.injector.get(core.NgModuleRef);
            return this.processRoutes(ngModule, this.router.config);
        };
        // TODO(jasonaden): This class relies on code external to the class to call setUpPreloading. If
        // this hasn't been done, ngOnDestroy will fail as this.subscription will be undefined. This
        // should be refactored.
        RouterPreloader.prototype.ngOnDestroy = function () { this.subscription.unsubscribe(); };
        RouterPreloader.prototype.processRoutes = function (ngModule, routes) {
            var e_1, _a;
            var res = [];
            try {
                for (var routes_1 = __values(routes), routes_1_1 = routes_1.next(); !routes_1_1.done; routes_1_1 = routes_1.next()) {
                    var route = routes_1_1.value;
                    // we already have the config loaded, just recurse
                    if (route.loadChildren && !route.canLoad && route._loadedConfig) {
                        var childConfig = route._loadedConfig;
                        res.push(this.processRoutes(childConfig.module, childConfig.routes));
                        // no config loaded, fetch the config
                    }
                    else if (route.loadChildren && !route.canLoad) {
                        res.push(this.preloadConfig(ngModule, route));
                        // recurse into children
                    }
                    else if (route.children) {
                        res.push(this.processRoutes(ngModule, route.children));
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (routes_1_1 && !routes_1_1.done && (_a = routes_1.return)) _a.call(routes_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
            return rxjs.from(res).pipe(operators.mergeAll(), operators.map(function (_) { return void 0; }));
        };
        RouterPreloader.prototype.preloadConfig = function (ngModule, route) {
            var _this = this;
            return this.preloadingStrategy.preload(route, function () {
                var loaded$ = _this.loader.load(ngModule.injector, route);
                return loaded$.pipe(operators.mergeMap(function (config) {
                    route._loadedConfig = config;
                    return _this.processRoutes(config.module, config.routes);
                }));
            });
        };
        RouterPreloader = __decorate([
            core.Injectable(),
            __metadata("design:paramtypes", [Router, core.NgModuleFactoryLoader, core.Compiler,
                core.Injector, PreloadingStrategy])
        ], RouterPreloader);
        return RouterPreloader;
    }());

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    var RouterScroller = /** @class */ (function () {
        function RouterScroller(router, 
        /** @docsNotRequired */ viewportScroller, options) {
            if (options === void 0) { options = {}; }
            this.router = router;
            this.viewportScroller = viewportScroller;
            this.options = options;
            this.lastId = 0;
            this.lastSource = 'imperative';
            this.restoredId = 0;
            this.store = {};
            // Default both options to 'disabled'
            options.scrollPositionRestoration = options.scrollPositionRestoration || 'disabled';
            options.anchorScrolling = options.anchorScrolling || 'disabled';
        }
        RouterScroller.prototype.init = function () {
            // we want to disable the automatic scrolling because having two places
            // responsible for scrolling results race conditions, especially given
            // that browser don't implement this behavior consistently
            if (this.options.scrollPositionRestoration !== 'disabled') {
                this.viewportScroller.setHistoryScrollRestoration('manual');
            }
            this.routerEventsSubscription = this.createScrollEvents();
            this.scrollEventsSubscription = this.consumeScrollEvents();
        };
        RouterScroller.prototype.createScrollEvents = function () {
            var _this = this;
            return this.router.events.subscribe(function (e) {
                if (e instanceof NavigationStart) {
                    // store the scroll position of the current stable navigations.
                    _this.store[_this.lastId] = _this.viewportScroller.getScrollPosition();
                    _this.lastSource = e.navigationTrigger;
                    _this.restoredId = e.restoredState ? e.restoredState.navigationId : 0;
                }
                else if (e instanceof NavigationEnd) {
                    _this.lastId = e.id;
                    _this.scheduleScrollEvent(e, _this.router.parseUrl(e.urlAfterRedirects).fragment);
                }
            });
        };
        RouterScroller.prototype.consumeScrollEvents = function () {
            var _this = this;
            return this.router.events.subscribe(function (e) {
                if (!(e instanceof Scroll))
                    return;
                // a popstate event. The pop state event will always ignore anchor scrolling.
                if (e.position) {
                    if (_this.options.scrollPositionRestoration === 'top') {
                        _this.viewportScroller.scrollToPosition([0, 0]);
                    }
                    else if (_this.options.scrollPositionRestoration === 'enabled') {
                        _this.viewportScroller.scrollToPosition(e.position);
                    }
                    // imperative navigation "forward"
                }
                else {
                    if (e.anchor && _this.options.anchorScrolling === 'enabled') {
                        _this.viewportScroller.scrollToAnchor(e.anchor);
                    }
                    else if (_this.options.scrollPositionRestoration !== 'disabled') {
                        _this.viewportScroller.scrollToPosition([0, 0]);
                    }
                }
            });
        };
        RouterScroller.prototype.scheduleScrollEvent = function (routerEvent, anchor) {
            this.router.triggerEvent(new Scroll(routerEvent, this.lastSource === 'popstate' ? this.store[this.restoredId] : null, anchor));
        };
        RouterScroller.prototype.ngOnDestroy = function () {
            if (this.routerEventsSubscription) {
                this.routerEventsSubscription.unsubscribe();
            }
            if (this.scrollEventsSubscription) {
                this.scrollEventsSubscription.unsubscribe();
            }
        };
        return RouterScroller;
    }());

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    /**
     * @description
     *
     * Contains a list of directives
     *
     *
     */
    var ROUTER_DIRECTIVES = [RouterOutlet, RouterLink, RouterLinkWithHref, RouterLinkActive, EmptyOutletComponent];
    /**
     * @description
     *
     * Is used in DI to configure the router.
     *
     * @publicApi
     */
    var ROUTER_CONFIGURATION = new core.InjectionToken('ROUTER_CONFIGURATION');
    /**
     * @docsNotRequired
     */
    var ROUTER_FORROOT_GUARD = new core.InjectionToken('ROUTER_FORROOT_GUARD');
    var ROUTER_PROVIDERS = [
        common.Location,
        { provide: UrlSerializer, useClass: DefaultUrlSerializer },
        {
            provide: Router,
            useFactory: setupRouter,
            deps: [
                core.ApplicationRef, UrlSerializer, ChildrenOutletContexts, common.Location, core.Injector,
                core.NgModuleFactoryLoader, core.Compiler, ROUTES, ROUTER_CONFIGURATION,
                [UrlHandlingStrategy, new core.Optional()], [RouteReuseStrategy, new core.Optional()]
            ]
        },
        ChildrenOutletContexts,
        { provide: ActivatedRoute, useFactory: rootRoute, deps: [Router] },
        { provide: core.NgModuleFactoryLoader, useClass: core.SystemJsNgModuleLoader },
        RouterPreloader,
        NoPreloading,
        PreloadAllModules,
        { provide: ROUTER_CONFIGURATION, useValue: { enableTracing: false } },
    ];
    function routerNgProbeToken() {
        return new core.NgProbeToken('Router', Router);
    }
    /**
     * @usageNotes
     *
     * RouterModule can be imported multiple times: once per lazily-loaded bundle.
     * Since the router deals with a global shared resource--location, we cannot have
     * more than one router service active.
     *
     * That is why there are two ways to create the module: `RouterModule.forRoot` and
     * `RouterModule.forChild`.
     *
     * * `forRoot` creates a module that contains all the directives, the given routes, and the router
     *   service itself.
     * * `forChild` creates a module that contains all the directives and the given routes, but does not
     *   include the router service.
     *
     * When registered at the root, the module should be used as follows
     *
     * ```
     * @NgModule({
     *   imports: [RouterModule.forRoot(ROUTES)]
     * })
     * class MyNgModule {}
     * ```
     *
     * For submodules and lazy loaded submodules the module should be used as follows:
     *
     * ```
     * @NgModule({
     *   imports: [RouterModule.forChild(ROUTES)]
     * })
     * class MyNgModule {}
     * ```
     *
     * @description
     *
     * Adds router directives and providers.
     *
     * Managing state transitions is one of the hardest parts of building applications. This is
     * especially true on the web, where you also need to ensure that the state is reflected in the URL.
     * In addition, we often want to split applications into multiple bundles and load them on demand.
     * Doing this transparently is not trivial.
     *
     * The Angular router solves these problems. Using the router, you can declaratively specify
     * application states, manage state transitions while taking care of the URL, and load bundles on
     * demand.
     *
     * [Read this developer guide](https://angular.io/docs/ts/latest/guide/router.html) to get an
     * overview of how the router should be used.
     *
     * @publicApi
     */
    var RouterModule = /** @class */ (function () {
        // Note: We are injecting the Router so it gets created eagerly...
        function RouterModule(guard, router) {
        }
        RouterModule_1 = RouterModule;
        /**
         * Creates a module with all the router providers and directives. It also optionally sets up an
         * application listener to perform an initial navigation.
         *
         * Configuration Options:
         *
         * * `enableTracing` Toggles whether the router should log all navigation events to the console.
         * * `useHash` Enables the location strategy that uses the URL fragment instead of the history
         * API.
         * * `initialNavigation` Disables the initial navigation.
         * * `errorHandler` Defines a custom error handler for failed navigations.
         * * `preloadingStrategy` Configures a preloading strategy. See `PreloadAllModules`.
         * * `onSameUrlNavigation` Define what the router should do if it receives a navigation request to
         * the current URL.
         * * `scrollPositionRestoration` Configures if the scroll position needs to be restored when
         * navigating back.
         * * `anchorScrolling` Configures if the router should scroll to the element when the url has a
         * fragment.
         * * `scrollOffset` Configures the scroll offset the router will use when scrolling to an element.
         * * `paramsInheritanceStrategy` Defines how the router merges params, data and resolved data from
         * parent to child routes.
         * * `malformedUriErrorHandler` Defines a custom malformed uri error handler function. This
         * handler is invoked when encodedURI contains invalid character sequences.
         * * `urlUpdateStrategy` Defines when the router updates the browser URL. The default behavior is
         * to update after successful navigation.
         * * `relativeLinkResolution` Enables the correct relative link resolution in components with
         * empty paths.
         *
         * See `ExtraOptions` for more details about the above options.
        */
        RouterModule.forRoot = function (routes, config) {
            return {
                ngModule: RouterModule_1,
                providers: [
                    ROUTER_PROVIDERS,
                    provideRoutes(routes),
                    {
                        provide: ROUTER_FORROOT_GUARD,
                        useFactory: provideForRootGuard,
                        deps: [[Router, new core.Optional(), new core.SkipSelf()]]
                    },
                    { provide: ROUTER_CONFIGURATION, useValue: config ? config : {} },
                    {
                        provide: common.LocationStrategy,
                        useFactory: provideLocationStrategy,
                        deps: [
                            common.PlatformLocation, [new core.Inject(common.APP_BASE_HREF), new core.Optional()], ROUTER_CONFIGURATION
                        ]
                    },
                    {
                        provide: RouterScroller,
                        useFactory: createRouterScroller,
                        deps: [Router, common.ViewportScroller, ROUTER_CONFIGURATION]
                    },
                    {
                        provide: PreloadingStrategy,
                        useExisting: config && config.preloadingStrategy ? config.preloadingStrategy :
                            NoPreloading
                    },
                    { provide: core.NgProbeToken, multi: true, useFactory: routerNgProbeToken },
                    provideRouterInitializer(),
                ],
            };
        };
        /**
         * Creates a module with all the router directives and a provider registering routes.
         */
        RouterModule.forChild = function (routes) {
            return { ngModule: RouterModule_1, providers: [provideRoutes(routes)] };
        };
        var RouterModule_1;
        RouterModule = RouterModule_1 = __decorate([
            core.NgModule({
                declarations: ROUTER_DIRECTIVES,
                exports: ROUTER_DIRECTIVES,
                entryComponents: [EmptyOutletComponent]
            }),
            __param(0, core.Optional()), __param(0, core.Inject(ROUTER_FORROOT_GUARD)), __param(1, core.Optional()),
            __metadata("design:paramtypes", [Object, Router])
        ], RouterModule);
        return RouterModule;
    }());
    function createRouterScroller(router, viewportScroller, config) {
        if (config.scrollOffset) {
            viewportScroller.setOffset(config.scrollOffset);
        }
        return new RouterScroller(router, viewportScroller, config);
    }
    function provideLocationStrategy(platformLocationStrategy, baseHref, options) {
        if (options === void 0) { options = {}; }
        return options.useHash ? new common.HashLocationStrategy(platformLocationStrategy, baseHref) :
            new common.PathLocationStrategy(platformLocationStrategy, baseHref);
    }
    function provideForRootGuard(router) {
        if (router) {
            throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");
        }
        return 'guarded';
    }
    /**
     * @description
     *
     * Registers routes.
     *
     * @usageNotes
     * ### Example
     *
     * ```
     * @NgModule({
     *   imports: [RouterModule.forChild(ROUTES)],
     *   providers: [provideRoutes(EXTRA_ROUTES)]
     * })
     * class MyNgModule {}
     * ```
     *
     * @publicApi
     */
    function provideRoutes(routes) {
        return [
            { provide: core.ANALYZE_FOR_ENTRY_COMPONENTS, multi: true, useValue: routes },
            { provide: ROUTES, multi: true, useValue: routes },
        ];
    }
    function setupRouter(ref, urlSerializer, contexts, location, injector, loader, compiler, config, opts, urlHandlingStrategy, routeReuseStrategy) {
        if (opts === void 0) { opts = {}; }
        var router = new Router(null, urlSerializer, contexts, location, injector, loader, compiler, flatten(config));
        if (urlHandlingStrategy) {
            router.urlHandlingStrategy = urlHandlingStrategy;
        }
        if (routeReuseStrategy) {
            router.routeReuseStrategy = routeReuseStrategy;
        }
        if (opts.errorHandler) {
            router.errorHandler = opts.errorHandler;
        }
        if (opts.malformedUriErrorHandler) {
            router.malformedUriErrorHandler = opts.malformedUriErrorHandler;
        }
        if (opts.enableTracing) {
            var dom_1 = getDOM();
            router.events.subscribe(function (e) {
                dom_1.logGroup("Router Event: " + e.constructor.name);
                dom_1.log(e.toString());
                dom_1.log(e);
                dom_1.logGroupEnd();
            });
        }
        if (opts.onSameUrlNavigation) {
            router.onSameUrlNavigation = opts.onSameUrlNavigation;
        }
        if (opts.paramsInheritanceStrategy) {
            router.paramsInheritanceStrategy = opts.paramsInheritanceStrategy;
        }
        if (opts.urlUpdateStrategy) {
            router.urlUpdateStrategy = opts.urlUpdateStrategy;
        }
        if (opts.relativeLinkResolution) {
            router.relativeLinkResolution = opts.relativeLinkResolution;
        }
        return router;
    }
    function rootRoute(router) {
        return router.routerState.root;
    }
    /**
     * To initialize the router properly we need to do in two steps:
     *
     * We need to start the navigation in a APP_INITIALIZER to block the bootstrap if
     * a resolver or a guards executes asynchronously. Second, we need to actually run
     * activation in a BOOTSTRAP_LISTENER. We utilize the afterPreactivation
     * hook provided by the router to do that.
     *
     * The router navigation starts, reaches the point when preactivation is done, and then
     * pauses. It waits for the hook to be resolved. We then resolve it only in a bootstrap listener.
     */
    var RouterInitializer = /** @class */ (function () {
        function RouterInitializer(injector) {
            this.injector = injector;
            this.initNavigation = false;
            this.resultOfPreactivationDone = new rxjs.Subject();
        }
        RouterInitializer.prototype.appInitializer = function () {
            var _this = this;
            var p = this.injector.get(common.LOCATION_INITIALIZED, Promise.resolve(null));
            return p.then(function () {
                var resolve = null;
                var res = new Promise(function (r) { return resolve = r; });
                var router = _this.injector.get(Router);
                var opts = _this.injector.get(ROUTER_CONFIGURATION);
                if (_this.isLegacyDisabled(opts) || _this.isLegacyEnabled(opts)) {
                    resolve(true);
                }
                else if (opts.initialNavigation === 'disabled') {
                    router.setUpLocationChangeListener();
                    resolve(true);
                }
                else if (opts.initialNavigation === 'enabled') {
                    router.hooks.afterPreactivation = function () {
                        // only the initial navigation should be delayed
                        if (!_this.initNavigation) {
                            _this.initNavigation = true;
                            resolve(true);
                            return _this.resultOfPreactivationDone;
                            // subsequent navigations should not be delayed
                        }
                        else {
                            return rxjs.of(null);
                        }
                    };
                    router.initialNavigation();
                }
                else {
                    throw new Error("Invalid initialNavigation options: '" + opts.initialNavigation + "'");
                }
                return res;
            });
        };
        RouterInitializer.prototype.bootstrapListener = function (bootstrappedComponentRef) {
            var opts = this.injector.get(ROUTER_CONFIGURATION);
            var preloader = this.injector.get(RouterPreloader);
            var routerScroller = this.injector.get(RouterScroller);
            var router = this.injector.get(Router);
            var ref = this.injector.get(core.ApplicationRef);
            if (bootstrappedComponentRef !== ref.components[0]) {
                return;
            }
            if (this.isLegacyEnabled(opts)) {
                router.initialNavigation();
            }
            else if (this.isLegacyDisabled(opts)) {
                router.setUpLocationChangeListener();
            }
            preloader.setUpPreloading();
            routerScroller.init();
            router.resetRootComponentType(ref.componentTypes[0]);
            this.resultOfPreactivationDone.next(null);
            this.resultOfPreactivationDone.complete();
        };
        RouterInitializer.prototype.isLegacyEnabled = function (opts) {
            return opts.initialNavigation === 'legacy_enabled' || opts.initialNavigation === true ||
                opts.initialNavigation === undefined;
        };
        RouterInitializer.prototype.isLegacyDisabled = function (opts) {
            return opts.initialNavigation === 'legacy_disabled' || opts.initialNavigation === false;
        };
        RouterInitializer = __decorate([
            core.Injectable(),
            __metadata("design:paramtypes", [core.Injector])
        ], RouterInitializer);
        return RouterInitializer;
    }());
    function getAppInitializer(r) {
        return r.appInitializer.bind(r);
    }
    function getBootstrapListener(r) {
        return r.bootstrapListener.bind(r);
    }
    /**
     * A token for the router initializer that will be called after the app is bootstrapped.
     *
     * @publicApi
     */
    var ROUTER_INITIALIZER = new core.InjectionToken('Router Initializer');
    function provideRouterInitializer() {
        return [
            RouterInitializer,
            {
                provide: core.APP_INITIALIZER,
                multi: true,
                useFactory: getAppInitializer,
                deps: [RouterInitializer]
            },
            { provide: ROUTER_INITIALIZER, useFactory: getBootstrapListener, deps: [RouterInitializer] },
            { provide: core.APP_BOOTSTRAP_LISTENER, multi: true, useExisting: ROUTER_INITIALIZER },
        ];
    }

    /**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
    /**
     * @publicApi
     */
    var VERSION$1 = new core.Version('7.2.16');

    function unwrapExports (x) {
    	return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;
    }

    function createCommonjsModule(fn, module) {
    	return module = { exports: {} }, fn(module, module.exports), module.exports;
    }

    var oktaAuthJs_umd = createCommonjsModule(function (module, exports) {
    /*!
     * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.
     * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the "License.")
     * 
     * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
     * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * 
     * See the License for the specific language governing permissions and limitations under the License.
     * 
     */
    !function(t,e){module.exports=e();}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r});},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0});},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=404)}([function(t,e,n){t.exports=n(124);},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.default=t.exports,t.exports.__esModule=!0,n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r);}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){var r=n(80);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e);},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){var r=n(25).default,o=n(78);t.exports=function(t,e){return !e||"object"!==r(e)&&"function"!=typeof e?o(t):e},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){var r=n(10),o=n(45).f,i=n(132),a=n(12),u=n(34),s=n(23),c=n(18),f=function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e};t.exports=function(t,e){var n,l,h,p,d,v,y,g,m=t.target,b=t.global,w=t.stat,x=t.proto,k=b?r:w?r[m]:(r[m]||{}).prototype,S=b?a:a[m]||(a[m]={}),T=S.prototype;for(h in e)n=!i(b?h:m+(w?".":"#")+h,t.forced)&&k&&c(k,h),d=S[h],n&&(v=t.noTargetGet?(g=o(k,h))&&g.value:k[h]),p=n&&v?v:e[h],n&&typeof d==typeof p||(y=t.bind&&n?u(p,r):t.wrap&&n?f(p):x&&"function"==typeof p?u(Function.call,p):p,(t.sham||p&&p.sham||d&&d.sham)&&s(y,"sham",!0),S[h]=y,x&&(c(a,l=m+"Prototype")||s(a,l,{}),a[l][h]=p,t.real&&T&&!T[h]&&s(T,h,p)));};},function(t,e,n){var r=n(12),o=n(18),i=n(111),a=n(27).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});o(e,t)||a(e,t,{value:i.f(t)});};},function(t,e,n){var r=n(214),o=n(129),i=n(81),a=n(215);t.exports=function(t){return r(t)||o(t)||i(t)||a()},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){var r=n(10),o=n(87),i=n(18),a=n(89),u=n(93),s=n(142),c=o("wks"),f=r.Symbol,l=s?f:f&&f.withoutSetter||a;t.exports=function(t){return i(c,t)&&(u||"string"==typeof c[t])||(u&&i(f,t)?c[t]=f[t]:c[t]=l("Symbol."+t)),c[t]};},function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")();}).call(this,n(59));},function(t,e){t.exports=function(t){try{return !!t()}catch(t){return !0}};},function(t,e){t.exports={};},function(t,e,n){var r=n(402);function o(e,n,i){return "undefined"!=typeof Reflect&&Reflect.get?(t.exports=o=Reflect.get,t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=o=function(t,e,n){var o=r(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(n):i.value}},t.exports.default=t.exports,t.exports.__esModule=!0),o(e,n,i||e)}t.exports=o,t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){var r=n(11);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}));},function(t,e,n){var r=n(17);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t};},function(t,e,n){t.exports=n(219);},function(t,e){t.exports=function(t){return "object"==typeof t?null!==t:"function"==typeof t};},function(t,e,n){var r=n(26),o={}.hasOwnProperty;t.exports=Object.hasOwn||function(t,e){return o.call(r(t),e)};},function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")();}).call(this,n(59));},function(t,e){t.exports=function(t){try{return !!t()}catch(t){return !0}};},function(t,e,n){var r=n(82),o=n(83);t.exports=function(t){return r(o(t))};},function(t,e,n){var r=n(14),o=n(27),i=n(28);t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t};},function(t,e,n){var r=n(12),o=n(10),i=function(t){return "function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?i(r[t])||i(o[t]):r[t]&&r[t][e]||o[t]&&o[t][e]};},function(t,e){function n(e){return "function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=n=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){var r=n(83);t.exports=function(t){return Object(r(t))};},function(t,e,n){var r=n(14),o=n(131),i=n(15),a=n(62),u=Object.defineProperty;e.f=r?u:function(t,e,n){if(i(t),e=a(e,!0),i(n),o)try{return u(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return "value"in n&&(t[e]=n.value),t};},function(t,e){t.exports=function(t,e){return {enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}};},function(t,e,n){var r=n(12);t.exports=function(t){return r[t+"Prototype"]};},function(t,e){t.exports=!0;},function(t,e,n){var r=n(23);t.exports=function(t,e,n,o){o&&o.enumerable?t[e]=n:r(t,e,n);};},function(t,e,n){var r=n(95),o=n(27).f,i=n(23),a=n(18),u=n(230),s=n(9)("toStringTag");t.exports=function(t,e,n,c){if(t){var f=n?t:t.prototype;a(f,s)||o(f,s,{configurable:!0,value:e}),c&&!r&&i(f,"toString",u);}};},function(t,e,n){var r=n(16),o=n(19);r(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n(36)),a=o(n(221)),u=o(n(46)),s=o(n(239));n(247),n(164);var c=o(n(44)),f=o(n(281)),l=o(n(311)),h=o(n(361)),p=n(74),d=function(){var t=(0, c.default)(i.default.mark((function t(e){var n,r,o,c,p,d,v,y,g,m,b,w,x,k,S,T,_,O,E,A,R;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.clientId,c=e.domain,p=e.issuer,d=e.stateHandle,v=e.interactionHandle,y=e.version,g=e.redirectUri,m=e.state,b=e.scopes,w=e.codeChallenge,x=e.codeChallengeMethod,p=null===(n=p)||void 0===n?void 0:n.replace(/\/+$/,""),k=(null===(r=p)||void 0===r?void 0:(0, a.default)(r).call(r,"/oauth2"))>0?p:p+"/oauth2",S={baseUrl:k,clientId:o,state:m},c||p){t.next=6;break}return t.abrupt("return",u.default.reject({error:"issuer is required"}));case 6:if(d||o){t.next=8;break}return t.abrupt("return",u.default.reject({error:"clientId is required"}));case 8:if(d||g){t.next=10;break}return t.abrupt("return",u.default.reject({error:"redirectUri is required"}));case 10:if(d||w&&x){t.next=12;break}return t.abrupt("return",u.default.reject({error:"PKCE params (codeChallenge, codeChallengeMethod) are required"}));case 12:if(c||(c=new s.default(p).origin),y){t.next=15;break}return t.abrupt("return",u.default.reject({error:"version is required"}));case 15:if((null!=y?y:"").replace(/[^0-9a-zA-Z._-]/,"")===y&&y){t.next=18;break}return t.abrupt("return",u.default.reject({error:"invalid version supplied - version is required and uses semver syntax"}));case 18:if(d||v){t.next=31;break}return t.prev=19,T={clientId:o,baseUrl:k,scopes:b,redirectUri:g,codeChallenge:w,codeChallengeMethod:x,state:m},t.next=23,(0, l.default)(T);case 23:_=t.sent,v=_,S.interactionHandle=v,t.next=31;break;case 28:return t.prev=28,t.t0=t.catch(19),t.abrupt("return",u.default.reject({error:t.t0}));case 31:return t.prev=31,O=(0, h.default)(y),E=O.makeIdxState,t.next=35,(0, f.default)({domain:c,interactionHandle:v,stateHandle:d,version:y}).catch((function(t){return u.default.reject({error:"introspect call failed",details:E(t,S)})}));case 35:return A=t.sent,R=E(A,S),t.abrupt("return",R);case 40:return t.prev=40,t.t1=t.catch(31),t.abrupt("return",u.default.reject({error:t.t1}));case 43:case"end":return t.stop()}}),t,null,[[19,28],[31,40]])})));return function(e){return t.apply(this,arguments)}}(),v=(0, h.default)("1.0.0").makeIdxState,y={start:d,introspect:f.default,interact:l.default,makeIdxState:v,client:p.HttpClient,LATEST_SUPPORTED_IDX_API_VERSION:"1.0.0"};e.default=y;},function(t,e,n){var r=n(35);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}};},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t};},function(t,e,n){t.exports=n(124);},function(t,e,n){var r=n(85),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0};},function(t,e){t.exports={};},function(t,e,n){var r,o,i,a=n(235),u=n(10),s=n(17),c=n(23),f=n(18),l=n(88),h=n(63),p=n(65),d=u.WeakMap;if(a||l.state){var v=l.state||(l.state=new d),y=v.get,g=v.has,m=v.set;r=function(t,e){if(g.call(v,t))throw new TypeError("Object already initialized");return e.facade=t,m.call(v,t,e),e},o=function(t){return y.call(v,t)||{}},i=function(t){return g.call(v,t)};}else{var b=h("state");p[b]=!0,r=function(t,e){if(f(t,b))throw new TypeError("Object already initialized");return e.facade=t,c(t,b,e),e},o=function(t){return f(t,b)?t[b]:{}},i=function(t){return f(t,b)};}t.exports={set:r,get:o,has:i,enforce:function(t){return i(t)?o(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!s(e)||(n=o(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}};},function(t,e,n){var r=n(155).charAt,o=n(39),i=n(156),a=o.set,u=o.getterFor("String Iterator");i(String,"String",(function(t){a(this,{type:"String Iterator",string:String(t),index:0});}),(function(){var t,e=u(this),n=e.string,o=e.index;return o>=n.length?{value:void 0,done:!0}:(t=r(n,o),e.index+=t.length,{value:t,done:!1})}));},function(t,e,n){var r=n(21);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}));},function(t,e,n){var r=n(170),o={}.hasOwnProperty;t.exports=Object.hasOwn||function(t,e){return o.call(r(t),e)};},function(t,e,n){var r=n(70);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t};},function(t,e,n){var r=n(275);function o(t,e,n,o,i,a,u){try{var s=t[a](u),c=s.value;}catch(t){return void n(t)}s.done?e(c):r.resolve(c).then(o,i);}t.exports=function(t){return function(){var e=this,n=arguments;return new r((function(r,i){var a=t.apply(e,n);function u(t){o(a,r,i,u,s,"next",t);}function s(t){o(a,r,i,u,s,"throw",t);}u(void 0);}))}},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){var r=n(14),o=n(60),i=n(28),a=n(22),u=n(62),s=n(18),c=n(131),f=Object.getOwnPropertyDescriptor;e.f=r?f:function(t,e){if(t=a(t),e=u(e,!0),c)try{return f(t,e)}catch(t){}if(s(t,e))return i(!o.f.call(t,e),t[e])};},function(t,e,n){t.exports=n(225);},function(t,e,n){var r=n(139),o=n(92);t.exports=Object.keys||function(t){return r(t,o)};},function(t,e,n){var r=n(15),o=n(141),i=n(37),a=n(34),u=n(49),s=n(143),c=function(t,e){this.stopped=t,this.result=e;};t.exports=function(t,e,n){var f,l,h,p,d,v,y,g=n&&n.that,m=!(!n||!n.AS_ENTRIES),b=!(!n||!n.IS_ITERATOR),w=!(!n||!n.INTERRUPTED),x=a(e,g,1+m+w),k=function(t){return f&&s(f),new c(!0,t)},S=function(t){return m?(r(t),w?x(t[0],t[1],k):x(t[0],t[1])):w?x(t,k):x(t)};if(b)f=t;else{if("function"!=typeof(l=u(t)))throw TypeError("Target is not iterable");if(o(l)){for(h=0,p=i(t.length);p>h;h++)if((d=S(t[h]))&&d instanceof c)return d;return new c(!1)}f=l.call(t);}for(v=f.next;!(y=v.call(f)).done;){try{d=S(y.value);}catch(t){throw s(f),t}if("object"==typeof d&&d&&d instanceof c)return d}return new c(!1)};},function(t,e,n){var r=n(50),o=n(38),i=n(9)("iterator");t.exports=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]};},function(t,e,n){var r=n(95),o=n(61),i=n(9)("toStringTag"),a="Arguments"==o(function(){return arguments}());t.exports=r?o:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:a?o(e):"Object"==(r=o(e))&&"function"==typeof e.callee?"Arguments":r};},function(t,e,n){var r=n(35),o=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r;})),this.resolve=r(e),this.reject=r(n);};t.exports.f=function(t){return new o(t)};},function(t,e,n){n(98);var r=n(238),o=n(10),i=n(50),a=n(23),u=n(38),s=n(9)("toStringTag");for(var c in r){var f=o[c],l=f&&f.prototype;l&&i(l)!==s&&a(l,s,c),u[c]=u.Array;}},function(t,e,n){var r=n(62),o=n(27),i=n(28);t.exports=function(t,e,n){var a=r(e);a in t?o.f(t,a,i(0,n)):t[a]=n;};},function(t,e,n){var r=n(41),o=n(71),i=n(167);t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t};},function(t,e,n){var r=n(61);t.exports=Array.isArray||function(t){return "Array"==r(t)};},function(t,e,n){var r=n(34),o=n(82),i=n(26),a=n(37),u=n(184),s=[].push,c=function(t){var e=1==t,n=2==t,c=3==t,f=4==t,l=6==t,h=7==t,p=5==t||l;return function(d,v,y,g){for(var m,b,w=i(d),x=o(w),k=r(v,y,3),S=a(x.length),T=0,_=g||u,O=e?_(d,S):n||h?_(d,0):void 0;S>T;T++)if((p||T in x)&&(b=k(m=x[T],T,w),t))if(e)O[T]=b;else if(b)switch(t){case 3:return !0;case 5:return m;case 6:return T;case 2:s.call(O,m);}else switch(t){case 4:return !1;case 7:s.call(O,m);}return l?-1:c||f?f:O}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterOut:c(7)};},function(t,e,n){t.exports=n(296);},function(t,e,n){var r=n(41),o=n(71).f,i=Function.prototype,a=i.toString,u=/^\s*function ([^ (]*)/;r&&!("name"in i)&&o(i,"name",{configurable:!0,get:function(){try{return a.call(this).match(u)[1]}catch(t){return ""}}});},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")();}catch(t){"object"==typeof window&&(n=window);}t.exports=n;},function(t,e,n){var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);e.f=i?function(t){var e=o(this,t);return !!e&&e.enumerable}:r;},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)};},function(t,e,n){var r=n(17);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")};},function(t,e,n){var r=n(87),o=n(89),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))};},function(t,e,n){var r,o=n(15),i=n(91),a=n(92),u=n(65),s=n(140),c=n(84),f=n(63),l=f("IE_PROTO"),h=function(){},p=function(t){return "<script>"+t+"<\/script>"},d=function(){try{r=document.domain&&new ActiveXObject("htmlfile");}catch(t){}var t,e;d=r?function(t){t.write(p("")),t.close();var e=t.parentWindow.Object;return t=null,e}(r):((e=c("iframe")).style.display="none",s.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(p("document.F=Object")),t.close(),t.F);for(var n=a.length;n--;)delete d.prototype[a[n]];return d()};u[l]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(h.prototype=o(t),n=new h,h.prototype=null,n[l]=t):n=d(),void 0===e?n:i(n,e)};},function(t,e){t.exports={};},function(t,e,n){var r,o,i=n(10),a=n(94),u=i.process,s=u&&u.versions,c=s&&s.v8;c?o=(r=c.split("."))[0]<4?1:r[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(o=r[1]),t.exports=o&&+o;},function(t,e){t.exports=function(t){try{return {error:!1,value:t()}}catch(t){return {error:!0,value:t}}};},function(t,e,n){var r=n(168),o=n(69);t.exports=function(t){return r(o(t))};},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t};},function(t,e){t.exports=function(t){return "object"==typeof t?null!==t:"function"==typeof t};},function(t,e,n){var r=n(41),o=n(171),i=n(43),a=n(169),u=Object.defineProperty;e.f=r?u:function(t,e,n){if(i(t),e=a(e,!0),i(n),o)try{return u(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return "value"in n&&(t[e]=n.value),t};},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)};},function(t,e,n){var r=n(20),o=n(104),i=n(42),a=n(176),u=n(179),s=n(270),c=o("wks"),f=r.Symbol,l=s?f:f&&f.withoutSetter||a;t.exports=function(t){return i(c,t)&&(u||"string"==typeof c[t])||(u&&i(f,t)?c[t]=f[t]:c[t]=l("Symbol."+t)),c[t]};},function(t,e,n){var r=n(75),o=n(109),i=n(76),a=n(112),u=n(57),s=n(113),c=n(114),f=n(16),l=n(19);f(e,"__esModule",{value:!0}),e.request=e.HttpClient=void 0;var h=l(n(36)),p=l(n(57)),d=l(n(115)),v=l(n(44)),y=l(n(123)),g=n(310);function m(t,e){var n=r(t);if(o){var u=o(t);e&&(u=i(u).call(u,(function(e){return a(t,e).enumerable}))),n.push.apply(n,u);}return n}function b(t){for(var e=1;e<arguments.length;e++){var n,r=null!=arguments[e]?arguments[e]:{};if(e%2)u(n=m(Object(r),!0)).call(n,(function(e){(0, d.default)(t,e,r[e]);}));else if(s)c(t,s(r));else{var o;u(o=m(Object(r))).call(o,(function(e){f(t,e,a(r,e));}));}}return t}var w={interceptors:{request:new function(){this.handlers=[],this.use=function(t){this.handlers.push({before:t});},this.clear=function(){this.handlers=[];};}}};e.HttpClient=w;var x=function(){var t=(0, v.default)(h.default.mark((function t(e,n){var r,o,i,a,u,s,c,f;return h.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.method,o=void 0===r?"POST":r,i=n.headers,a=void 0===i?{}:i,u=n.body,s={url:e,method:o,headers:b(b({},(0, g.userAgentHeaders)()),a),body:u},w.interceptors&&(0, p.default)(c=w.interceptors.request.handlers).call(c,(function(t){t.before(s);})),f=s.url,delete s.url,t.abrupt("return",(0, y.default)(f,s));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();e.request=x;},function(t,e,n){t.exports=n(285);},function(t,e,n){t.exports=n(289);},function(t,e,n){var r=n(11),o=n(9),i=n(66),a=o("species");t.exports=function(t){return i>=51||!r((function(){var e=[];return (e.constructor={})[a]=function(){return {foo:1}},1!==e[t](Boolean).foo}))};},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.default=t.exports,t.exports.__esModule=!0,n(e,r)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){var r=n(126);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return "Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){var r=n(11),o=n(61),i="".split;t.exports=r((function(){return !Object("z").propertyIsEnumerable(0)}))?function(t){return "String"==o(t)?i.call(t,""):Object(t)}:Object;},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t};},function(t,e,n){var r=n(10),o=n(17),i=r.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}};},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)};},function(t,e,n){var r=n(18),o=n(26),i=n(63),a=n(227),u=i("IE_PROTO"),s=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=o(t),r(t,u)?t[u]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null};},function(t,e,n){var r=n(30),o=n(88);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.15.1",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"});},function(t,e,n){var r=n(10),o=n(226),i=r["__core-js_shared__"]||o("__core-js_shared__",{});t.exports=i;},function(t,e){var n=0,r=Math.random();t.exports=function(t){return "Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)};},function(t,e,n){var r=n(15),o=n(228);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array;}catch(t){}return function(n,i){return r(n),o(i),e?t.call(n,i):n.__proto__=i,n}}():void 0);},function(t,e,n){var r=n(14),o=n(27),i=n(15),a=n(47);t.exports=r?Object.defineProperties:function(t,e){i(t);for(var n,r=a(e),u=r.length,s=0;u>s;)o.f(t,n=r[s++],e[n]);return t};},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];},function(t,e,n){var r=n(66),o=n(11);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return !String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}));},function(t,e,n){var r=n(24);t.exports=r("navigator","userAgent")||"";},function(t,e,n){var r={};r[n(9)("toStringTag")]="z",t.exports="[object z]"===String(r);},function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t};},function(t,e,n){var r=n(61),o=n(10);t.exports="process"==r(o.process);},function(t,e,n){var r=n(22),o=n(159),i=n(38),a=n(39),u=n(156),s=a.set,c=a.getterFor("Array Iterator");t.exports=u(Array,"Array",(function(t,e){s(this,{type:"Array Iterator",target:r(t),index:0,kind:e});}),(function(){var t=c(this),e=t.target,n=t.kind,r=t.index++;return !e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries");},function(t,e){e.f=Object.getOwnPropertySymbols;},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)};},function(t,e,n){var r=n(20),o=n(54),i=n(42),a=n(102),u=n(173),s=n(174),c=s.get,f=s.enforce,l=String(String).split("String");(t.exports=function(t,e,n,u){var s,c=!!u&&!!u.unsafe,h=!!u&&!!u.enumerable,p=!!u&&!!u.noTargetGet;"function"==typeof n&&("string"!=typeof e||i(n,"name")||o(n,"name",e),(s=f(n)).source||(s.source=l.join("string"==typeof e?e:""))),t!==r?(c?!p&&t[e]&&(h=!0):delete t[e],h?t[e]=n:o(t,e,n)):h?t[e]=n:a(e,n);})(Function.prototype,"toString",(function(){return "function"==typeof this&&c(this).source||u(this)}));},function(t,e,n){var r=n(20),o=n(54);t.exports=function(t,e){try{o(r,t,e);}catch(n){r[t]=e;}return e};},function(t,e,n){var r=n(20),o=n(102),i=r["__core-js_shared__"]||o("__core-js_shared__",{});t.exports=i;},function(t,e,n){var r=n(251),o=n(103);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.15.1",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"});},function(t,e){t.exports={};},function(t,e,n){var r=n(254),o=n(20),i=function(t){return "function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?i(r[t])||i(o[t]):r[t]&&r[t][e]||o[t]&&o[t][e]};},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];},function(t,e,n){var r,o,i=n(260),a=n(261),u=n(104),s=n(262),c=n(174).get,f=n(266),l=n(267),h=RegExp.prototype.exec,p=u("native-string-replace",String.prototype.replace),d=h,v=(r=/a/,o=/b*/g,h.call(r,"a"),h.call(o,"a"),0!==r.lastIndex||0!==o.lastIndex),y=a.UNSUPPORTED_Y||a.BROKEN_CARET,g=void 0!==/()??/.exec("")[1];(v||g||y||f||l)&&(d=function(t){var e,n,r,o,a,u,f,l=this,m=c(l),b=m.raw;if(b)return b.lastIndex=l.lastIndex,e=d.call(b,t),l.lastIndex=b.lastIndex,e;var w=m.groups,x=y&&l.sticky,k=i.call(l),S=l.source,T=0,_=t;if(x&&(-1===(k=k.replace("y","")).indexOf("g")&&(k+="g"),_=String(t).slice(l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&"\n"!==t[l.lastIndex-1])&&(S="(?: "+S+")",_=" "+_,T++),n=new RegExp("^(?:"+S+")",k)),g&&(n=new RegExp("^"+S+"$(?!\\s)",k)),v&&(r=l.lastIndex),o=h.call(x?n:l,_),x?o?(o.input=o.input.slice(T),o[0]=o[0].slice(T),o.index=l.lastIndex,l.lastIndex+=o[0].length):l.lastIndex=0:v&&o&&(l.lastIndex=l.global?o.index+o[0].length:r),g&&o&&o.length>1&&p.call(o[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(o[a]=void 0);})),o&&w)for(o.groups=u=s(null),a=0;a<w.length;a++)u[(f=w[a])[0]]=o[f[1]];return o}),t.exports=d;},function(t,e,n){t.exports=n(287);},function(t,e,n){var r=n(139),o=n(92).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)};},function(t,e,n){var r=n(9);e.f=r;},function(t,e,n){t.exports=n(293);},function(t,e,n){t.exports=n(301);},function(t,e,n){t.exports=n(305);},function(t,e,n){var r=n(308);t.exports=function(t,e,n){return e in t?r(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){t.exports=n(318);},function(t,e,n){t.exports=n(342);},function(t,e,n){t.exports=n(350);},function(t,e,n){t.exports=n(387);},function(t,e,n){var r={};r[n(73)("toStringTag")]="z",t.exports="[object z]"===String(r);},function(t,e,n){var r=n(1),o=n(80),i=n(203),a=n(204);function u(e){var n="function"==typeof Map?new Map:void 0;return t.exports=u=function(t){if(null===t||!i(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e);}function e(){return a(t,arguments,r(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o(e,t)},t.exports.default=t.exports,t.exports.__esModule=!0,u(e)}t.exports=u,t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){var r=n(125),o=n(206),i=n(81),a=n(127);t.exports=function(t,e){return r(t)||o(t,e)||i(t,e)||a()},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e){var n="undefined"!=typeof self?self:this,r=function(){function t(){this.fetch=!1,this.DOMException=n.DOMException;}return t.prototype=n,new t}();!function(t){!function(e){var n="URLSearchParams"in t,r="Symbol"in t&&"iterator"in Symbol,o="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return !1}}(),i="FormData"in t,a="ArrayBuffer"in t;if(a)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(t){return t&&u.indexOf(Object.prototype.toString.call(t))>-1};function c(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function f(t){return "string"!=typeof t&&(t=String(t)),t}function l(t){var e={next:function(){var e=t.shift();return {done:void 0===e,value:e}}};return r&&(e[Symbol.iterator]=function(){return e}),e}function h(t){this.map={},t instanceof h?t.forEach((function(t,e){this.append(e,t);}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1]);}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e]);}),this);}function p(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0;}function d(t){return new Promise((function(e,n){t.onload=function(){e(t.result);},t.onerror=function(){n(t.error);};}))}function v(t){var e=new FileReader,n=d(e);return e.readAsArrayBuffer(t),n}function y(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:o&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:i&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:n&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():a&&o&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=y(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(t)||s(t))?this._bodyArrayBuffer=y(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"));},o&&(this.blob=function(){var t=p(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(v)}),this.text=function(){var t,e,n,r=p(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=d(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(t,e){t=c(t),e=f(e);var n=this.map[t];this.map[t]=n?n+", "+e:e;},h.prototype.delete=function(t){delete this.map[c(t)];},h.prototype.get=function(t){return t=c(t),this.has(t)?this.map[t]:null},h.prototype.has=function(t){return this.map.hasOwnProperty(c(t))},h.prototype.set=function(t,e){this.map[c(t)]=f(e);},h.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this);},h.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n);})),l(t)},h.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e);})),l(t)},h.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e]);})),l(t)},r&&(h.prototype[Symbol.iterator]=h.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(t,e){var n,r,o=(e=e||{}).body;if(t instanceof b){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new h(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0);}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new h(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),m.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o);}function w(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(o));}})),e}function x(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new h(e.headers),this.url=e.url||"",this._initBody(t);}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},g.call(b.prototype),g.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},x.error=function(){var t=new x(null,{status:0,statusText:""});return t.type="error",t};var k=[301,302,303,307,308];x.redirect=function(t,e){if(-1===k.indexOf(e))throw new RangeError("Invalid status code");return new x(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException;}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack;},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException;}function S(t,n){return new Promise((function(r,i){var a=new b(t,n);if(a.signal&&a.signal.aborted)return i(new e.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;function s(){u.abort();}u.onload=function(){var t,e,n={status:u.status,statusText:u.statusText,headers:(t=u.getAllResponseHeaders()||"",e=new h,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();e.append(r,o);}})),e)};n.url="responseURL"in u?u.responseURL:n.headers.get("X-Request-URL");var o="response"in u?u.response:u.responseText;r(new x(o,n));},u.onerror=function(){i(new TypeError("Network request failed"));},u.ontimeout=function(){i(new TypeError("Network request failed"));},u.onabort=function(){i(new e.DOMException("Aborted","AbortError"));},u.open(a.method,a.url,!0),"include"===a.credentials?u.withCredentials=!0:"omit"===a.credentials&&(u.withCredentials=!1),"responseType"in u&&o&&(u.responseType="blob"),a.headers.forEach((function(t,e){u.setRequestHeader(e,t);})),a.signal&&(a.signal.addEventListener("abort",s),u.onreadystatechange=function(){4===u.readyState&&a.signal.removeEventListener("abort",s);}),u.send(void 0===a._bodyInit?null:a._bodyInit);}))}S.polyfill=!0,t.fetch||(t.fetch=S,t.Headers=h,t.Request=b,t.Response=x),e.Headers=h,e.Request=b,e.Response=x,e.fetch=S,Object.defineProperty(e,"__esModule",{value:!0});}({});}(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var o=r;(e=o.fetch).default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,t.exports=e;},function(t,e,n){var r=function(t){var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"");}catch(t){u=function(t,e,n){return t[e]=n};}function s(t,e,n,r){var o=e&&e.prototype instanceof l?e:l,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return _()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=w(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return {value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg);}}}(t,n,a),i}function c(t,e,n){try{return {type:"normal",arg:t.call(e,n)}}catch(t){return {type:"throw",arg:t}}}t.wrap=s;var f={};function l(){}function h(){}function p(){}var d={};d[o]=function(){return this};var v=Object.getPrototypeOf,y=v&&v(v(T([])));y&&y!==e&&n.call(y,o)&&(d=y);var g=p.prototype=l.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}));}));}function b(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,u){var s=c(t[o],t,i);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==typeof l&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,u);}),(function(t){r("throw",t,a,u);})):e.resolve(l).then((function(t){f.value=t,a(f);}),(function(t){return r("throw",t,a,u)}))}u(s.arg);}(o,i,r,a);}))}return r=r?r.then(a,a):a()};}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method");}return f}var r=c(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,f;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0);}function T(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return {next:_}}function _(){return {value:void 0,done:!0}}return h.prototype=g.constructor=p,p.constructor=h,h.displayName=u(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return !!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return {__await:t}},m(b.prototype),b.prototype[i]=function(){return this},t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(g),u(g,a,"Generator"),g[o]=function(){return this},g.toString=function(){return "[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0);},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return "break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n);}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}(t.exports);try{regeneratorRuntime=r;}catch(t){Function("r","regeneratorRuntime = r")(r);}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){(function(t){
    /*!
     * The buffer module from node.js, for the browser.
     *
     * @author   Feross Aboukhadijeh <http://feross.org>
     * @license  MIT
     */
    var r=n(211),o=n(212),i=n(213);function a(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=s.prototype:(null===t&&(t=new s(e)),t.length=e),t}function s(t,e,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return "undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);s.TYPED_ARRAY_SUPPORT?(t=e).__proto__=s.prototype:t=h(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),o=(t=u(t,r)).write(e,n);o!==r&&(t=t.slice(0,o));return t}(t,e,n):function(t,e){if(s.isBuffer(e)){var n=0|p(e.length);return 0===(t=u(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return "number"!=typeof e.length||(r=e.length)!=r?u(t,0):h(t,e);if("Buffer"===e.type&&i(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function f(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e){if(f(e),t=u(t,e<0?0:0|p(e)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|p(e.length);t=u(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(s.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(t).length;default:if(r)return B(t).length;e=(""+e).toLowerCase(),r=!0;}}function v(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return "";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return "";if((n>>>=0)<=(e>>>=0))return "";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,n);case"utf8":case"utf-8":return O(this,e,n);case"ascii":return E(this,e,n);case"latin1":case"binary":return A(this,e,n);case"base64":return _(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0;}}function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r;}function g(t,e,n,r,o){if(0===t.length)return -1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return -1;n=t.length-1;}else if(n<0){if(!o)return -1;n=0;}if("string"==typeof e&&(e=s.from(e,r)),s.isBuffer(e))return 0===e.length?-1:m(t,e,n,r,o);if("number"==typeof e)return e&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,r,o){var i,a=1,u=t.length,s=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return -1;a=2,u/=2,s/=2,n/=2;}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){var f=-1;for(i=n;i<u;i++)if(c(t,i)===c(e,-1===f?0:i-f)){if(-1===f&&(f=i),i-f+1===s)return f*a}else-1!==f&&(i-=i-f),f=-1;}else for(n+s>u&&(n=u-s),i=n;i>=0;i--){for(var l=!0,h=0;h<s;h++)if(c(t,i+h)!==c(e,h)){l=!1;break}if(l)return i}return -1}function b(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var u=parseInt(e.substr(2*a,2),16);if(isNaN(u))return a;t[n+a]=u;}return a}function w(t,e,n,r){return K(B(e,t.length-n),t,n,r)}function x(t,e,n,r){return K(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function k(t,e,n,r){return x(t,e,n,r)}function S(t,e,n,r){return K(H(e),t,n,r)}function T(t,e,n,r){return K(function(t,e){for(var n,r,o,i=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function _(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function O(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i,a,u,s,c=t[o],f=null,l=c>239?4:c>223?3:c>191?2:1;if(o+l<=n)switch(l){case 1:c<128&&(f=c);break;case 2:128==(192&(i=t[o+1]))&&(s=(31&c)<<6|63&i)>127&&(f=s);break;case 3:i=t[o+1],a=t[o+2],128==(192&i)&&128==(192&a)&&(s=(15&c)<<12|(63&i)<<6|63&a)>2047&&(s<55296||s>57343)&&(f=s);break;case 4:i=t[o+1],a=t[o+2],u=t[o+3],128==(192&i)&&128==(192&a)&&128==(192&u)&&(s=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&u)>65535&&s<1114112&&(f=s);}null===f?(f=65533,l=1):f>65535&&(f-=65536,r.push(f>>>10&1023|55296),f=56320|1023&f),r.push(f),o+=l;}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=s,e.SlowBuffer=function(t){+t!=t&&(t=0);return s.alloc(+t)},e.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return !1}}(),e.kMaxLength=a(),s.poolSize=8192,s._augment=function(t){return t.__proto__=s.prototype,t},s.from=function(t,e,n){return c(null,t,e,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(t,e,n){return function(t,e,n,r){return f(e),e<=0?u(t,e):void 0!==n?"string"==typeof r?u(t,e).fill(n,r):u(t,e).fill(n):u(t,e)}(null,t,e,n)},s.allocUnsafe=function(t){return l(null,t)},s.allocUnsafeSlow=function(t){return l(null,t)},s.isBuffer=function(t){return !(null==t||!t._isBuffer)},s.compare=function(t,e){if(!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return !0;default:return !1}},s.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=s.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!s.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length;}return r},s.byteLength=d,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},s.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?O(this,0,t):v.apply(this,arguments)},s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},s.prototype.compare=function(t,e,n,r,o){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return -1;if(e>=n)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),u=Math.min(i,a),c=this.slice(r,o),f=t.slice(e,n),l=0;l<u;++l)if(c[l]!==f[l]){i=c[l],a=f[l];break}return i<a?-1:a<i?1:0},s.prototype.includes=function(t,e,n){return -1!==this.indexOf(t,e,n)},s.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},s.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},s.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0);}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return x(this,t,e,n);case"latin1":case"binary":return k(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0;}},s.prototype.toJSON=function(){return {type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function A(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function R(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=D(t[i]);return o}function P(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function j(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function C(t,e,n,r,o,i){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function I(t,e,n,r){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);o<i;++o)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o);}function M(t,e,n,r){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);o<i;++o)t[n+o]=e>>>8*(r?o:3-o)&255;}function U(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,r,i){return i||U(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,i){return i||U(t,0,n,8),o.write(t,e,n,r,52,8),n+8}s.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),s.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=s.prototype;else{var o=e-t;n=new s(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+t];}return n},s.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},s.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},s.prototype.readUInt8=function(t,e){return e||j(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return e||j(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return e||j(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return e||j(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,e){return e||j(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*e)),r},s.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},s.prototype.readInt8=function(t,e){return e||j(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){e||j(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(t,e){e||j(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(t,e){return e||j(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return e||j(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return e||j(t,4,this.length),o.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return e||j(t,4,this.length),o.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return e||j(t,8,this.length),o.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return e||j(t,8,this.length),o.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||C(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},s.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||C(this,t,e,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},s.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,1,255,0),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},s.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},s.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):M(this,t,e,!0),e+4},s.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},s.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);C(this,t,e,n,o-1,-o);}var i=0,a=1,u=0;for(this[e]=255&t;++i<n&&(a*=256);)t<0&&0===u&&0!==this[e+i-1]&&(u=1),this[e+i]=(t/a>>0)-u&255;return e+n},s.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);C(this,t,e,n,o-1,-o);}var i=n-1,a=1,u=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)t<0&&0===u&&0!==this[e+i+1]&&(u=1),this[e+i]=(t/a>>0)-u&255;return e+n},s.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,1,127,-128),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},s.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},s.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):M(this,t,e,!0),e+4},s.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},s.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},s.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},s.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},s.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},s.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o,i=r-n;if(this===t&&n<e&&e<r)for(o=i-1;o>=0;--o)t[o+e]=this[o+n];else if(i<1e3||!s.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},s.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o);}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{var a=s.isBuffer(t)?t:B(new s(t,r).toString()),u=a.length;for(i=0;i<n-e;++i)this[i+e]=a[i%u];}return this};var N=/[^+\/0-9A-Za-z-_]/g;function D(t){return t<16?"0"+t.toString(16):t.toString(16)}function B(t,e){var n;e=e||1/0;for(var r=t.length,o=null,i=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320);}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n);}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128);}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128);}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128);}}return i}function H(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(N,"")).length<2)return "";for(;t.length%4!=0;)t+="=";return t}(t))}function K(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}}).call(this,n(59));},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){n(220);var r=n(12).Object,o=t.exports=function(t,e,n){return r.defineProperty(t,e,n)};r.defineProperty.sham&&(o.sham=!0);},function(t,e,n){var r=n(14),o=n(11),i=n(84);t.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}));},function(t,e,n){var r=n(11),o=/#|\.prototype\./,i=function(t,e){var n=u[a(t)];return n==c||n!=s&&("function"==typeof e?r(e):!!e)},a=i.normalize=function(t){return String(t).replace(o,".").toLowerCase()},u=i.data={},s=i.NATIVE="N",c=i.POLYFILL="P";t.exports=i;},function(t,e,n){var r=n(223),o=Array.prototype;t.exports=function(t){var e=t.indexOf;return t===o||t instanceof Array&&e===o.indexOf?r:e};},function(t,e,n){var r=n(22),o=n(37),i=n(135),a=function(t){return function(e,n,a){var u,s=r(e),c=o(s.length),f=i(a,c);if(t&&n!=n){for(;c>f;)if((u=s[f++])!=u)return !0}else for(;c>f;f++)if((t||f in s)&&s[f]===n)return t||f||0;return !t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)};},function(t,e,n){var r=n(85),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)};},function(t,e,n){var r=n(11);t.exports=function(t,e){var n=[][t];return !!n&&r((function(){n.call(null,e||function(){throw 1},1);}))};},function(t,e,n){n(138),n(144),n(229),n(153),n(154),n(237),n(40),n(52);var r=n(12);t.exports=r.Promise;},function(t,e,n){var r=n(6),o=n(86),i=n(90),a=n(64),u=n(23),s=n(28),c=n(48),f=function(t,e){var n=this;if(!(n instanceof f))return new f(t,e);i&&(n=i(new Error(void 0),o(n))),void 0!==e&&u(n,"message",String(e));var r=[];return c(t,r.push,{that:r}),u(n,"errors",r),n};f.prototype=a(Error.prototype,{constructor:s(5,f),message:s(5,""),name:s(5,"AggregateError")}),r({global:!0},{AggregateError:f});},function(t,e,n){var r=n(18),o=n(22),i=n(134).indexOf,a=n(65);t.exports=function(t,e){var n,u=o(t),s=0,c=[];for(n in u)!r(a,n)&&r(u,n)&&c.push(n);for(;e.length>s;)r(u,n=e[s++])&&(~i(c,n)||c.push(n));return c};},function(t,e,n){var r=n(24);t.exports=r("document","documentElement");},function(t,e,n){var r=n(9),o=n(38),i=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||a[i]===t)};},function(t,e,n){var r=n(93);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator;},function(t,e,n){var r=n(15);t.exports=function(t){var e=t.return;if(void 0!==e)return r(e.call(t)).value};},function(t,e){},function(t,e,n){var r=n(10);t.exports=r.Promise;},function(t,e,n){var r=n(31);t.exports=function(t,e,n){for(var o in e)n&&n.unsafe&&t[o]?t[o]=e[o]:r(t,o,e[o],n);return t};},function(t,e,n){var r=n(88),o=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return o.call(t)}),t.exports=r.inspectSource;},function(t,e,n){var r=n(9)("iterator"),o=!1;try{var i=0,a={next:function(){return {done:!!i++}},return:function(){o=!0;}};a[r]=function(){return this},Array.from(a,(function(){throw 2}));}catch(t){}t.exports=function(t,e){if(!e&&!o)return !1;var n=!1;try{var i={};i[r]=function(){return {next:function(){return {done:n=!0}}}},t(i);}catch(t){}return n};},function(t,e,n){var r=n(15),o=n(35),i=n(9)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[i])?e:o(n)};},function(t,e,n){var r,o,i,a=n(10),u=n(11),s=n(34),c=n(140),f=n(84),l=n(151),h=n(97),p=a.location,d=a.setImmediate,v=a.clearImmediate,y=a.process,g=a.MessageChannel,m=a.Dispatch,b=0,w={},x=function(t){if(w.hasOwnProperty(t)){var e=w[t];delete w[t],e();}},k=function(t){return function(){x(t);}},S=function(t){x(t.data);},T=function(t){a.postMessage(t+"",p.protocol+"//"+p.host);};d&&v||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return w[++b]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e);},r(b),b},v=function(t){delete w[t];},h?r=function(t){y.nextTick(k(t));}:m&&m.now?r=function(t){m.now(k(t));}:g&&!l?(i=(o=new g).port2,o.port1.onmessage=S,r=s(i.postMessage,i,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&p&&"file:"!==p.protocol&&!u(T)?(r=T,a.addEventListener("message",S,!1)):r="onreadystatechange"in f("script")?function(t){c.appendChild(f("script")).onreadystatechange=function(){c.removeChild(this),x(t);};}:function(t){setTimeout(k(t),0);}),t.exports={set:d,clear:v};},function(t,e,n){var r=n(94);t.exports=/(?:iphone|ipod|ipad).*applewebkit/i.test(r);},function(t,e,n){var r=n(15),o=n(17),i=n(51);t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=i.f(t);return (0, n.resolve)(e),n.promise};},function(t,e,n){var r=n(6),o=n(35),i=n(51),a=n(67),u=n(48);r({target:"Promise",stat:!0},{allSettled:function(t){var e=this,n=i.f(e),r=n.resolve,s=n.reject,c=a((function(){var n=o(e.resolve),i=[],a=0,s=1;u(t,(function(t){var o=a++,u=!1;i.push(void 0),s++,n.call(e,t).then((function(t){u||(u=!0,i[o]={status:"fulfilled",value:t},--s||r(i));}),(function(t){u||(u=!0,i[o]={status:"rejected",reason:t},--s||r(i));}));})),--s||r(i);}));return c.error&&s(c.value),n.promise}});},function(t,e,n){var r=n(6),o=n(35),i=n(24),a=n(51),u=n(67),s=n(48);r({target:"Promise",stat:!0},{any:function(t){var e=this,n=a.f(e),r=n.resolve,c=n.reject,f=u((function(){var n=o(e.resolve),a=[],u=0,f=1,l=!1;s(t,(function(t){var o=u++,s=!1;a.push(void 0),f++,n.call(e,t).then((function(t){s||l||(l=!0,r(t));}),(function(t){s||l||(s=!0,a[o]=t,--f||c(new(i("AggregateError"))(a,"No one promise resolved")));}));})),--f||c(new(i("AggregateError"))(a,"No one promise resolved"));}));return f.error&&c(f.value),n.promise}});},function(t,e,n){var r=n(85),o=n(83),i=function(t){return function(e,n){var i,a,u=String(o(e)),s=r(n),c=u.length;return s<0||s>=c?t?"":void 0:(i=u.charCodeAt(s))<55296||i>56319||s+1===c||(a=u.charCodeAt(s+1))<56320||a>57343?t?u.charAt(s):i:t?u.slice(s,s+2):a-56320+(i-55296<<10)+65536}};t.exports={codeAt:i(!1),charAt:i(!0)};},function(t,e,n){var r=n(6),o=n(157),i=n(86),a=n(90),u=n(32),s=n(23),c=n(31),f=n(9),l=n(30),h=n(38),p=n(158),d=p.IteratorPrototype,v=p.BUGGY_SAFARI_ITERATORS,y=f("iterator"),g=function(){return this};t.exports=function(t,e,n,f,p,m,b){o(n,e,f);var w,x,k,S=function(t){if(t===p&&A)return A;if(!v&&t in O)return O[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},T=e+" Iterator",_=!1,O=t.prototype,E=O[y]||O["@@iterator"]||p&&O[p],A=!v&&E||S(p),R="Array"==e&&O.entries||E;if(R&&(w=i(R.call(new t)),d!==Object.prototype&&w.next&&(l||i(w)===d||(a?a(w,d):"function"!=typeof w[y]&&s(w,y,g)),u(w,T,!0,!0),l&&(h[T]=g))),"values"==p&&E&&"values"!==E.name&&(_=!0,A=function(){return E.call(this)}),l&&!b||O[y]===A||s(O,y,A),h[e]=A,p)if(x={values:S("values"),keys:m?A:S("keys"),entries:S("entries")},b)for(k in x)(v||_||!(k in O))&&c(O,k,x[k]);else r({target:e,proto:!0,forced:v||_},x);return x};},function(t,e,n){var r=n(158).IteratorPrototype,o=n(64),i=n(28),a=n(32),u=n(38),s=function(){return this};t.exports=function(t,e,n){var c=e+" Iterator";return t.prototype=o(r,{next:i(1,n)}),a(t,c,!1,!0),u[c]=s,t};},function(t,e,n){var r,o,i,a=n(11),u=n(86),s=n(23),c=n(18),f=n(9),l=n(30),h=f("iterator"),p=!1;[].keys&&("next"in(i=[].keys())?(o=u(u(i)))!==Object.prototype&&(r=o):p=!0);var d=null==r||a((function(){var t={};return r[h].call(t)!==t}));d&&(r={}),l&&!d||c(r,h)||s(r,h,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p};},function(t,e){t.exports=function(){};},function(t,e,n){var r=n(11),o=n(9),i=n(30),a=o("iterator");t.exports=!r((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,r){e.delete("b"),n+=r+t;})),i&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}));},function(t,e,n){var r=n(34),o=n(26),i=n(244),a=n(141),u=n(37),s=n(53),c=n(49);t.exports=function(t){var e,n,f,l,h,p,d=o(t),v="function"==typeof this?this:Array,y=arguments.length,g=y>1?arguments[1]:void 0,m=void 0!==g,b=c(d),w=0;if(m&&(g=r(g,y>2?arguments[2]:void 0,2)),null==b||v==Array&&a(b))for(n=new v(e=u(d.length));e>w;w++)p=m?g(d[w],w):d[w],s(n,w,p);else for(h=(l=b.call(d)).next,n=new v;!(f=h.call(l)).done;w++)p=m?i(l,g,[f.value,w],!0):f.value,s(n,w,p);return n.length=w,n};},function(t,e,n){n(98);var r=n(6),o=n(24),i=n(160),a=n(31),u=n(146),s=n(32),c=n(157),f=n(39),l=n(96),h=n(18),p=n(34),d=n(50),v=n(15),y=n(17),g=n(64),m=n(28),b=n(163),w=n(49),x=n(9),k=o("fetch"),S=o("Headers"),T=x("iterator"),_=f.set,O=f.getterFor("URLSearchParams"),E=f.getterFor("URLSearchParamsIterator"),A=/\+/g,R=Array(4),P=function(t){return R[t-1]||(R[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},j=function(t){try{return decodeURIComponent(t)}catch(e){return t}},C=function(t){var e=t.replace(A," "),n=4;try{return decodeURIComponent(e)}catch(t){for(;n;)e=e.replace(P(n--),j);return e}},I=/[!'()~]|%20/g,M={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},U=function(t){return M[t]},L=function(t){return encodeURIComponent(t).replace(I,U)},F=function(t,e){if(e)for(var n,r,o=e.split("&"),i=0;i<o.length;)(n=o[i++]).length&&(r=n.split("="),t.push({key:C(r.shift()),value:C(r.join("="))}));},N=function(t){this.entries.length=0,F(this.entries,t);},D=function(t,e){if(t<e)throw TypeError("Not enough arguments")},B=c((function(t,e){_(this,{type:"URLSearchParamsIterator",iterator:b(O(t).entries),kind:e});}),"Iterator",(function(){var t=E(this),e=t.kind,n=t.iterator.next(),r=n.value;return n.done||(n.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),n})),H=function(){l(this,H,"URLSearchParams");var t,e,n,r,o,i,a,u,s,c=arguments.length>0?arguments[0]:void 0,f=this,p=[];if(_(f,{type:"URLSearchParams",entries:p,updateURL:function(){},updateSearchParams:N}),void 0!==c)if(y(c))if("function"==typeof(t=w(c)))for(n=(e=t.call(c)).next;!(r=n.call(e)).done;){if((a=(i=(o=b(v(r.value))).next).call(o)).done||(u=i.call(o)).done||!i.call(o).done)throw TypeError("Expected sequence with length 2");p.push({key:a.value+"",value:u.value+""});}else for(s in c)h(c,s)&&p.push({key:s,value:c[s]+""});else F(p,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"");},K=H.prototype;u(K,{append:function(t,e){D(arguments.length,2);var n=O(this);n.entries.push({key:t+"",value:e+""}),n.updateURL();},delete:function(t){D(arguments.length,1);for(var e=O(this),n=e.entries,r=t+"",o=0;o<n.length;)n[o].key===r?n.splice(o,1):o++;e.updateURL();},get:function(t){D(arguments.length,1);for(var e=O(this).entries,n=t+"",r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){D(arguments.length,1);for(var e=O(this).entries,n=t+"",r=[],o=0;o<e.length;o++)e[o].key===n&&r.push(e[o].value);return r},has:function(t){D(arguments.length,1);for(var e=O(this).entries,n=t+"",r=0;r<e.length;)if(e[r++].key===n)return !0;return !1},set:function(t,e){D(arguments.length,1);for(var n,r=O(this),o=r.entries,i=!1,a=t+"",u=e+"",s=0;s<o.length;s++)(n=o[s]).key===a&&(i?o.splice(s--,1):(i=!0,n.value=u));i||o.push({key:a,value:u}),r.updateURL();},sort:function(){var t,e,n,r=O(this),o=r.entries,i=o.slice();for(o.length=0,n=0;n<i.length;n++){for(t=i[n],e=0;e<n;e++)if(o[e].key>t.key){o.splice(e,0,t);break}e===n&&o.push(t);}r.updateURL();},forEach:function(t){for(var e,n=O(this).entries,r=p(t,arguments.length>1?arguments[1]:void 0,3),o=0;o<n.length;)r((e=n[o++]).value,e.key,this);},keys:function(){return new B(this,"keys")},values:function(){return new B(this,"values")},entries:function(){return new B(this,"entries")}},{enumerable:!0}),a(K,T,K.entries),a(K,"toString",(function(){for(var t,e=O(this).entries,n=[],r=0;r<e.length;)t=e[r++],n.push(L(t.key)+"="+L(t.value));return n.join("&")}),{enumerable:!0}),s(H,"URLSearchParams"),r({global:!0,forced:!i},{URLSearchParams:H}),i||"function"!=typeof k||"function"!=typeof S||r({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var e,n,r,o=[t];return arguments.length>1&&(y(e=arguments[1])&&(n=e.body,"URLSearchParams"===d(n)&&((r=e.headers?new S(e.headers):new S).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e=g(e,{body:m(0,String(n)),headers:m(0,r)}))),o.push(e)),k.apply(this,o)}}),t.exports={URLSearchParams:H,getState:O};},function(t,e,n){var r=n(15),o=n(49);t.exports=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return r(e.call(t))};},function(t,e,n){var r=n(165),o=n(108);r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o});},function(t,e,n){var r=n(20),o=n(166).f,i=n(54),a=n(101),u=n(102),s=n(252),c=n(259);t.exports=function(t,e){var n,f,l,h,p,d=t.target,v=t.global,y=t.stat;if(n=v?r:y?r[d]||u(d,{}):(r[d]||{}).prototype)for(f in e){if(h=e[f],l=t.noTargetGet?(p=o(n,f))&&p.value:n[f],!c(v?f:d+(y?".":"#")+f,t.forced)&&void 0!==l){if(typeof h==typeof l)continue;s(h,l);}(t.sham||l&&l.sham)&&i(h,"sham",!0),a(n,f,h,t);}};},function(t,e,n){var r=n(41),o=n(249),i=n(167),a=n(68),u=n(169),s=n(42),c=n(171),f=Object.getOwnPropertyDescriptor;e.f=r?f:function(t,e){if(t=a(t),e=u(e,!0),c)try{return f(t,e)}catch(t){}if(s(t,e))return i(!o.f.call(t,e),t[e])};},function(t,e){t.exports=function(t,e){return {enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}};},function(t,e,n){var r=n(21),o=n(100),i="".split;t.exports=r((function(){return !Object("z").propertyIsEnumerable(0)}))?function(t){return "String"==o(t)?i.call(t,""):Object(t)}:Object;},function(t,e,n){var r=n(70);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")};},function(t,e,n){var r=n(69);t.exports=function(t){return Object(r(t))};},function(t,e,n){var r=n(41),o=n(21),i=n(172);t.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}));},function(t,e,n){var r=n(20),o=n(70),i=r.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}};},function(t,e,n){var r=n(103),o=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return o.call(t)}),t.exports=r.inspectSource;},function(t,e,n){var r,o,i,a=n(250),u=n(20),s=n(70),c=n(54),f=n(42),l=n(103),h=n(175),p=n(105),d=u.WeakMap;if(a||l.state){var v=l.state||(l.state=new d),y=v.get,g=v.has,m=v.set;r=function(t,e){if(g.call(v,t))throw new TypeError("Object already initialized");return e.facade=t,m.call(v,t,e),e},o=function(t){return y.call(v,t)||{}},i=function(t){return g.call(v,t)};}else{var b=h("state");p[b]=!0,r=function(t,e){if(f(t,b))throw new TypeError("Object already initialized");return e.facade=t,c(t,b,e),e},o=function(t){return f(t,b)?t[b]:{}},i=function(t){return f(t,b)};}t.exports={set:r,get:o,has:i,enforce:function(t){return i(t)?o(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!s(e)||(n=o(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}};},function(t,e,n){var r=n(104),o=n(176),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))};},function(t,e){var n=0,r=Math.random();t.exports=function(t){return "Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)};},function(t,e,n){var r=n(42),o=n(68),i=n(256).indexOf,a=n(105);t.exports=function(t,e){var n,u=o(t),s=0,c=[];for(n in u)!r(a,n)&&r(u,n)&&c.push(n);for(;e.length>s;)r(u,n=e[s++])&&(~i(c,n)||c.push(n));return c};},function(t,e,n){var r=n(72),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0};},function(t,e,n){var r=n(268),o=n(21);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return !String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}));},function(t,e,n){t.exports=n(282);},function(t,e,n){n(286);var r=n(12);t.exports=r.Object.keys;},function(t,e,n){n(183);var r=n(12);t.exports=r.Object.getOwnPropertySymbols;},function(t,e,n){var r=n(6),o=n(10),i=n(24),a=n(30),u=n(14),s=n(93),c=n(142),f=n(11),l=n(18),h=n(55),p=n(17),d=n(15),v=n(26),y=n(22),g=n(62),m=n(28),b=n(64),w=n(47),x=n(110),k=n(288),S=n(99),T=n(45),_=n(27),O=n(60),E=n(23),A=n(31),R=n(87),P=n(63),j=n(65),C=n(89),I=n(9),M=n(111),U=n(7),L=n(32),F=n(39),N=n(56).forEach,D=P("hidden"),B=I("toPrimitive"),H=F.set,K=F.getterFor("Symbol"),q=Object.prototype,V=o.Symbol,z=i("JSON","stringify"),Y=T.f,G=_.f,J=k.f,$=O.f,W=R("symbols"),X=R("op-symbols"),Z=R("string-to-symbol-registry"),Q=R("symbol-to-string-registry"),tt=R("wks"),et=o.QObject,nt=!et||!et.prototype||!et.prototype.findChild,rt=u&&f((function(){return 7!=b(G({},"a",{get:function(){return G(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=Y(q,e);r&&delete q[e],G(t,e,n),r&&t!==q&&G(q,e,r);}:G,ot=function(t,e){var n=W[t]=b(V.prototype);return H(n,{type:"Symbol",tag:t,description:e}),u||(n.description=e),n},it=c?function(t){return "symbol"==typeof t}:function(t){return Object(t)instanceof V},at=function(t,e,n){t===q&&at(X,e,n),d(t);var r=g(e,!0);return d(n),l(W,r)?(n.enumerable?(l(t,D)&&t[D][r]&&(t[D][r]=!1),n=b(n,{enumerable:m(0,!1)})):(l(t,D)||G(t,D,m(1,{})),t[D][r]=!0),rt(t,r,n)):G(t,r,n)},ut=function(t,e){d(t);var n=y(e),r=w(n).concat(lt(n));return N(r,(function(e){u&&!st.call(n,e)||at(t,e,n[e]);})),t},st=function(t){var e=g(t,!0),n=$.call(this,e);return !(this===q&&l(W,e)&&!l(X,e))&&(!(n||!l(this,e)||!l(W,e)||l(this,D)&&this[D][e])||n)},ct=function(t,e){var n=y(t),r=g(e,!0);if(n!==q||!l(W,r)||l(X,r)){var o=Y(n,r);return !o||!l(W,r)||l(n,D)&&n[D][r]||(o.enumerable=!0),o}},ft=function(t){var e=J(y(t)),n=[];return N(e,(function(t){l(W,t)||l(j,t)||n.push(t);})),n},lt=function(t){var e=t===q,n=J(e?X:y(t)),r=[];return N(n,(function(t){!l(W,t)||e&&!l(q,t)||r.push(W[t]);})),r};(s||(A((V=function(){if(this instanceof V)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=C(t),n=function(t){this===q&&n.call(X,t),l(this,D)&&l(this[D],e)&&(this[D][e]=!1),rt(this,e,m(1,t));};return u&&nt&&rt(q,e,{configurable:!0,set:n}),ot(e,t)}).prototype,"toString",(function(){return K(this).tag})),A(V,"withoutSetter",(function(t){return ot(C(t),t)})),O.f=st,_.f=at,T.f=ct,x.f=k.f=ft,S.f=lt,M.f=function(t){return ot(I(t),t)},u&&(G(V.prototype,"description",{configurable:!0,get:function(){return K(this).description}}),a||A(q,"propertyIsEnumerable",st,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!s,sham:!s},{Symbol:V}),N(w(tt),(function(t){U(t);})),r({target:"Symbol",stat:!0,forced:!s},{for:function(t){var e=String(t);if(l(Z,e))return Z[e];var n=V(e);return Z[e]=n,Q[n]=e,n},keyFor:function(t){if(!it(t))throw TypeError(t+" is not a symbol");if(l(Q,t))return Q[t]},useSetter:function(){nt=!0;},useSimple:function(){nt=!1;}}),r({target:"Object",stat:!0,forced:!s,sham:!u},{create:function(t,e){return void 0===e?b(t):ut(b(t),e)},defineProperty:at,defineProperties:ut,getOwnPropertyDescriptor:ct}),r({target:"Object",stat:!0,forced:!s},{getOwnPropertyNames:ft,getOwnPropertySymbols:lt}),r({target:"Object",stat:!0,forced:f((function(){S.f(1);}))},{getOwnPropertySymbols:function(t){return S.f(v(t))}}),z)&&r({target:"JSON",stat:!0,forced:!s||f((function(){var t=V();return "[null]"!=z([t])||"{}"!=z({a:t})||"{}"!=z(Object(t))}))},{stringify:function(t,e,n){for(var r,o=[t],i=1;arguments.length>i;)o.push(arguments[i++]);if(r=e,(p(e)||void 0!==t)&&!it(t))return h(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!it(e))return e}),o[1]=e,z.apply(null,o)}});V.prototype[B]||E(V.prototype,B,V.prototype.valueOf),L(V,"Symbol"),j[D]=!0;},function(t,e,n){var r=n(17),o=n(55),i=n(9)("species");t.exports=function(t,e){var n;return o(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!o(n.prototype)?r(n)&&null===(n=n[i])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)};},function(t,e,n){var r=n(314),o=n(317),i=n(191),a=n(349);t.exports=function(t,e){return r(t)||o(t,e)||i(t,e)||a()},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){t.exports=n(315);},function(t,e,n){n(316);var r=n(12);t.exports=r.Array.isArray;},function(t,e,n){n(189),n(144),n(183),n(319),n(320),n(321),n(322),n(190),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334);var r=n(12);t.exports=r.Symbol;},function(t,e,n){var r=n(6),o=n(11),i=n(55),a=n(17),u=n(26),s=n(37),c=n(53),f=n(184),l=n(77),h=n(9),p=n(66),d=h("isConcatSpreadable"),v=p>=51||!o((function(){var t=[];return t[d]=!1,t.concat()[0]!==t})),y=l("concat"),g=function(t){if(!a(t))return !1;var e=t[d];return void 0!==e?!!e:i(t)};r({target:"Array",proto:!0,forced:!v||!y},{concat:function(t){var e,n,r,o,i,a=u(this),l=f(a,0),h=0;for(e=-1,r=arguments.length;e<r;e++)if(g(i=-1===e?a:arguments[e])){if(h+(o=s(i.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<o;n++,h++)n in i&&c(l,h,i[n]);}else{if(h>=9007199254740991)throw TypeError("Maximum allowed index exceeded");c(l,h++,i);}return l.length=h,l}});},function(t,e,n){n(7)("iterator");},function(t,e,n){var r=n(343),o=n(193),i=n(195);t.exports=function(t,e){var n;if(t){if("string"==typeof t)return i(t,e);var a=r(n=Object.prototype.toString.call(t)).call(n,8,-1);return "Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?o(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?i(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){var r=n(345),o=Array.prototype;t.exports=function(t){var e=t.slice;return t===o||t instanceof Array&&e===o.slice?r:e};},function(t,e,n){t.exports=n(347);},function(t,e,n){n(40),n(348);var r=n(12);t.exports=r.Array.from;},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){t.exports=n(354);},function(t,e,n){t.exports=n(358);},function(t,e,n){var r=n(16),o=n(19);r(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n(36));n(58);var a=o(n(363)),u=o(n(46)),s=o(n(44)),c=o(n(368)),f=n(372),l=function(t,e){var n,r,o=t,l=(0, f.parseIdxResponse)(t,e),h=l.remediations,p=l.context,d=l.actions,v=(0, c.default)(h),y=function(){var t=(0, s.default)(i.default.mark((function t(e){var n,r,o=arguments;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:{},r=(0, a.default)(h).call(h,(function(t){return t.name===e}))){t.next=4;break}return t.abrupt("return",u.default.reject("Unknown remediation choice: [".concat(e,"]")));case 4:return t.abrupt("return",r.action(n));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=null===(n=o.successWithInteractionCode)||void 0===n?void 0:(0, a.default)(r=n.value).call(r,(function(t){return "interaction_code"===t.name})).value;return {proceed:y,neededToProceed:v,actions:d,context:p,rawIdxState:o,hasInteractionCode:function(){return !!o.successWithInteractionCode},interactionCode:g,toPersist:e}};e.default=l;},function(t,e,n){t.exports=n(376);},function(t,e,n){t.exports=n(384);},function(t,e,n){var r=n(75),o=n(109),i=n(76),a=n(112),u=n(57),s=n(113),c=n(114),f=n(16),l=n(19);f(e,"__esModule",{value:!0}),e.default=void 0,n(58);var h=l(n(36)),p=l(n(180)),d=l(n(46)),v=l(n(115)),y=l(n(44)),g=n(74),m=n(389),b=l(n(198));function w(t,e){var n=r(t);if(o){var u=o(t);e&&(u=i(u).call(u,(function(e){return a(t,e).enumerable}))),n.push.apply(n,u);}return n}function x(t){for(var e=1;e<arguments.length;e++){var n,r=null!=arguments[e]?arguments[e]:{};if(e%2)u(n=w(Object(r),!0)).call(n,(function(e){(0, v.default)(t,e,r[e]);}));else if(s)c(t,s(r));else{var o;u(o=w(Object(r))).call(o,(function(e){f(t,e,a(r,e));}));}}return t}var k=function(t){var e=t.actionDefinition,n=t.defaultParamsForAction,r=void 0===n?{}:n,o=t.immutableParamsForAction,i=void 0===o?{}:o,a=t.toPersist,u=e.href;return function(){var t=(0, y.default)(h.default.mark((function t(n){var o,s;return h.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={"content-type":"application/json",accept:e.accepts||"application/ion+json"},s=(0, p.default)(x(x(x({},r),n),i)),t.abrupt("return",(0, g.request)(u,{method:e.method,headers:o,body:s}).then((function(t){var e=t.json();return t.ok?e:401===t.status&&'Oktadevicejwt realm="Okta Device"'===t.headers.get("WWW-Authenticate")?e.then((function(t){return d.default.reject((0, b.default)(t,a))})):e.then((function(t){return d.default.reject(t)}))})).then((function(t){return (0, b.default)(t,a)})));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=function(t,e){var n=k,r=(0, m.divideActionParamsByMutability)(t),o=r.defaultParams,i=r.neededParams,a=r.immutableParams,u=n({actionDefinition:t,defaultParamsForAction:o[t.name],immutableParamsForAction:a[t.name],toPersist:e});return u.neededParams=i,u};e.default=S;},function(t,e,n){(function(t){var r=n(25),o=n.n(r),i=n(123),a=n.n(i);e.a=function(e,n,r){var i=r.data,u=r.headers||{};"application/json"===(u["Content-Type"]||u["content-type"]||"")&&i&&"string"!=typeof i&&(i=JSON.stringify(i));var s=(t.fetch||a.a)(n,{method:e,headers:r.headers,body:i,credentials:r.withCredentials?"include":"omit"});return s.finally||(s=Promise.resolve(s)),s.then((function(t){var e=!t.ok,n=t.status;return function(t){return t.headers.get("Content-Type")&&t.headers.get("Content-Type").toLowerCase().indexOf("application/json")>=0?t.json().catch((function(t){return {error:t,errorSummary:"Could not parse server response"}})):t.text()}(t).then((function(t){return function(t,e){var n="object"===o()(e),r={responseText:n?JSON.stringify(e):e,status:t};return n&&(r.responseType="json",r.responseJSON=e),r}(n,t)})).then((function(t){if(e)throw t;return t}))}))};}).call(this,n(59));},function(t,e){t.exports=function(t){return -1!==Function.toString.call(t).indexOf("[native code]")},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){var r=n(80),o=n(205);function i(e,n,a){return o()?(t.exports=i=Reflect.construct,t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=i=function(t,e,n){var o=[null];o.push.apply(o,e);var i=new(Function.bind.apply(t,o));return n&&r(i,n.prototype),i},t.exports.default=t.exports,t.exports.__esModule=!0),i.apply(null,arguments)}t.exports=i,t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e){t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t;}finally{try{a||null==n.return||n.return();}finally{if(u)throw o}}return i}},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){var r,o;
    /*!
     * JavaScript Cookie v2.2.1
     * https://github.com/js-cookie/js-cookie
     *
     * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
     * Released under the MIT license
     */!function(i){if(void 0===(o="function"==typeof(r=i)?r.call(e,n,e,t):r)||(t.exports=o),t.exports=i(),!!0);}((function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r];}return e}function e(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function i(e,n,i){if("undefined"!=typeof document){"number"==typeof(i=t({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a);}catch(t){}n=r.write?r.write(n,e):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var u="";for(var s in i)i[s]&&(u+="; "+s,!0!==i[s]&&(u+="="+i[s].split(";")[0]));return document.cookie=e+"="+n+u}}function a(t,n){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var u=i[a].split("="),s=u.slice(1).join("=");n||'"'!==s.charAt(0)||(s=s.slice(1,-1));try{var c=e(u[0]);if(s=(r.read||r)(s,c)||e(s),n)try{s=JSON.parse(s);}catch(t){}if(o[c]=s,t===c)break}catch(t){}}return t?o[t]:o}}return o.set=i,o.get=function(t){return a(t,!1)},o.getJSON=function(t){return a(t,!0)},o.remove=function(e,n){i(e,"",t(n,{expires:-1}));},o.defaults={},o.withConverter=n,o}((function(){}))}));},function(t,e,n){var r=n(2),o=n(3),i=n(4),a=n(5),u=n(1);function s(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return {s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return {s:function(){n=n.call(t);},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t;},f:function(){try{a||null==n.return||n.return();}finally{if(u)throw i}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}();return function(){var n,r=u(t);if(e){var o=u(this).constructor;n=Reflect.construct(r,arguments,o);}else n=r.apply(this,arguments);return a(this,n)}}var l=function(t){i(n,t);var e=f(n);function n(t){var o;return r(this,n),(o=e.call(this,t||"Promise was canceled")).name="CancelError",o}return o(n,[{key:"isCanceled",get:function(){return !0}}]),n}(n(121)(Error)),h=function(){function t(e){var n=this;r(this,t),this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((function(t,r){n._reject=r;var o=function(t){if(!n._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");n._cancelHandlers.push(t);};return Object.defineProperties(o,{shouldReject:{get:function(){return n._rejectOnCancel},set:function(t){n._rejectOnCancel=t;}}}),e((function(e){n._isCanceled&&o.shouldReject||(n._isPending=!1,t(e));}),(function(t){n._isPending=!1,r(t);}),o)}));}return o(t,[{key:"then",value:function(t,e){return this._promise.then(t,e)}},{key:"catch",value:function(t){return this._promise.catch(t)}},{key:"finally",value:function(t){return this._promise.finally(t)}},{key:"cancel",value:function(t){if(this._isPending&&!this._isCanceled){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{var e,n=s(this._cancelHandlers);try{for(n.s();!(e=n.n()).done;){(0,e.value)();}}catch(t){n.e(t);}finally{n.f();}}catch(t){return void this._reject(t)}this._rejectOnCancel&&this._reject(new l(t));}}},{key:"isCanceled",get:function(){return this._isCanceled}}],[{key:"fn",value:function(e){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return new t((function(t,n,o){r.push(o),e.apply(void 0,r).then(t,n);}))}}}]),t}();Object.setPrototypeOf(h.prototype,Promise.prototype),t.exports=h,t.exports.CancelError=l;},function(t,e,n){(function(){(t.exports=n(210)).version="5.1.2";}).call(this);},function(t,e,n){(function(e){var r=n(25),o=n(8),i=n(122),a=n(216),u=n(2),s=n(3),c=n(78),f=n(4),l=n(5),h=n(1);function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}();return function(){var n,r=h(t);if(e){var o=h(this).constructor;n=Reflect.construct(r,arguments,o);}else n=r.apply(this,arguments);return l(this,n)}}(function(){var h,d,v=[].splice,y=function(t,e){if(!(t instanceof e))throw new Error("Bound instance method accessed before binding")},g=[].indexOf;d=n(217),h=n(218).EventEmitter,t.exports=function(){var t=function(t){f(h,t);var n=p(h);function h(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u(this,h),(t=n.call(this)).get=t.get.bind(c(t)),t.mget=t.mget.bind(c(t)),t.set=t.set.bind(c(t)),t.mset=t.mset.bind(c(t)),t.del=t.del.bind(c(t)),t.take=t.take.bind(c(t)),t.ttl=t.ttl.bind(c(t)),t.getTtl=t.getTtl.bind(c(t)),t.keys=t.keys.bind(c(t)),t.has=t.has.bind(c(t)),t.getStats=t.getStats.bind(c(t)),t.flushAll=t.flushAll.bind(c(t)),t.flushStats=t.flushStats.bind(c(t)),t.close=t.close.bind(c(t)),t._checkData=t._checkData.bind(c(t)),t._check=t._check.bind(c(t)),t._isInvalidKey=t._isInvalidKey.bind(c(t)),t._wrap=t._wrap.bind(c(t)),t._getValLength=t._getValLength.bind(c(t)),t._error=t._error.bind(c(t)),t._initErrors=t._initErrors.bind(c(t)),t.options=e,t._initErrors(),t.data={},t.options=Object.assign({forceString:!1,objectValueSize:80,promiseValueSize:80,arrayValueSize:40,stdTTL:0,checkperiod:600,useClones:!0,deleteOnExpire:!0,enableLegacyCallbacks:!1,maxKeys:-1},t.options),t.options.enableLegacyCallbacks&&(console.warn("WARNING! node-cache legacy callback support will drop in v6.x"),["get","mget","set","del","ttl","getTtl","keys","has"].forEach((function(e){var n;n=t[e],t[e]=function(){for(var t,e,r=arguments.length,u=new Array(r),s=0;s<r;s++)u[s]=arguments[s];if(u=a(u).slice(0),t=v.call(u,-1),"function"!=typeof(e=i(t,1)[0]))return n.apply(void 0,o(u).concat([e]));try{e(null,n.apply(void 0,o(u)));}catch(t){e(t);}};}))),t.stats={hits:0,misses:0,keys:0,ksize:0,vsize:0},t.validKeyTypes=["string","number"],t._checkData(),l(t)}return s(h,[{key:"get",value:function(t){var e;if(y(this,h),null!=(e=this._isInvalidKey(t)))throw e;return null!=this.data[t]&&this._check(t,this.data[t])?(this.stats.hits++,this._unwrap(this.data[t])):void this.stats.misses++}},{key:"mget",value:function(t){var e,n,r,o,i;if(y(this,h),!Array.isArray(t))throw this._error("EKEYSTYPE");for(i={},n=0,o=t.length;n<o;n++){if(r=t[n],null!=(e=this._isInvalidKey(r)))throw e;null!=this.data[r]&&this._check(r,this.data[r])?(this.stats.hits++,i[r]=this._unwrap(this.data[r])):this.stats.misses++;}return i}},{key:"set",value:function(t,e,n){var o,i;if(y(this,h),this.options.maxKeys>-1&&this.stats.keys>=this.options.maxKeys)throw this._error("ECACHEFULL");if(this.options.forceString&&"string"===!r(e)&&(e=JSON.stringify(e)),null==n&&(n=this.options.stdTTL),null!=(o=this._isInvalidKey(t)))throw o;return i=!1,this.data[t]&&(i=!0,this.stats.vsize-=this._getValLength(this._unwrap(this.data[t],!1))),this.data[t]=this._wrap(e,n),this.stats.vsize+=this._getValLength(e),i||(this.stats.ksize+=this._getKeyLength(t),this.stats.keys++),this.emit("set",t,e),!0}},{key:"mset",value:function(t){var e,n,r,o,i,a,u,s;if(y(this,h),this.options.maxKeys>-1&&this.stats.keys+t.length>=this.options.maxKeys)throw this._error("ECACHEFULL");for(n=0,i=t.length;n<i;n++){var c=t[n];if(o=c.key,s=c.val,(u=c.ttl)&&"number"!=typeof u)throw this._error("ETTLTYPE");if(null!=(e=this._isInvalidKey(o)))throw e}for(r=0,a=t.length;r<a;r++){var f=t[r];o=f.key,s=f.val,u=f.ttl,this.set(o,s,u);}return !0}},{key:"del",value:function(t){var e,n,r,o,i,a;for(y(this,h),Array.isArray(t)||(t=[t]),e=0,r=0,i=t.length;r<i;r++){if(o=t[r],null!=(n=this._isInvalidKey(o)))throw n;null!=this.data[o]&&(this.stats.vsize-=this._getValLength(this._unwrap(this.data[o],!1)),this.stats.ksize-=this._getKeyLength(o),this.stats.keys--,e++,a=this.data[o],delete this.data[o],this.emit("del",o,a.v));}return e}},{key:"take",value:function(t){var e;return y(this,h),null!=(e=this.get(t))&&this.del(t),e}},{key:"ttl",value:function(t,e){var n;if(y(this,h),e||(e=this.options.stdTTL),!t)return !1;if(null!=(n=this._isInvalidKey(t)))throw n;return !(null==this.data[t]||!this._check(t,this.data[t]))&&(e>=0?this.data[t]=this._wrap(this.data[t].v,e,!1):this.del(t),!0)}},{key:"getTtl",value:function(t){var e;if(y(this,h),t){if(null!=(e=this._isInvalidKey(t)))throw e;return null!=this.data[t]&&this._check(t,this.data[t])?this.data[t].t:void 0}}},{key:"keys",value:function(){return y(this,h),Object.keys(this.data)}},{key:"has",value:function(t){return y(this,h),null!=this.data[t]&&this._check(t,this.data[t])}},{key:"getStats",value:function(){return y(this,h),this.stats}},{key:"flushAll",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];y(this,h),this.data={},this.stats={hits:0,misses:0,keys:0,ksize:0,vsize:0},this._killCheckPeriod(),this._checkData(t),this.emit("flush");}},{key:"flushStats",value:function(){y(this,h),this.stats={hits:0,misses:0,keys:0,ksize:0,vsize:0},this.emit("flush_stats");}},{key:"close",value:function(){y(this,h),this._killCheckPeriod();}},{key:"_checkData",value:function(){var t,e,n,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(t in y(this,h),e=this.data)n=e[t],this._check(t,n);r&&this.options.checkperiod>0&&(this.checkTimeout=setTimeout(this._checkData,1e3*this.options.checkperiod,r),null!=this.checkTimeout&&null!=this.checkTimeout.unref&&this.checkTimeout.unref());}},{key:"_killCheckPeriod",value:function(){if(null!=this.checkTimeout)return clearTimeout(this.checkTimeout)}},{key:"_check",value:function(t,e){var n;return y(this,h),n=!0,0!==e.t&&e.t<Date.now()&&(this.options.deleteOnExpire&&(n=!1,this.del(t)),this.emit("expired",t,this._unwrap(e))),n}},{key:"_isInvalidKey",value:function(t){var e;if(y(this,h),e=r(t),g.call(this.validKeyTypes,e)<0)return this._error("EKEYTYPE",{type:r(t)})}},{key:"_wrap",value:function(t,e){var n,r,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return y(this,h),this.options.useClones||(o=!1),n=Date.now(),r=1e3,{t:0===e?0:e?n+e*r:0===this.options.stdTTL?this.options.stdTTL:n+this.options.stdTTL*r,v:o?d(t):t}}},{key:"_unwrap",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.options.useClones||(e=!1),null!=t.v?e?d(t.v):t.v:null}},{key:"_getKeyLength",value:function(t){return t.toString().length}},{key:"_getValLength",value:function(t){return y(this,h),"string"==typeof t?t.length:this.options.forceString?JSON.stringify(t).length:Array.isArray(t)?this.options.arrayValueSize*t.length:"number"==typeof t?8:"function"==typeof(null!=t?t.then:void 0)?this.options.promiseValueSize:(null!=e?e.isBuffer(t):void 0)?t.length:null!=t&&"object"===r(t)?this.options.objectValueSize*Object.keys(t).length:"boolean"==typeof t?8:0}},{key:"_error",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return y(this,h),(e=new Error).name=t,e.errorcode=t,e.message=null!=this.ERRORS[t]?this.ERRORS[t](n):"-",e.data=n,e}},{key:"_initErrors",value:function(){var t,e,n;for(e in y(this,h),this.ERRORS={},n=this._ERRORS)t=n[e],this.ERRORS[e]=this.createErrorMessage(t);}},{key:"createErrorMessage",value:function(t){return function(e){return t.replace("__key",e.type)}}}]),h}(h);return t.prototype._ERRORS={ENOTFOUND:"Key `__key` not found",ECACHEFULL:"Cache max keys amount exceeded",EKEYTYPE:"The key argument has to be of type `string` or `number`. Found: `__key`",EKEYSTYPE:"The keys argument has to be an array.",ETTLTYPE:"The ttl argument has to be a number."},t}.call(this);}).call(this);}).call(this,n(128).Buffer);},function(t,e,n){e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=c(t),a=r[0],u=r[1],s=new i(function(t,e,n){return 3*(e+n)/4-n}(0,a,u)),f=0,l=u>0?a-4:a;for(n=0;n<l;n+=4)e=o[t.charCodeAt(n)]<<18|o[t.charCodeAt(n+1)]<<12|o[t.charCodeAt(n+2)]<<6|o[t.charCodeAt(n+3)],s[f++]=e>>16&255,s[f++]=e>>8&255,s[f++]=255&e;2===u&&(e=o[t.charCodeAt(n)]<<2|o[t.charCodeAt(n+1)]>>4,s[f++]=255&e);1===u&&(e=o[t.charCodeAt(n)]<<10|o[t.charCodeAt(n+1)]<<4|o[t.charCodeAt(n+2)]>>2,s[f++]=e>>8&255,s[f++]=255&e);return s},e.fromByteArray=function(t){for(var e,n=t.length,o=n%3,i=[],a=0,u=n-o;a<u;a+=16383)i.push(f(t,a,a+16383>u?u:a+16383));1===o?(e=t[n-1],i.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],i.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return i.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,s=a.length;u<s;++u)r[u]=a[u],o[a.charCodeAt(u)]=u;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return -1===n&&(n=e),[n,n===e?0:4-n%4]}function f(t,e,n){for(var o,i,a=[],u=e;u<n;u+=3)o=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(255&t[u+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63;},function(t,e){
    /*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
    e.read=function(t,e,n,r,o){var i,a,u=8*o-r-1,s=(1<<u)-1,c=s>>1,f=-7,l=n?o-1:0,h=n?-1:1,p=t[e+l];for(l+=h,i=p&(1<<-f)-1,p>>=-f,f+=u;f>0;i=256*i+t[e+l],l+=h,f-=8);for(a=i&(1<<-f)-1,i>>=-f,f+=r;f>0;a=256*a+t[e+l],l+=h,f-=8);if(0===i)i=1-c;else{if(i===s)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),i-=c;}return (p?-1:1)*a*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var a,u,s,c=8*i-o-1,f=(1<<c)-1,l=f>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,d=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-a))<1&&(a--,s*=2),(e+=a+l>=1?h/s:h*Math.pow(2,1-l))*s>=2&&(a++,s/=2),a+l>=f?(u=0,a=f):a+l>=1?(u=(e*s-1)*Math.pow(2,o),a+=l):(u=e*Math.pow(2,l-1)*Math.pow(2,o),a=0));o>=8;t[n+p]=255&u,p+=d,u/=256,o-=8);for(a=a<<o|u,c+=o;c>0;t[n+p]=255&a,p+=d,a/=256,c-=8);t[n+p-d]|=128*v;};},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return "[object Array]"==n.call(t)};},function(t,e,n){var r=n(126);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){var r=n(125),o=n(129),i=n(81),a=n(127);t.exports=function(t){return r(t)||o(t)||i(t)||a()},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){(function(e){var n=function(){function t(t,e){return null!=e&&t instanceof e}var n,r,o;try{n=Map;}catch(t){n=function(){};}try{r=Set;}catch(t){r=function(){};}try{o=Promise;}catch(t){o=function(){};}function i(a,s,c,f,l){"object"==typeof s&&(c=s.depth,f=s.prototype,l=s.includeNonEnumerable,s=s.circular);var h=[],p=[],d=void 0!==e;return void 0===s&&(s=!0),void 0===c&&(c=1/0),function a(c,v){if(null===c)return null;if(0===v)return c;var y,g;if("object"!=typeof c)return c;if(t(c,n))y=new n;else if(t(c,r))y=new r;else if(t(c,o))y=new o((function(t,e){c.then((function(e){t(a(e,v-1));}),(function(t){e(a(t,v-1));}));}));else if(i.__isArray(c))y=[];else if(i.__isRegExp(c))y=new RegExp(c.source,u(c)),c.lastIndex&&(y.lastIndex=c.lastIndex);else if(i.__isDate(c))y=new Date(c.getTime());else{if(d&&e.isBuffer(c))return y=e.allocUnsafe?e.allocUnsafe(c.length):new e(c.length),c.copy(y),y;t(c,Error)?y=Object.create(c):void 0===f?(g=Object.getPrototypeOf(c),y=Object.create(g)):(y=Object.create(f),g=f);}if(s){var m=h.indexOf(c);if(-1!=m)return p[m];h.push(c),p.push(y);}for(var b in t(c,n)&&c.forEach((function(t,e){var n=a(e,v-1),r=a(t,v-1);y.set(n,r);})),t(c,r)&&c.forEach((function(t){var e=a(t,v-1);y.add(e);})),c){var w;g&&(w=Object.getOwnPropertyDescriptor(g,b)),w&&null==w.set||(y[b]=a(c[b],v-1));}if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(c);for(b=0;b<x.length;b++){var k=x[b];(!(T=Object.getOwnPropertyDescriptor(c,k))||T.enumerable||l)&&(y[k]=a(c[k],v-1),T.enumerable||Object.defineProperty(y,k,{enumerable:!1}));}}if(l){var S=Object.getOwnPropertyNames(c);for(b=0;b<S.length;b++){var T,_=S[b];(T=Object.getOwnPropertyDescriptor(c,_))&&T.enumerable||(y[_]=a(c[_],v-1),Object.defineProperty(y,_,{enumerable:!1}));}}return y}(a,c)}function a(t){return Object.prototype.toString.call(t)}function u(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return i.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},i.__objToStr=a,i.__isDate=function(t){return "object"==typeof t&&"[object Date]"===a(t)},i.__isArray=function(t){return "object"==typeof t&&"[object Array]"===a(t)},i.__isRegExp=function(t){return "object"==typeof t&&"[object RegExp]"===a(t)},i.__getRegExpFlags=u,i}();t.exports&&(t.exports=n);}).call(this,n(128).Buffer);},function(t,e,n){var r,o="object"==typeof Reflect?Reflect:null,i=o&&"function"==typeof o.apply?o.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function u(){u.init.call(this);}t.exports=u,t.exports.once=function(t,e){return new Promise((function(n,r){function o(n){t.removeListener(e,i),r(n);}function i(){"function"==typeof t.removeListener&&t.removeListener("error",o),n([].slice.call(arguments));}g(t,e,i,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&g(t,"error",e,n);}(t,o,{once:!0});}))},u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var s=10;function c(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function f(t){return void 0===t._maxListeners?u.defaultMaxListeners:t._maxListeners}function l(t,e,n,r){var o,i,a,u;if(c(n),void 0===(i=t._events)?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]),void 0===a)a=i[e]=n,++t._eventsCount;else if("function"==typeof a?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(o=f(t))>0&&a.length>o&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=a.length,u=s,console&&console.warn&&console.warn(u);}return t}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=h.bind(r);return o.listener=n,r.wrapFn=o,o}function d(t,e,n){var r=t._events;if(void 0===r)return [];var o=r[e];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(o):y(o,o.length)}function v(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function y(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function g(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function o(i){r.once&&t.removeEventListener(e,o),n(i);}));}}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");s=t;}}),u.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0;},u.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},u.prototype.getMaxListeners=function(){return f(this)},u.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return !1;if(r){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var u=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw u.context=a,u}var s=o[t];if(void 0===s)return !1;if("function"==typeof s)i(s,this,e);else{var c=s.length,f=y(s,c);for(n=0;n<c;++n)i(f[n],this,e);}return !0},u.prototype.addListener=function(t,e){return l(this,t,e,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(t,e){return l(this,t,e,!0)},u.prototype.once=function(t,e){return c(e),this.on(t,p(this,t,e)),this},u.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,p(this,t,e)),this},u.prototype.removeListener=function(t,e){var n,r,o,i,a;if(c(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===e||n[i].listener===e){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop();}(n,o),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e);}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},u.prototype.listeners=function(t){return d(this,t,!0)},u.prototype.rawListeners=function(t){return d(this,t,!1)},u.listenerCount=function(t,e){return "function"==typeof t.listenerCount?t.listenerCount(e):v.call(t,e)},u.prototype.listenerCount=v,u.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};},function(t,e,n){var r=n(130);t.exports=r;},function(t,e,n){var r=n(6),o=n(14);r({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperty:n(27).f});},function(t,e,n){t.exports=n(222);},function(t,e,n){var r=n(133);t.exports=r;},function(t,e,n){n(224);var r=n(29);t.exports=r("Array").indexOf;},function(t,e,n){var r=n(6),o=n(134).indexOf,i=n(136),a=[].indexOf,u=!!a&&1/[1].indexOf(1,-0)<0,s=i("indexOf");r({target:"Array",proto:!0,forced:u||!s},{indexOf:function(t){return u?a.apply(this,arguments)||0:o(this,t,arguments.length>1?arguments[1]:void 0)}});},function(t,e,n){var r=n(137);t.exports=r;},function(t,e,n){var r=n(10),o=n(23);t.exports=function(t,e){try{o(r,t,e);}catch(n){r[t]=e;}return e};},function(t,e,n){var r=n(11);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}));},function(t,e,n){var r=n(17);t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t};},function(t,e,n){var r,o,i,a,u=n(6),s=n(30),c=n(10),f=n(24),l=n(145),h=n(31),p=n(146),d=n(90),v=n(32),y=n(231),g=n(17),m=n(35),b=n(96),w=n(147),x=n(48),k=n(148),S=n(149),T=n(150).set,_=n(232),O=n(152),E=n(234),A=n(51),R=n(67),P=n(39),j=n(132),C=n(9),I=n(236),M=n(97),U=n(66),L=C("species"),F="Promise",N=P.get,D=P.set,B=P.getterFor(F),H=l&&l.prototype,K=l,q=H,V=c.TypeError,z=c.document,Y=c.process,G=A.f,J=G,$=!!(z&&z.createEvent&&c.dispatchEvent),W="function"==typeof PromiseRejectionEvent,X=!1,Z=j(F,(function(){var t=w(K)!==String(K);if(!t&&66===U)return !0;if(s&&!q.finally)return !0;if(U>=51&&/native code/.test(K))return !1;var e=new K((function(t){t(1);})),n=function(t){t((function(){}),(function(){}));};return (e.constructor={})[L]=n,!(X=e.then((function(){}))instanceof n)||!t&&I&&!W})),Q=Z||!k((function(t){K.all(t).catch((function(){}));})),tt=function(t){var e;return !(!g(t)||"function"!=typeof(e=t.then))&&e},et=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;_((function(){for(var r=t.value,o=1==t.state,i=0;n.length>i;){var a,u,s,c=n[i++],f=o?c.ok:c.fail,l=c.resolve,h=c.reject,p=c.domain;try{f?(o||(2===t.rejection&&it(t),t.rejection=1),!0===f?a=r:(p&&p.enter(),a=f(r),p&&(p.exit(),s=!0)),a===c.promise?h(V("Promise-chain cycle")):(u=tt(a))?u.call(a,l,h):l(a)):h(r);}catch(t){p&&!s&&p.exit(),h(t);}}t.reactions=[],t.notified=!1,e&&!t.rejection&&rt(t);}));}},nt=function(t,e,n){var r,o;$?((r=z.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),c.dispatchEvent(r)):r={promise:e,reason:n},!W&&(o=c["on"+t])?o(r):"unhandledrejection"===t&&E("Unhandled promise rejection",n);},rt=function(t){T.call(c,(function(){var e,n=t.facade,r=t.value;if(ot(t)&&(e=R((function(){M?Y.emit("unhandledRejection",r,n):nt("unhandledrejection",n,r);})),t.rejection=M||ot(t)?2:1,e.error))throw e.value}));},ot=function(t){return 1!==t.rejection&&!t.parent},it=function(t){T.call(c,(function(){var e=t.facade;M?Y.emit("rejectionHandled",e):nt("rejectionhandled",e,t.value);}));},at=function(t,e,n){return function(r){t(e,r,n);}},ut=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,et(t,!0));},st=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw V("Promise can't be resolved itself");var r=tt(e);r?_((function(){var n={done:!1};try{r.call(e,at(st,n,t),at(ut,n,t));}catch(e){ut(n,e,t);}})):(t.value=e,t.state=1,et(t,!1));}catch(e){ut({done:!1},e,t);}}};if(Z&&(q=(K=function(t){b(this,K,F),m(t),r.call(this);var e=N(this);try{t(at(st,e),at(ut,e));}catch(t){ut(e,t);}}).prototype,(r=function(t){D(this,{type:F,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0});}).prototype=p(q,{then:function(t,e){var n=B(this),r=G(S(this,K));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=M?Y.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&et(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r,e=N(t);this.promise=t,this.resolve=at(st,e),this.reject=at(ut,e);},A.f=G=function(t){return t===K||t===i?new o(t):J(t)},!s&&"function"==typeof l&&H!==Object.prototype)){a=H.then,X||(h(H,"then",(function(t,e){var n=this;return new K((function(t,e){a.call(n,t,e);})).then(t,e)}),{unsafe:!0}),h(H,"catch",q.catch,{unsafe:!0}));try{delete H.constructor;}catch(t){}d&&d(H,q);}u({global:!0,wrap:!0,forced:Z},{Promise:K}),v(K,F,!1,!0),y(F),i=f(F),u({target:F,stat:!0,forced:Z},{reject:function(t){var e=G(this);return e.reject.call(void 0,t),e.promise}}),u({target:F,stat:!0,forced:s||Z},{resolve:function(t){return O(s&&this===i?K:this,t)}}),u({target:F,stat:!0,forced:Q},{all:function(t){var e=this,n=G(e),r=n.resolve,o=n.reject,i=R((function(){var n=m(e.resolve),i=[],a=0,u=1;x(t,(function(t){var s=a++,c=!1;i.push(void 0),u++,n.call(e,t).then((function(t){c||(c=!0,i[s]=t,--u||r(i));}),o);})),--u||r(i);}));return i.error&&o(i.value),n.promise},race:function(t){var e=this,n=G(e),r=n.reject,o=R((function(){var o=m(e.resolve);x(t,(function(t){o.call(e,t).then(n.resolve,r);}));}));return o.error&&r(o.value),n.promise}});},function(t,e,n){var r=n(95),o=n(50);t.exports=r?{}.toString:function(){return "[object "+o(this)+"]"};},function(t,e,n){var r=n(24),o=n(27),i=n(9),a=n(14),u=i("species");t.exports=function(t){var e=r(t),n=o.f;a&&e&&!e[u]&&n(e,u,{configurable:!0,get:function(){return this}});};},function(t,e,n){var r,o,i,a,u,s,c,f,l=n(10),h=n(45).f,p=n(150).set,d=n(151),v=n(233),y=n(97),g=l.MutationObserver||l.WebKitMutationObserver,m=l.document,b=l.process,w=l.Promise,x=h(l,"queueMicrotask"),k=x&&x.value;k||(r=function(){var t,e;for(y&&(t=b.domain)&&t.exit();o;){e=o.fn,o=o.next;try{e();}catch(t){throw o?a():i=void 0,t}}i=void 0,t&&t.enter();},d||y||v||!g||!m?w&&w.resolve?((c=w.resolve(void 0)).constructor=w,f=c.then,a=function(){f.call(c,r);}):a=y?function(){b.nextTick(r);}:function(){p.call(l,r);}:(u=!0,s=m.createTextNode(""),new g(r).observe(s,{characterData:!0}),a=function(){s.data=u=!u;})),t.exports=k||function(t){var e={fn:t,next:void 0};i&&(i.next=e),o||(o=e,a()),i=e;};},function(t,e,n){var r=n(94);t.exports=/web0s(?!.*chrome)/i.test(r);},function(t,e,n){var r=n(10);t.exports=function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e));};},function(t,e,n){var r=n(10),o=n(147),i=r.WeakMap;t.exports="function"==typeof i&&/native code/.test(o(i));},function(t,e){t.exports="object"==typeof window;},function(t,e,n){var r=n(6),o=n(30),i=n(145),a=n(11),u=n(24),s=n(149),c=n(152),f=n(31);if(r({target:"Promise",proto:!0,real:!0,forced:!!i&&a((function(){i.prototype.finally.call({then:function(){}},(function(){}));}))},{finally:function(t){var e=s(this,u("Promise")),n="function"==typeof t;return this.then(n?function(n){return c(e,t()).then((function(){return n}))}:t,n?function(n){return c(e,t()).then((function(){throw n}))}:t)}}),!o&&"function"==typeof i){var l=u("Promise").prototype.finally;i.prototype.finally!==l&&f(i.prototype,"finally",l,{unsafe:!0});}},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};},function(t,e,n){t.exports=n(240);},function(t,e,n){var r=n(241);t.exports=r;},function(t,e,n){n(242),n(246),n(162);var r=n(12);t.exports=r.URL;},function(t,e,n){n(40);var r,o=n(6),i=n(14),a=n(160),u=n(10),s=n(91),c=n(31),f=n(96),l=n(18),h=n(243),p=n(161),d=n(155).codeAt,v=n(245),y=n(32),g=n(162),m=n(39),b=u.URL,w=g.URLSearchParams,x=g.getState,k=m.set,S=m.getterFor("URL"),T=Math.floor,_=Math.pow,O=/[A-Za-z]/,E=/[\d+-.A-Za-z]/,A=/\d/,R=/^0x/i,P=/^[0-7]+$/,j=/^\d+$/,C=/^[\dA-Fa-f]+$/,I=/[\0\t\n\r #%/:<>?@[\\\]^|]/,M=/[\0\t\n\r #/:<>?@[\\\]^|]/,U=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,L=/[\t\n\r]/g,F=function(t,e){var n,r,o;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return "Invalid host";if(!(n=D(e.slice(1,-1))))return "Invalid host";t.host=n;}else if(G(t)){if(e=v(e),I.test(e))return "Invalid host";if(null===(n=N(e)))return "Invalid host";t.host=n;}else{if(M.test(e))return "Invalid host";for(n="",r=p(e),o=0;o<r.length;o++)n+=z(r[o],H);t.host=n;}},N=function(t){var e,n,r,o,i,a,u,s=t.split(".");if(s.length&&""==s[s.length-1]&&s.pop(),(e=s.length)>4)return t;for(n=[],r=0;r<e;r++){if(""==(o=s[r]))return t;if(i=10,o.length>1&&"0"==o.charAt(0)&&(i=R.test(o)?16:8,o=o.slice(8==i?1:2)),""===o)a=0;else{if(!(10==i?j:8==i?P:C).test(o))return t;a=parseInt(o,i);}n.push(a);}for(r=0;r<e;r++)if(a=n[r],r==e-1){if(a>=_(256,5-e))return null}else if(a>255)return null;for(u=n.pop(),r=0;r<n.length;r++)u+=n[r]*_(256,3-r);return u},D=function(t){var e,n,r,o,i,a,u,s=[0,0,0,0,0,0,0,0],c=0,f=null,l=0,h=function(){return t.charAt(l)};if(":"==h()){if(":"!=t.charAt(1))return;l+=2,f=++c;}for(;h();){if(8==c)return;if(":"!=h()){for(e=n=0;n<4&&C.test(h());)e=16*e+parseInt(h(),16),l++,n++;if("."==h()){if(0==n)return;if(l-=n,c>6)return;for(r=0;h();){if(o=null,r>0){if(!("."==h()&&r<4))return;l++;}if(!A.test(h()))return;for(;A.test(h());){if(i=parseInt(h(),10),null===o)o=i;else{if(0==o)return;o=10*o+i;}if(o>255)return;l++;}s[c]=256*s[c]+o,2!=++r&&4!=r||c++;}if(4!=r)return;break}if(":"==h()){if(l++,!h())return}else if(h())return;s[c++]=e;}else{if(null!==f)return;l++,f=++c;}}if(null!==f)for(a=c-f,c=7;0!=c&&a>0;)u=s[c],s[c--]=s[f+a-1],s[f+--a]=u;else if(8!=c)return;return s},B=function(t){var e,n,r,o;if("number"==typeof t){for(e=[],n=0;n<4;n++)e.unshift(t%256),t=T(t/256);return e.join(".")}if("object"==typeof t){for(e="",r=function(t){for(var e=null,n=1,r=null,o=0,i=0;i<8;i++)0!==t[i]?(o>n&&(e=r,n=o),r=null,o=0):(null===r&&(r=i),++o);return o>n&&(e=r,n=o),e}(t),n=0;n<8;n++)o&&0===t[n]||(o&&(o=!1),r===n?(e+=n?":":"::",o=!0):(e+=t[n].toString(16),n<7&&(e+=":")));return "["+e+"]"}return t},H={},K=h({},H,{" ":1,'"':1,"<":1,">":1,"`":1}),q=h({},K,{"#":1,"?":1,"{":1,"}":1}),V=h({},q,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),z=function(t,e){var n=d(t,0);return n>32&&n<127&&!l(e,t)?t:encodeURIComponent(t)},Y={ftp:21,file:null,http:80,https:443,ws:80,wss:443},G=function(t){return l(Y,t.scheme)},J=function(t){return ""!=t.username||""!=t.password},$=function(t){return !t.host||t.cannotBeABaseURL||"file"==t.scheme},W=function(t,e){var n;return 2==t.length&&O.test(t.charAt(0))&&(":"==(n=t.charAt(1))||!e&&"|"==n)},X=function(t){var e;return t.length>1&&W(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},Z=function(t){var e=t.path,n=e.length;!n||"file"==t.scheme&&1==n&&W(e[0],!0)||e.pop();},Q=function(t){return "."===t||"%2e"===t.toLowerCase()},tt={},et={},nt={},rt={},ot={},it={},at={},ut={},st={},ct={},ft={},lt={},ht={},pt={},dt={},vt={},yt={},gt={},mt={},bt={},wt={},xt=function(t,e,n,o){var i,a,u,s,c,f=n||tt,h=0,d="",v=!1,y=!1,g=!1;for(n||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(U,"")),e=e.replace(L,""),i=p(e);h<=i.length;){switch(a=i[h],f){case tt:if(!a||!O.test(a)){if(n)return "Invalid scheme";f=nt;continue}d+=a.toLowerCase(),f=et;break;case et:if(a&&(E.test(a)||"+"==a||"-"==a||"."==a))d+=a.toLowerCase();else{if(":"!=a){if(n)return "Invalid scheme";d="",f=nt,h=0;continue}if(n&&(G(t)!=l(Y,d)||"file"==d&&(J(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=d,n)return void(G(t)&&Y[t.scheme]==t.port&&(t.port=null));d="","file"==t.scheme?f=pt:G(t)&&o&&o.scheme==t.scheme?f=rt:G(t)?f=ut:"/"==i[h+1]?(f=ot,h++):(t.cannotBeABaseURL=!0,t.path.push(""),f=mt);}break;case nt:if(!o||o.cannotBeABaseURL&&"#"!=a)return "Invalid scheme";if(o.cannotBeABaseURL&&"#"==a){t.scheme=o.scheme,t.path=o.path.slice(),t.query=o.query,t.fragment="",t.cannotBeABaseURL=!0,f=wt;break}f="file"==o.scheme?pt:it;continue;case rt:if("/"!=a||"/"!=i[h+1]){f=it;continue}f=st,h++;break;case ot:if("/"==a){f=ct;break}f=gt;continue;case it:if(t.scheme=o.scheme,a==r)t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,t.path=o.path.slice(),t.query=o.query;else if("/"==a||"\\"==a&&G(t))f=at;else if("?"==a)t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,t.path=o.path.slice(),t.query="",f=bt;else{if("#"!=a){t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,t.path=o.path.slice(),t.path.pop(),f=gt;continue}t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,t.path=o.path.slice(),t.query=o.query,t.fragment="",f=wt;}break;case at:if(!G(t)||"/"!=a&&"\\"!=a){if("/"!=a){t.username=o.username,t.password=o.password,t.host=o.host,t.port=o.port,f=gt;continue}f=ct;}else f=st;break;case ut:if(f=st,"/"!=a||"/"!=d.charAt(h+1))continue;h++;break;case st:if("/"!=a&&"\\"!=a){f=ct;continue}break;case ct:if("@"==a){v&&(d="%40"+d),v=!0,u=p(d);for(var m=0;m<u.length;m++){var b=u[m];if(":"!=b||g){var w=z(b,V);g?t.password+=w:t.username+=w;}else g=!0;}d="";}else if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&G(t)){if(v&&""==d)return "Invalid authority";h-=p(d).length+1,d="",f=ft;}else d+=a;break;case ft:case lt:if(n&&"file"==t.scheme){f=vt;continue}if(":"!=a||y){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&G(t)){if(G(t)&&""==d)return "Invalid host";if(n&&""==d&&(J(t)||null!==t.port))return;if(s=F(t,d))return s;if(d="",f=yt,n)return;continue}"["==a?y=!0:"]"==a&&(y=!1),d+=a;}else{if(""==d)return "Invalid host";if(s=F(t,d))return s;if(d="",f=ht,n==lt)return}break;case ht:if(!A.test(a)){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&G(t)||n){if(""!=d){var x=parseInt(d,10);if(x>65535)return "Invalid port";t.port=G(t)&&x===Y[t.scheme]?null:x,d="";}if(n)return;f=yt;continue}return "Invalid port"}d+=a;break;case pt:if(t.scheme="file","/"==a||"\\"==a)f=dt;else{if(!o||"file"!=o.scheme){f=gt;continue}if(a==r)t.host=o.host,t.path=o.path.slice(),t.query=o.query;else if("?"==a)t.host=o.host,t.path=o.path.slice(),t.query="",f=bt;else{if("#"!=a){X(i.slice(h).join(""))||(t.host=o.host,t.path=o.path.slice(),Z(t)),f=gt;continue}t.host=o.host,t.path=o.path.slice(),t.query=o.query,t.fragment="",f=wt;}}break;case dt:if("/"==a||"\\"==a){f=vt;break}o&&"file"==o.scheme&&!X(i.slice(h).join(""))&&(W(o.path[0],!0)?t.path.push(o.path[0]):t.host=o.host),f=gt;continue;case vt:if(a==r||"/"==a||"\\"==a||"?"==a||"#"==a){if(!n&&W(d))f=gt;else if(""==d){if(t.host="",n)return;f=yt;}else{if(s=F(t,d))return s;if("localhost"==t.host&&(t.host=""),n)return;d="",f=yt;}continue}d+=a;break;case yt:if(G(t)){if(f=gt,"/"!=a&&"\\"!=a)continue}else if(n||"?"!=a)if(n||"#"!=a){if(a!=r&&(f=gt,"/"!=a))continue}else t.fragment="",f=wt;else t.query="",f=bt;break;case gt:if(a==r||"/"==a||"\\"==a&&G(t)||!n&&("?"==a||"#"==a)){if(".."===(c=(c=d).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(Z(t),"/"==a||"\\"==a&&G(t)||t.path.push("")):Q(d)?"/"==a||"\\"==a&&G(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&W(d)&&(t.host&&(t.host=""),d=d.charAt(0)+":"),t.path.push(d)),d="","file"==t.scheme&&(a==r||"?"==a||"#"==a))for(;t.path.length>1&&""===t.path[0];)t.path.shift();"?"==a?(t.query="",f=bt):"#"==a&&(t.fragment="",f=wt);}else d+=z(a,q);break;case mt:"?"==a?(t.query="",f=bt):"#"==a?(t.fragment="",f=wt):a!=r&&(t.path[0]+=z(a,H));break;case bt:n||"#"!=a?a!=r&&("'"==a&&G(t)?t.query+="%27":t.query+="#"==a?"%23":z(a,H)):(t.fragment="",f=wt);break;case wt:a!=r&&(t.fragment+=z(a,K));}h++;}},kt=function(t){var e,n,r=f(this,kt,"URL"),o=arguments.length>1?arguments[1]:void 0,a=String(t),u=k(r,{type:"URL"});if(void 0!==o)if(o instanceof kt)e=S(o);else if(n=xt(e={},String(o)))throw TypeError(n);if(n=xt(u,a,null,e))throw TypeError(n);var s=u.searchParams=new w,c=x(s);c.updateSearchParams(u.query),c.updateURL=function(){u.query=String(s)||null;},i||(r.href=Tt.call(r),r.origin=_t.call(r),r.protocol=Ot.call(r),r.username=Et.call(r),r.password=At.call(r),r.host=Rt.call(r),r.hostname=Pt.call(r),r.port=jt.call(r),r.pathname=Ct.call(r),r.search=It.call(r),r.searchParams=Mt.call(r),r.hash=Ut.call(r));},St=kt.prototype,Tt=function(){var t=S(this),e=t.scheme,n=t.username,r=t.password,o=t.host,i=t.port,a=t.path,u=t.query,s=t.fragment,c=e+":";return null!==o?(c+="//",J(t)&&(c+=n+(r?":"+r:"")+"@"),c+=B(o),null!==i&&(c+=":"+i)):"file"==e&&(c+="//"),c+=t.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==u&&(c+="?"+u),null!==s&&(c+="#"+s),c},_t=function(){var t=S(this),e=t.scheme,n=t.port;if("blob"==e)try{return new kt(e.path[0]).origin}catch(t){return "null"}return "file"!=e&&G(t)?e+"://"+B(t.host)+(null!==n?":"+n:""):"null"},Ot=function(){return S(this).scheme+":"},Et=function(){return S(this).username},At=function(){return S(this).password},Rt=function(){var t=S(this),e=t.host,n=t.port;return null===e?"":null===n?B(e):B(e)+":"+n},Pt=function(){var t=S(this).host;return null===t?"":B(t)},jt=function(){var t=S(this).port;return null===t?"":String(t)},Ct=function(){var t=S(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},It=function(){var t=S(this).query;return t?"?"+t:""},Mt=function(){return S(this).searchParams},Ut=function(){var t=S(this).fragment;return t?"#"+t:""},Lt=function(t,e){return {get:t,set:e,configurable:!0,enumerable:!0}};if(i&&s(St,{href:Lt(Tt,(function(t){var e=S(this),n=String(t),r=xt(e,n);if(r)throw TypeError(r);x(e.searchParams).updateSearchParams(e.query);})),origin:Lt(_t),protocol:Lt(Ot,(function(t){var e=S(this);xt(e,String(t)+":",tt);})),username:Lt(Et,(function(t){var e=S(this),n=p(String(t));if(!$(e)){e.username="";for(var r=0;r<n.length;r++)e.username+=z(n[r],V);}})),password:Lt(At,(function(t){var e=S(this),n=p(String(t));if(!$(e)){e.password="";for(var r=0;r<n.length;r++)e.password+=z(n[r],V);}})),host:Lt(Rt,(function(t){var e=S(this);e.cannotBeABaseURL||xt(e,String(t),ft);})),hostname:Lt(Pt,(function(t){var e=S(this);e.cannotBeABaseURL||xt(e,String(t),lt);})),port:Lt(jt,(function(t){var e=S(this);$(e)||(""==(t=String(t))?e.port=null:xt(e,t,ht));})),pathname:Lt(Ct,(function(t){var e=S(this);e.cannotBeABaseURL||(e.path=[],xt(e,t+"",yt));})),search:Lt(It,(function(t){var e=S(this);""==(t=String(t))?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",xt(e,t,bt)),x(e.searchParams).updateSearchParams(e.query);})),searchParams:Lt(Mt),hash:Lt(Ut,(function(t){var e=S(this);""!=(t=String(t))?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",xt(e,t,wt)):e.fragment=null;}))}),c(St,"toJSON",(function(){return Tt.call(this)}),{enumerable:!0}),c(St,"toString",(function(){return Tt.call(this)}),{enumerable:!0}),b){var Ft=b.createObjectURL,Nt=b.revokeObjectURL;Ft&&c(kt,"createObjectURL",(function(t){return Ft.apply(b,arguments)})),Nt&&c(kt,"revokeObjectURL",(function(t){return Nt.apply(b,arguments)}));}y(kt,"URL"),o({global:!0,forced:!a,sham:!i},{URL:kt});},function(t,e,n){var r=n(14),o=n(11),i=n(47),a=n(99),u=n(60),s=n(26),c=n(82),f=Object.assign,l=Object.defineProperty;t.exports=!f||o((function(){if(r&&1!==f({b:1},f(l({},"a",{enumerable:!0,get:function(){l(this,"b",{value:3,enumerable:!1});}}),{b:2})).b)return !0;var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t;})),7!=f({},t)[n]||"abcdefghijklmnopqrst"!=i(f({},e)).join("")}))?function(t,e){for(var n=s(t),o=arguments.length,f=1,l=a.f,h=u.f;o>f;)for(var p,d=c(arguments[f++]),v=l?i(d).concat(l(d)):i(d),y=v.length,g=0;y>g;)p=v[g++],r&&!h.call(d,p)||(n[p]=d[p]);return n}:f;},function(t,e,n){var r=n(15),o=n(143);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){throw o(t),e}};},function(t,e,n){var r=/[^\0-\u007E]/,o=/[.\u3002\uFF0E\uFF61]/g,i="Overflow: input needs wider integers to process",a=Math.floor,u=String.fromCharCode,s=function(t){return t+22+75*(t<26)},c=function(t,e,n){var r=0;for(t=n?a(t/700):t>>1,t+=a(t/e);t>455;r+=36)t=a(t/35);return a(r+36*t/(t+38))},f=function(t){var e,n,r=[],o=(t=function(t){for(var e=[],n=0,r=t.length;n<r;){var o=t.charCodeAt(n++);if(o>=55296&&o<=56319&&n<r){var i=t.charCodeAt(n++);56320==(64512&i)?e.push(((1023&o)<<10)+(1023&i)+65536):(e.push(o),n--);}else e.push(o);}return e}(t)).length,f=128,l=0,h=72;for(e=0;e<t.length;e++)(n=t[e])<128&&r.push(u(n));var p=r.length,d=p;for(p&&r.push("-");d<o;){var v=2147483647;for(e=0;e<t.length;e++)(n=t[e])>=f&&n<v&&(v=n);var y=d+1;if(v-f>a((2147483647-l)/y))throw RangeError(i);for(l+=(v-f)*y,f=v,e=0;e<t.length;e++){if((n=t[e])<f&&++l>2147483647)throw RangeError(i);if(n==f){for(var g=l,m=36;;m+=36){var b=m<=h?1:m>=h+26?26:m-h;if(g<b)break;var w=g-b,x=36-b;r.push(u(s(b+w%x))),g=a(w/x);}r.push(u(s(g))),h=c(l,y,d==p),l=0,++d;}}++l,++f;}return r.join("")};t.exports=function(t){var e,n,i=[],a=t.toLowerCase().replace(o,".").split(".");for(e=0;e<a.length;e++)n=a[e],i.push(r.test(n)?"xn--"+f(n):n);return i.join(".")};},function(t,e){},function(t,e,n){var r=n(248),o=n(21),i=n(43),a=n(178),u=n(72),s=n(69),c=n(271),f=n(273),l=n(274),h=n(73)("replace"),p=Math.max,d=Math.min,v="$0"==="a".replace(/./,"$0"),y=!!/./[h]&&""===/./[h]("a","$0");r("replace",(function(t,e,n){var r=y?"$":"$0";return [function(t,n){var r=s(this),o=null==t?void 0:t[h];return void 0!==o?o.call(t,r,n):e.call(String(r),t,n)},function(t,o){if("string"==typeof o&&-1===o.indexOf(r)&&-1===o.indexOf("$<")){var s=n(e,this,t,o);if(s.done)return s.value}var h=i(this),v=String(t),y="function"==typeof o;y||(o=String(o));var g=h.global;if(g){var m=h.unicode;h.lastIndex=0;}for(var b=[];;){var w=l(h,v);if(null===w)break;if(b.push(w),!g)break;""===String(w[0])&&(h.lastIndex=c(v,a(h.lastIndex),m));}for(var x,k="",S=0,T=0;T<b.length;T++){w=b[T];for(var _=String(w[0]),O=p(d(u(w.index),v.length),0),E=[],A=1;A<w.length;A++)E.push(void 0===(x=w[A])?x:String(x));var R=w.groups;if(y){var P=[_].concat(E,O,v);void 0!==R&&P.push(R);var j=String(o.apply(void 0,P));}else j=f(_,v,O,E,R,o);O>=S&&(k+=v.slice(S,O)+j,S=O+_.length);}return k+v.slice(S)}]}),!!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!v||y);},function(t,e,n){n(164);var r=n(101),o=n(108),i=n(21),a=n(73),u=n(54),s=a("species"),c=RegExp.prototype;t.exports=function(t,e,n,f){var l=a(t),h=!i((function(){var e={};return e[l]=function(){return 7},7!=""[t](e)})),p=h&&!i((function(){var e=!1,n=/a/;return "split"===t&&((n={}).constructor={},n.constructor[s]=function(){return n},n.flags="",n[l]=/./[l]),n.exec=function(){return e=!0,null},n[l](""),!e}));if(!h||!p||n){var d=/./[l],v=e(l,""[t],(function(t,e,n,r,i){var a=e.exec;return a===o||a===c.exec?h&&!i?{done:!0,value:d.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}));r(String.prototype,t,v[0]),r(c,l,v[1]);}f&&u(c[l],"sham",!0);};},function(t,e,n){var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);e.f=i?function(t){var e=o(this,t);return !!e&&e.enumerable}:r;},function(t,e,n){var r=n(20),o=n(173),i=r.WeakMap;t.exports="function"==typeof i&&/native code/.test(o(i));},function(t,e){t.exports=!1;},function(t,e,n){var r=n(42),o=n(253),i=n(166),a=n(71);t.exports=function(t,e){for(var n=o(e),u=a.f,s=i.f,c=0;c<n.length;c++){var f=n[c];r(t,f)||u(t,f,s(e,f));}};},function(t,e,n){var r=n(106),o=n(255),i=n(258),a=n(43);t.exports=r("Reflect","ownKeys")||function(t){var e=o.f(a(t)),n=i.f;return n?e.concat(n(t)):e};},function(t,e,n){var r=n(20);t.exports=r;},function(t,e,n){var r=n(177),o=n(107).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)};},function(t,e,n){var r=n(68),o=n(178),i=n(257),a=function(t){return function(e,n,a){var u,s=r(e),c=o(s.length),f=i(a,c);if(t&&n!=n){for(;c>f;)if((u=s[f++])!=u)return !0}else for(;c>f;f++)if((t||f in s)&&s[f]===n)return t||f||0;return !t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)};},function(t,e,n){var r=n(72),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)};},function(t,e){e.f=Object.getOwnPropertySymbols;},function(t,e,n){var r=n(21),o=/#|\.prototype\./,i=function(t,e){var n=u[a(t)];return n==c||n!=s&&("function"==typeof e?r(e):!!e)},a=i.normalize=function(t){return String(t).replace(o,".").toLowerCase()},u=i.data={},s=i.NATIVE="N",c=i.POLYFILL="P";t.exports=i;},function(t,e,n){var r=n(43);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};},function(t,e,n){var r=n(21),o=function(t,e){return RegExp(t,e)};e.UNSUPPORTED_Y=r((function(){var t=o("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=r((function(){var t=o("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));},function(t,e,n){var r,o=n(43),i=n(263),a=n(107),u=n(105),s=n(265),c=n(172),f=n(175),l=f("IE_PROTO"),h=function(){},p=function(t){return "<script>"+t+"<\/script>"},d=function(){try{r=document.domain&&new ActiveXObject("htmlfile");}catch(t){}var t,e;d=r?function(t){t.write(p("")),t.close();var e=t.parentWindow.Object;return t=null,e}(r):((e=c("iframe")).style.display="none",s.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(p("document.F=Object")),t.close(),t.F);for(var n=a.length;n--;)delete d.prototype[a[n]];return d()};u[l]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(h.prototype=o(t),n=new h,h.prototype=null,n[l]=t):n=d(),void 0===e?n:i(n,e)};},function(t,e,n){var r=n(41),o=n(71),i=n(43),a=n(264);t.exports=r?Object.defineProperties:function(t,e){i(t);for(var n,r=a(e),u=r.length,s=0;u>s;)o.f(t,n=r[s++],e[n]);return t};},function(t,e,n){var r=n(177),o=n(107);t.exports=Object.keys||function(t){return r(t,o)};},function(t,e,n){var r=n(106);t.exports=r("document","documentElement");},function(t,e,n){var r=n(21);t.exports=r((function(){var t=RegExp(".","string".charAt(0));return !(t.dotAll&&t.exec("\n")&&"s"===t.flags)}));},function(t,e,n){var r=n(21);t.exports=r((function(){var t=RegExp("(?<a>b)","string".charAt(5));return "b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}));},function(t,e,n){var r,o,i=n(20),a=n(269),u=i.process,s=u&&u.versions,c=s&&s.v8;c?o=(r=c.split("."))[0]<4?1:r[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(o=r[1]),t.exports=o&&+o;},function(t,e,n){var r=n(106);t.exports=r("navigator","userAgent")||"";},function(t,e,n){var r=n(179);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator;},function(t,e,n){var r=n(272).charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)};},function(t,e,n){var r=n(72),o=n(69),i=function(t){return function(e,n){var i,a,u=String(o(e)),s=r(n),c=u.length;return s<0||s>=c?t?"":void 0:(i=u.charCodeAt(s))<55296||i>56319||s+1===c||(a=u.charCodeAt(s+1))<56320||a>57343?t?u.charAt(s):i:t?u.slice(s,s+2):a-56320+(i-55296<<10)+65536}};t.exports={codeAt:i(!1),charAt:i(!0)};},function(t,e,n){var r=n(170),o=Math.floor,i="".replace,a=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,n,s,c,f){var l=n+t.length,h=s.length,p=u;return void 0!==c&&(c=r(c),p=a),i.call(f,p,(function(r,i){var a;switch(i.charAt(0)){case"$":return "$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(l);case"<":a=c[i.slice(1,-1)];break;default:var u=+i;if(0===u)return r;if(u>h){var f=o(u/10);return 0===f?r:f<=h?void 0===s[f-1]?i.charAt(1):s[f-1]+i.charAt(1):r}a=s[u-1];}return void 0===a?"":a}))};},function(t,e,n){var r=n(100),o=n(108);t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var i=n.call(t,e);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(t,e)};},function(t,e,n){t.exports=n(276);},function(t,e,n){var r=n(137);n(277),n(278),n(279),n(280),t.exports=r;},function(t,e,n){n(138);},function(t,e,n){n(153);},function(t,e,n){var r=n(6),o=n(51),i=n(67);r({target:"Promise",stat:!0},{try:function(t){var e=o.f(this),n=i(t);return (n.error?e.reject:e.resolve)(n.value),e.promise}});},function(t,e,n){n(154);},function(t,e,n){var r=n(16),o=n(19);r(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n(36)),a=o(n(44)),u=o(n(46)),s=o(n(180)),c=n(74),f=function(t){return t.json().then((function(t){return u.default.reject(t)}))},l=function(){var t=(0, a.default)(i.default.mark((function t(e){var n,r,o,a,u,l,h;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.domain,r=e.interactionHandle,o=e.stateHandle,a=e.version,u="".concat(n,"/idp/idx/introspect"),l=o?{stateToken:o}:{interactionHandle:r},h={"content-type":"application/ion+json; okta-version=".concat(a),accept:"application/ion+json; okta-version=".concat(a)},t.abrupt("return",(0, c.request)(u,{headers:h,body:(0, s.default)(l)}).then((function(t){return t.ok?t.json():f(t)})));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.default=l;},function(t,e,n){var r=n(283);t.exports=r;},function(t,e,n){n(284);var r=n(12);r.JSON||(r.JSON={stringify:JSON.stringify}),t.exports=function(t,e,n){return r.JSON.stringify.apply(null,arguments)};},function(t,e,n){var r=n(6),o=n(24),i=n(11),a=o("JSON","stringify"),u=/[\uD800-\uDFFF]/g,s=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,f=function(t,e,n){var r=n.charAt(e-1),o=n.charAt(e+1);return s.test(t)&&!c.test(o)||c.test(t)&&!s.test(r)?"\\u"+t.charCodeAt(0).toString(16):t},l=i((function(){return '"\\udf06\\ud834"'!==a("\udf06\ud834")||'"\\udead"'!==a("\udead")}));a&&r({target:"JSON",stat:!0,forced:l},{stringify:function(t,e,n){var r=a.apply(null,arguments);return "string"==typeof r?r.replace(u,f):r}});},function(t,e,n){var r=n(181);t.exports=r;},function(t,e,n){var r=n(6),o=n(26),i=n(47);r({target:"Object",stat:!0,forced:n(11)((function(){i(1);}))},{keys:function(t){return i(o(t))}});},function(t,e,n){var r=n(182);t.exports=r;},function(t,e,n){var r=n(22),o=n(110).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==i.call(t)?function(t){try{return o(t)}catch(t){return a.slice()}}(t):o(r(t))};},function(t,e,n){var r=n(290);t.exports=r;},function(t,e,n){var r=n(291),o=Array.prototype;t.exports=function(t){var e=t.filter;return t===o||t instanceof Array&&e===o.filter?r:e};},function(t,e,n){n(292);var r=n(29);t.exports=r("Array").filter;},function(t,e,n){var r=n(6),o=n(56).filter;r({target:"Array",proto:!0,forced:!n(77)("filter")},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}});},function(t,e,n){var r=n(294);t.exports=r;},function(t,e,n){n(295);var r=n(12).Object,o=t.exports=function(t,e){return r.getOwnPropertyDescriptor(t,e)};r.getOwnPropertyDescriptor.sham&&(o.sham=!0);},function(t,e,n){var r=n(6),o=n(11),i=n(22),a=n(45).f,u=n(14),s=o((function(){a(1);}));r({target:"Object",stat:!0,forced:!u||s,sham:!u},{getOwnPropertyDescriptor:function(t,e){return a(i(t),e)}});},function(t,e,n){n(52);var r=n(297),o=n(50),i=Array.prototype,a={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var e=t.forEach;return t===i||t instanceof Array&&e===i.forEach||a.hasOwnProperty(o(t))?r:e};},function(t,e,n){var r=n(298);t.exports=r;},function(t,e,n){n(299);var r=n(29);t.exports=r("Array").forEach;},function(t,e,n){var r=n(6),o=n(300);r({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o});},function(t,e,n){var r=n(56).forEach,o=n(136)("forEach");t.exports=o?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)};},function(t,e,n){var r=n(302);t.exports=r;},function(t,e,n){n(303);var r=n(12);t.exports=r.Object.getOwnPropertyDescriptors;},function(t,e,n){var r=n(6),o=n(14),i=n(304),a=n(22),u=n(45),s=n(53);r({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(t){for(var e,n,r=a(t),o=u.f,c=i(r),f={},l=0;c.length>l;)void 0!==(n=o(r,e=c[l++]))&&s(f,e,n);return f}});},function(t,e,n){var r=n(24),o=n(110),i=n(99),a=n(15);t.exports=r("Reflect","ownKeys")||function(t){var e=o.f(a(t)),n=i.f;return n?e.concat(n(t)):e};},function(t,e,n){var r=n(306);t.exports=r;},function(t,e,n){n(307);var r=n(12).Object,o=t.exports=function(t,e){return r.defineProperties(t,e)};r.defineProperties.sham&&(o.sham=!0);},function(t,e,n){var r=n(6),o=n(14);r({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperties:n(91)});},function(t,e,n){t.exports=n(309);},function(t,e,n){var r=n(130);t.exports=r;},function(t,e,n){n(16)(e,"__esModule",{value:!0}),e.userAgentHeaders=e.getUserAgent=void 0;
    /*!
     * Copyright (c) 2021-Present, Okta, Inc. and/or its affiliates. All rights reserved.
     * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the "License.")
     *
     * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
     * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     *
     * See the License for the specific language governing permissions and limitations under the License.
     */
    var r=function(){return "okta-idx-js/".concat("0.18.0")};e.getUserAgent=r;e.userAgentHeaders=function(){return {"X-Okta-User-Agent-Extended":r()}};},function(t,e,n){var r=n(16),o=n(19);r(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n(36));n(312);var a=o(n(185)),u=o(n(44)),s=o(n(46)),c=o(n(118)),f=o(n(196)),l=o(n(197)),h=n(74),p=function(t){return t.json().then((function(t){return s.default.reject(t)}))},d=function(){var t=(0, u.default)(i.default.mark((function t(e){var n,r,o,u,s,d,v,y,g,m,b,w;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.clientId,o=e.baseUrl,u=e.scopes,s=void 0===u?["openid","email"]:u,d=e.redirectUri,v=e.codeChallenge,y=e.codeChallengeMethod,g=e.state,m="".concat(o,"/v1/interact"),b=(0, c.default)(n=(0, f.default)({client_id:r,scope:s.join(" "),redirect_uri:d,code_challenge:v,code_challenge_method:y,state:g})).call(n,(function(t){var e,n=(0, a.default)(t,2),r=n[0],o=n[1];return (0, l.default)(e="".concat(r,"=")).call(e,encodeURIComponent(o))})).join("&"),w={"content-type":"application/x-www-form-urlencoded"},t.abrupt("return",(0, h.request)(m,{headers:w,body:b}).then((function(t){return t.ok?t.json():p(t)})).then((function(t){return t.interaction_handle})));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.default=d;},function(t,e,n){var r=n(165),o=n(168),i=n(68),a=n(313),u=[].join,s=o!=Object,c=a("join",",");r({target:"Array",proto:!0,forced:s||!c},{join:function(t){return u.call(i(this),void 0===t?",":t)}});},function(t,e,n){var r=n(21);t.exports=function(t,e){var n=[][t];return !!n&&r((function(){n.call(null,e||function(){throw 1},1);}))};},function(t,e,n){var r=n(186);t.exports=function(t){if(r(t))return t},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){var r=n(187);t.exports=r;},function(t,e,n){n(6)({target:"Array",stat:!0},{isArray:n(55)});},function(t,e,n){var r=n(116),o=n(117);t.exports=function(t,e){var n=null==t?null:void 0!==r&&o(t)||t["@@iterator"];if(null!=n){var i,a,u=[],s=!0,c=!1;try{for(n=n.call(t);!(s=(i=n.next()).done)&&(u.push(i.value),!e||u.length!==e);s=!0);}catch(t){c=!0,a=t;}finally{try{s||null==n.return||n.return();}finally{if(c)throw a}}return u}},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){var r=n(188);n(335),n(336),n(337),n(338),n(339),n(340),n(341),t.exports=r;},function(t,e,n){n(7)("asyncIterator");},function(t,e){},function(t,e,n){n(7)("hasInstance");},function(t,e,n){n(7)("isConcatSpreadable");},function(t,e,n){n(7)("match");},function(t,e,n){n(7)("matchAll");},function(t,e,n){n(7)("replace");},function(t,e,n){n(7)("search");},function(t,e,n){n(7)("species");},function(t,e,n){n(7)("split");},function(t,e,n){n(7)("toPrimitive");},function(t,e,n){n(7)("toStringTag");},function(t,e,n){n(7)("unscopables");},function(t,e,n){var r=n(10);n(32)(r.JSON,"JSON",!0);},function(t,e){},function(t,e){},function(t,e,n){n(7)("asyncDispose");},function(t,e,n){n(7)("dispose");},function(t,e,n){n(7)("matcher");},function(t,e,n){n(7)("metadata");},function(t,e,n){n(7)("observable");},function(t,e,n){n(7)("patternMatch");},function(t,e,n){n(7)("replaceAll");},function(t,e,n){n(52),n(40);var r=n(49);t.exports=r;},function(t,e,n){t.exports=n(344);},function(t,e,n){var r=n(192);t.exports=r;},function(t,e,n){n(346);var r=n(29);t.exports=r("Array").slice;},function(t,e,n){var r=n(6),o=n(17),i=n(55),a=n(135),u=n(37),s=n(22),c=n(53),f=n(9),l=n(77)("slice"),h=f("species"),p=[].slice,d=Math.max;r({target:"Array",proto:!0,forced:!l},{slice:function(t,e){var n,r,f,l=s(this),v=u(l.length),y=a(t,v),g=a(void 0===e?v:e,v);if(i(l)&&("function"!=typeof(n=l.constructor)||n!==Array&&!i(n.prototype)?o(n)&&null===(n=n[h])&&(n=void 0):n=void 0,n===Array||void 0===n))return p.call(l,y,g);for(r=new(void 0===n?Array:n)(d(g-y,0)),f=0;y<g;y++,f++)y in l&&c(r,f,l[y]);return r.length=f,r}});},function(t,e,n){var r=n(194);t.exports=r;},function(t,e,n){var r=n(6),o=n(161);r({target:"Array",stat:!0,forced:!n(148)((function(t){}))},{from:o});},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){var r=n(351);t.exports=r;},function(t,e,n){var r=n(352),o=Array.prototype;t.exports=function(t){var e=t.map;return t===o||t instanceof Array&&e===o.map?r:e};},function(t,e,n){n(353);var r=n(29);t.exports=r("Array").map;},function(t,e,n){var r=n(6),o=n(56).map;r({target:"Array",proto:!0,forced:!n(77)("map")},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}});},function(t,e,n){var r=n(355);t.exports=r;},function(t,e,n){n(356);var r=n(12);t.exports=r.Object.entries;},function(t,e,n){var r=n(6),o=n(357).entries;r({target:"Object",stat:!0},{entries:function(t){return o(t)}});},function(t,e,n){var r=n(14),o=n(47),i=n(22),a=n(60).f,u=function(t){return function(e){for(var n,u=i(e),s=o(u),c=s.length,f=0,l=[];c>f;)n=s[f++],r&&!a.call(u,n)||l.push(t?[n,u[n]]:u[n]);return l}};t.exports={entries:u(!0),values:u(!1)};},function(t,e,n){var r=n(359);t.exports=r;},function(t,e,n){var r=n(360),o=Array.prototype;t.exports=function(t){var e=t.concat;return t===o||t instanceof Array&&e===o.concat?r:e};},function(t,e,n){n(189);var r=n(29);t.exports=r("Array").concat;},function(t,e,n){var r=n(16),o=n(19);r(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n(362)),a=function(t){switch(t){case"1.0.0":return i.default;case void 0:case null:throw new Error("Api version is required");default:throw new Error("Unknown api version: ".concat(t,".  Use an exact semver version."))}};
    /*!
     * Copyright (c) 2021-Present, Okta, Inc. and/or its affiliates. All rights reserved.
     * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the "License.")
     *
     * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
     * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     *
     * See the License for the specific language governing permissions and limitations under the License.
     */e.default=a;},function(t,e,n){var r=n(16),o=n(19);r(e,"__esModule",{value:!0}),e.default=void 0;var i={makeIdxState:o(n(198)).default};
    /*!
     * Copyright (c) 2021-Present, Okta, Inc. and/or its affiliates. All rights reserved.
     * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the "License.")
     *
     * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
     * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     *
     * See the License for the specific language governing permissions and limitations under the License.
     */e.default=i;},function(t,e,n){t.exports=n(364);},function(t,e,n){var r=n(365);t.exports=r;},function(t,e,n){var r=n(366),o=Array.prototype;t.exports=function(t){var e=t.find;return t===o||t instanceof Array&&e===o.find?r:e};},function(t,e,n){n(367);var r=n(29);t.exports=r("Array").find;},function(t,e,n){var r=n(6),o=n(56).find,i=n(159),a=!0;"find"in[]&&Array(1).find((function(){a=!1;})),r({target:"Array",proto:!0,forced:a},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i("find");},function(t,e,n){var r=n(369),o=n(370),i=n(191),a=n(371);t.exports=function(t){return r(t)||o(t)||i(t)||a()},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){var r=n(186),o=n(195);t.exports=function(t){if(r(t))return o(t)},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){var r=n(116),o=n(117),i=n(193);t.exports=function(t){if(void 0!==r&&null!=o(t)||null!=t["@@iterator"])return i(t)},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){var r=n(75),o=n(109),i=n(76),a=n(112),u=n(57),s=n(113),c=n(114),f=n(16),l=n(19);f(e,"__esModule",{value:!0}),e.parseIdxResponse=e.parseNonRemediations=void 0,n(58);var h,p=l(n(185)),d=l(n(115)),v=l(n(373)),y=l(n(380)),g=l(n(200)),m=l(n(118)),b=l(n(57)),w=l(n(76)),x=l(n(75)),k=l(n(196)),S=l(n(197)),T=l(n(119)),_=n(388),O=l(n(201)),E=n(401);function A(t,e){var n=r(t);if(o){var u=o(t);e&&(u=i(u).call(u,(function(e){return a(t,e).enumerable}))),n.push.apply(n,u);}return n}function R(t){for(var e=1;e<arguments.length;e++){var n,r=null!=arguments[e]?arguments[e]:{};if(e%2)u(n=A(Object(r),!0)).call(n,(function(e){(0, d.default)(t,e,r[e]);}));else if(s)c(t,s(r));else{var o;u(o=A(Object(r))).call(o,(function(e){f(t,e,a(r,e));}));}}return t}var P=(0, g.default)((0, m.default)(h=["remediation","context"]).call(h,(function(t){return [t,!0]}))),j=function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={},i={};return (0, b.default)(e=(0, w.default)(n=(0, x.default)(t)).call(n,(function(t){return !P[t]}))).call(e,(function(e){var n;if("object"===(0, y.default)(t[e])&&!!t[e])if(t[e].rel)o[t[e].name]=(0, O.default)(t[e],r);else{var a=t[e],u=a.value,s=a.type,c=(0, v.default)(a,["value","type"]);i[e]=R({type:s},c),"object"===s?(i[e].value={},(0, b.default)(n=(0, k.default)(u)).call(n,(function(t){var n,a=(0, p.default)(t,2),u=a[0],s=a[1];s.rel?o[(0, S.default)(n="".concat(e,"-")).call(n,u.name||u)]=(0, O.default)(s,r):i[e].value[u]=s;}))):i[e].value=u;}else i[e]=t[e];})),{context:i,actions:o}};e.parseNonRemediations=j;var C=function t(e,n){var r;(0, b.default)(r=(0, x.default)(n)).call(r,(function(r){if("relatesTo"===r){var o=(0, T.default)(n[r])?n[r][0]:n[r];if("string"==typeof o){var i=(0, E.JSONPath)({path:o,json:e})[0];if(i)return void(n[r]=i)}}var a;(0, T.default)(n[r])&&(0, b.default)(a=n[r]).call(a,(function(n){return t(e,n)}));}));},I=function(t,e){var n=(0, _.generateRemediationFunctions)([t],e)[t.name];return R(R({},t),{},{action:n})};e.parseIdxResponse=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(null===(e=t.remediation)||void 0===e?void 0:e.value)||[];(0, b.default)(r).call(r,(function(e){return C(t,e)}));var o=(0, m.default)(r).call(r,(function(t){return I(t,n)})),i=j(t,n),a=i.context,u=i.actions;return {remediations:o,context:a,actions:u}};},function(t,e,n){var r=n(374),o=n(199),i=n(377);t.exports=function(t,e){if(null==t)return {};var n,a,u=i(t,e);if(r){var s=r(t);for(a=0;a<s.length;a++)n=s[a],o(e).call(e,n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(u[n]=t[n]);}return u},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){t.exports=n(375);},function(t,e,n){var r=n(182);t.exports=r;},function(t,e,n){var r=n(133);t.exports=r;},function(t,e,n){var r=n(378),o=n(199);t.exports=function(t,e){if(null==t)return {};var n,i,a={},u=r(t);for(i=0;i<u.length;i++)n=u[i],o(e).call(e,n)>=0||(a[n]=t[n]);return a},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){t.exports=n(379);},function(t,e,n){var r=n(181);t.exports=r;},function(t,e,n){var r=n(116),o=n(381);function i(e){return "function"==typeof r&&"symbol"==typeof o?(t.exports=i=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=i=function(t){return t&&"function"==typeof r&&t.constructor===r&&t!==r.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),i(e)}t.exports=i,t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e,n){t.exports=n(382);},function(t,e,n){var r=n(383);t.exports=r;},function(t,e,n){n(190),n(40),n(52);var r=n(111);t.exports=r.f("iterator");},function(t,e,n){var r=n(385);t.exports=r;},function(t,e,n){n(98),n(386);var r=n(12);t.exports=r.Object.fromEntries;},function(t,e,n){var r=n(6),o=n(48),i=n(53);r({target:"Object",stat:!0},{fromEntries:function(t){var e={};return o(t,(function(t,n){i(e,t,n);}),{AS_ENTRIES:!0}),e}});},function(t,e,n){var r=n(187);t.exports=r;},function(t,e,n){var r=n(16),o=n(19);r(e,"__esModule",{value:!0}),e.generateRemediationFunctions=void 0,n(58);var i=o(n(200)),a=o(n(118)),u=o(n(201));e.generateRemediationFunctions=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return (0, i.default)((0, a.default)(t).call(t,(function(t){return [t.name,(0, u.default)(t,e)]})))};},function(t,e,n){n(390);var r=n(393),o=n(395),i=n(397),a=n(117),u=n(119),s=n(399),c=n(16),f=n(19);c(e,"__esModule",{value:!0}),e.divideActionParamsByMutability=void 0;var l=f(n(119));function h(t,e){var n;if(void 0===i||null==a(t)){if(u(t)||(n=function(t,e){var n;if(!t)return;if("string"==typeof t)return p(t,e);var i=r(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return o(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return p(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var c=0,f=function(){};return {s:f,n:function(){return c>=t.length?{done:!0}:{done:!1,value:t[c++]}},e:function(t){throw t},f:f}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,h=!0,d=!1;return {s:function(){n=s(t);},n:function(){var t=n.next();return h=t.done,t},e:function(t){d=!0,l=t;},f:function(){try{h||null==n.return||n.return();}finally{if(d)throw l}}}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}
    /*!
     * Copyright (c) 2021-Present, Okta, Inc. and/or its affiliates. All rights reserved.
     * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the "License.")
     *
     * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
     * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     *
     * See the License for the specific language governing permissions and limitations under the License.
     */n(58);var d=function(t){return !1!==t.mutable},v=function(t){var e={},n=[],r={};if(!t.value)return n.push(t),{defaultParamsForAction:e,neededParamsForAction:n,immutableParamsForAction:r};var o,i=h(t.value);try{for(i.s();!(o=i.n()).done;){var a,u,s=o.value;if(d(s))n.push(s),null!==(a=s.value)&&void 0!==a&&a&&(e[s.name]=s.value);else r[s.name]=null!==(u=s.value)&&void 0!==u?u:"";}}catch(t){i.e(t);}finally{i.f();}return {defaultParamsForAction:e,neededParamsForAction:n,immutableParamsForAction:r}};e.divideActionParamsByMutability=function(t){var e,n=[],r={},o={},i=h(t=(0, l.default)(t)?t:[t]);try{for(i.s();!(e=i.n()).done;){var a=e.value,u=v(a),s=u.defaultParamsForAction,c=u.neededParamsForAction,f=u.immutableParamsForAction;n.push(c),r[a.name]=s,o[a.name]=f;}}catch(t){i.e(t);}finally{i.f();}return {defaultParams:r,neededParams:n,immutableParams:o}};},function(t,e,n){var r=n(120),o=n(101),i=n(391);r||o(Object.prototype,"toString",i,{unsafe:!0});},function(t,e,n){var r=n(120),o=n(392);t.exports=r?{}.toString:function(){return "[object "+o(this)+"]"};},function(t,e,n){var r=n(120),o=n(100),i=n(73)("toStringTag"),a="Arguments"==o(function(){return arguments}());t.exports=r?o:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:a?o(e):"Object"==(r=o(e))&&"function"==typeof e.callee?"Arguments":r};},function(t,e,n){t.exports=n(394);},function(t,e,n){var r=n(192);t.exports=r;},function(t,e,n){t.exports=n(396);},function(t,e,n){var r=n(194);t.exports=r;},function(t,e,n){t.exports=n(398);},function(t,e,n){var r=n(188);t.exports=r;},function(t,e,n){t.exports=n(400);},function(t,e,n){n(52),n(40);var r=n(163);t.exports=r;},function(t,e,n){function r(t){return (r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return (o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return (i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}function u(t,e,n){return (u=a()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&i(o,n.prototype),o}).apply(null,arguments)}function s(t){var e="function"==typeof Map?new Map:void 0;return (s=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r);}function r(){return u(t,arguments,o(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),i(r,t)})(t)}function c(t,e){return !e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return "Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.r(e),n.d(e,"JSONPath",(function(){return g}));var p=Object.prototype.hasOwnProperty;function d(t,e){return (t=t.slice()).push(e),t}function v(t,e){return (e=e.slice()).unshift(t),e}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e);}(u,t);var e,n,r=(e=u,n=a(),function(){var t,r=o(e);if(n){var i=o(this).constructor;t=Reflect.construct(r,arguments,i);}else t=r.apply(this,arguments);return c(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=r.call(this,'JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)')).avoidNew=!0,e.value=t,e.name="NewError",e}return u}(s(Error));function g(t,e,n,o,i){if(!(this instanceof g))try{return new g(t,e,n,o,i)}catch(t){if(!t.avoidNew)throw t;return t.value}"string"==typeof t&&(i=o,o=n,n=e,e=t,t=null);var a=t&&"object"===r(t);if(t=t||{},this.json=t.json||n,this.path=t.path||e,this.resultType=t.resultType||"value",this.flatten=t.flatten||!1,this.wrap=!p.call(t,"wrap")||t.wrap,this.sandbox=t.sandbox||{},this.preventEval=t.preventEval||!1,this.parent=t.parent||null,this.parentProperty=t.parentProperty||null,this.callback=t.callback||o||null,this.otherTypeCallback=t.otherTypeCallback||i||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},!1!==t.autostart){var u={path:a?t.path:e};a?"json"in t&&(u.json=t.json):u.json=n;var s=this.evaluate(u);if(!s||"object"!==r(s))throw new y(s);return s}}g.prototype.evaluate=function(t,e,n,o){var i=this,a=this.parent,u=this.parentProperty,s=this.flatten,c=this.wrap;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,n=n||this.callback,this.currOtherTypeCallback=o||this.otherTypeCallback,e=e||this.json,(t=t||this.path)&&"object"===r(t)&&!Array.isArray(t)){if(!t.path&&""!==t.path)throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!p.call(t,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');e=t.json,s=p.call(t,"flatten")?t.flatten:s,this.currResultType=p.call(t,"resultType")?t.resultType:this.currResultType,this.currSandbox=p.call(t,"sandbox")?t.sandbox:this.currSandbox,c=p.call(t,"wrap")?t.wrap:c,this.currPreventEval=p.call(t,"preventEval")?t.preventEval:this.currPreventEval,n=p.call(t,"callback")?t.callback:n,this.currOtherTypeCallback=p.call(t,"otherTypeCallback")?t.otherTypeCallback:this.currOtherTypeCallback,a=p.call(t,"parent")?t.parent:a,u=p.call(t,"parentProperty")?t.parentProperty:u,t=t.path;}if(a=a||null,u=u||null,Array.isArray(t)&&(t=g.toPathString(t)),(t||""===t)&&e){var f=g.toPathArray(t);"$"===f[0]&&f.length>1&&f.shift(),this._hasParentSelector=null;var l=this._trace(f,e,["$"],a,u,n).filter((function(t){return t&&!t.isParentSelector}));return l.length?c||1!==l.length||l[0].hasArrExpr?l.reduce((function(t,e){var n=i._getPreferredOutput(e);return s&&Array.isArray(n)?t=t.concat(n):t.push(n),t}),[]):this._getPreferredOutput(l[0]):c?[]:void 0}},g.prototype._getPreferredOutput=function(t){var e=this.currResultType;switch(e){case"all":var n=Array.isArray(t.path)?t.path:g.toPathArray(t.path);return t.pointer=g.toPointer(n),t.path="string"==typeof t.path?t.path:g.toPathString(t.path),t;case"value":case"parent":case"parentProperty":return t[e];case"path":return g.toPathString(t[e]);case"pointer":return g.toPointer(t.path);default:throw new TypeError("Unknown result type")}},g.prototype._handleCallback=function(t,e,n){if(e){var r=this._getPreferredOutput(t);t.path="string"==typeof t.path?t.path:g.toPathString(t.path),e(r,n,t);}},g.prototype._trace=function(t,e,n,o,i,a,u,s){var c,f=this;if(!t.length)return c={path:n,value:e,parent:o,parentProperty:i,hasArrExpr:u},this._handleCallback(c,a,"value"),c;var h=t[0],y=t.slice(1),g=[];function m(t){Array.isArray(t)?t.forEach((function(t){g.push(t);})):g.push(t);}if(("string"!=typeof h||s)&&e&&p.call(e,h))m(this._trace(y,e[h],d(n,h),e,h,a,u));else if("*"===h)this._walk(h,y,e,n,o,i,a,(function(t,e,n,r,o,i,a,u){m(f._trace(v(t,n),r,o,i,a,u,!0,!0));}));else if(".."===h)m(this._trace(y,e,n,o,i,a,u)),this._walk(h,y,e,n,o,i,a,(function(t,e,n,o,i,a,u,s){"object"===r(o[t])&&m(f._trace(v(e,n),o[t],d(i,t),o,t,s,!0));}));else{if("^"===h)return this._hasParentSelector=!0,{path:n.slice(0,-1),expr:y,isParentSelector:!0};if("~"===h)return c={path:d(n,h),value:i,parent:o,parentProperty:null},this._handleCallback(c,a,"property"),c;if("$"===h)m(this._trace(y,e,n,null,null,a,u));else if(/^(\x2D?[0-9]*):(\x2D?[0-9]*):?([0-9]*)$/.test(h))m(this._slice(h,y,e,n,o,i,a));else if(0===h.indexOf("?(")){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");this._walk(h,y,e,n,o,i,a,(function(t,e,n,r,o,i,a,u){f._eval(e.replace(/^\?\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)\)$/,"$1"),r[t],t,o,i,a)&&m(f._trace(v(t,n),r,o,i,a,u,!0));}));}else if("("===h[0]){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");m(this._trace(v(this._eval(h,e,n[n.length-1],n.slice(0,-1),o,i),y),e,n,o,i,a,u));}else if("@"===h[0]){var b=!1,w=h.slice(1,-2);switch(w){case"scalar":e&&["object","function"].includes(r(e))||(b=!0);break;case"boolean":case"string":case"undefined":case"function":r(e)===w&&(b=!0);break;case"integer":!Number.isFinite(e)||e%1||(b=!0);break;case"number":Number.isFinite(e)&&(b=!0);break;case"nonFinite":"number"!=typeof e||Number.isFinite(e)||(b=!0);break;case"object":e&&r(e)===w&&(b=!0);break;case"array":Array.isArray(e)&&(b=!0);break;case"other":b=this.currOtherTypeCallback(e,n,o,i);break;case"null":null===e&&(b=!0);break;default:throw new TypeError("Unknown value type "+w)}if(b)return c={path:n,value:e,parent:o,parentProperty:i},this._handleCallback(c,a,"value"),c}else if("`"===h[0]&&e&&p.call(e,h.slice(1))){var x=h.slice(1);m(this._trace(y,e[x],d(n,x),e,x,a,u,!0));}else if(h.includes(",")){var k,S=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=l(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return {s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return {s:function(){n=n.call(t);},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t;},f:function(){try{a||null==n.return||n.return();}finally{if(u)throw i}}}}(h.split(","));try{for(S.s();!(k=S.n()).done;){var T=k.value;m(this._trace(v(T,y),e,n,o,i,a,!0));}}catch(t){S.e(t);}finally{S.f();}}else!s&&e&&p.call(e,h)&&m(this._trace(y,e[h],d(n,h),e,h,a,u,!0));}if(this._hasParentSelector)for(var _=0;_<g.length;_++){var O=g[_];if(O&&O.isParentSelector){var E=this._trace(O.expr,e,O.path,o,i,a,u);if(Array.isArray(E)){g[_]=E[0];for(var A=E.length,R=1;R<A;R++)_++,g.splice(_,0,E[R]);}else g[_]=E;}}return g},g.prototype._walk=function(t,e,n,o,i,a,u,s){if(Array.isArray(n))for(var c=n.length,f=0;f<c;f++)s(f,t,e,n,o,i,a,u);else n&&"object"===r(n)&&Object.keys(n).forEach((function(r){s(r,t,e,n,o,i,a,u);}));},g.prototype._slice=function(t,e,n,r,o,i,a){if(Array.isArray(n)){var u=n.length,s=t.split(":"),c=s[2]&&Number.parseInt(s[2])||1,f=s[0]&&Number.parseInt(s[0])||0,l=s[1]&&Number.parseInt(s[1])||u;f=f<0?Math.max(0,f+u):Math.min(u,f),l=l<0?Math.max(0,l+u):Math.min(u,l);for(var h=[],p=f;p<l;p+=c){this._trace(v(p,e),n,r,o,i,a,!0).forEach((function(t){h.push(t);}));}return h}},g.prototype._eval=function(t,e,n,r,o,i){t.includes("@parentProperty")&&(this.currSandbox._$_parentProperty=i,t=t.replace(/@parentProperty/g,"_$_parentProperty")),t.includes("@parent")&&(this.currSandbox._$_parent=o,t=t.replace(/@parent/g,"_$_parent")),t.includes("@property")&&(this.currSandbox._$_property=n,t=t.replace(/@property/g,"_$_property")),t.includes("@path")&&(this.currSandbox._$_path=g.toPathString(r.concat([n])),t=t.replace(/@path/g,"_$_path")),t.includes("@root")&&(this.currSandbox._$_root=this.json,t=t.replace(/@root/g,"_$_root")),/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/.test(t)&&(this.currSandbox._$_v=e,t=t.replace(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/g,"_$_v$1"));try{return this.vm.runInNewContext(t,this.currSandbox)}catch(e){throw console.log(e),new Error("jsonPath: "+e.message+": "+t)}},g.cache={},g.toPathString=function(t){for(var e=t,n=e.length,r="$",o=1;o<n;o++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(e[o])||(r+=/^[\*0-9]+$/.test(e[o])?"["+e[o]+"]":"['"+e[o]+"']");return r},g.toPointer=function(t){for(var e=t,n=e.length,r="",o=1;o<n;o++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(e[o])||(r+="/"+e[o].toString().replace(/~/g,"~0").replace(/\//g,"~1"));return r},g.toPathArray=function(t){var e=g.cache;if(e[t])return e[t].concat();var n=[],r=t.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g,";$&;").replace(/['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))['\]]/g,(function(t,e){return "[#"+(n.push(e)-1)+"]"})).replace(/\[["']((?:(?!['\]])[\s\S])*)["']\]/g,(function(t,e){return "['"+e.replace(/\./g,"%@%").replace(/~/g,"%%@@%%")+"']"})).replace(/~/g,";~;").replace(/["']?\.["']?(?!(?:(?!\[)[\s\S])*\])|\[["']?/g,";").replace(/%@%/g,".").replace(/%%@@%%/g,"~").replace(/(?:;)?(\^+)(?:;)?/g,(function(t,e){return ";"+e.split("").join(";")+";"})).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").split(";").map((function(t){var e=t.match(/#([0-9]+)/);return e&&e[1]?n[e[1]]:t}));return e[t]=r,e[t].concat()};g.prototype.vm={runInNewContext:function(t,e){var n=Object.keys(e),r=[];!function(t,e,n){for(var r=t.length,o=0;o<r;o++){n(t[o])&&e.push(t.splice(o--,1)[0]);}}(n,r,(function(t){return "function"==typeof e[t]}));var o=n.map((function(t,n){return e[t]})),i=r.reduce((function(t,n){var r=e[n].toString();return /function/.test(r)||(r="function "+r),"var "+n+"="+r+";"+t}),"");/(["'])use strict\1/.test(t=i+t)||n.includes("arguments")||(t="var arguments = undefined;"+t);var a=(t=t.replace(/;[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*$/,"")).lastIndexOf(";"),s=a>-1?t.slice(0,a+1)+" return "+t.slice(a+1):" return "+t;return u(Function,f(n).concat([s])).apply(void 0,f(o))}};},function(t,e,n){var r=n(1);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t},t.exports.default=t.exports,t.exports.__esModule=!0;},function(t,e){function n(){}n.prototype={on:function(t,e,n){var r=this.e||(this.e={});return (r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var r=this;function o(){r.off(t,o),e.apply(n,arguments);}return o._=e,this.on(t,o,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),r=0,o=n.length;r<o;r++)n[r].fn.apply(n[r].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],o=[];if(r&&e)for(var i=0,a=r.length;i<a;i++)r[i].fn!==e&&r[i].fn._!==e&&o.push(r[i]);return o.length?n[t]=o:delete n[t],this}},t.exports=n;},function(t,e,n){n.r(e),n.d(e,"OktaAuth",(function(){return ri})),n.d(e,"STATE_TOKEN_KEY_NAME",(function(){return h})),n.d(e,"DEFAULT_POLLING_DELAY",(function(){return p})),n.d(e,"DEFAULT_MAX_CLOCK_SKEW",(function(){return d})),n.d(e,"DEFAULT_CACHE_DURATION",(function(){return v})),n.d(e,"REDIRECT_OAUTH_PARAMS_NAME",(function(){return y})),n.d(e,"REDIRECT_STATE_COOKIE_NAME",(function(){return g})),n.d(e,"REDIRECT_NONCE_COOKIE_NAME",(function(){return m})),n.d(e,"TOKEN_STORAGE_NAME",(function(){return b})),n.d(e,"CACHE_STORAGE_NAME",(function(){return w})),n.d(e,"PKCE_STORAGE_NAME",(function(){return x})),n.d(e,"TRANSACTION_STORAGE_NAME",(function(){return k})),n.d(e,"IDX_RESPONSE_STORAGE_NAME",(function(){return S})),n.d(e,"ACCESS_TOKEN_STORAGE_KEY",(function(){return T})),n.d(e,"ID_TOKEN_STORAGE_KEY",(function(){return _})),n.d(e,"REFRESH_TOKEN_STORAGE_KEY",(function(){return O})),n.d(e,"REFERRER_PATH_STORAGE_KEY",(function(){return E})),n.d(e,"MIN_VERIFIER_LENGTH",(function(){return A})),n.d(e,"MAX_VERIFIER_LENGTH",(function(){return R})),n.d(e,"DEFAULT_CODE_CHALLENGE_METHOD",(function(){return P})),n.d(e,"IDX_API_VERSION",(function(){return j})),n.d(e,"isOAuthTransactionMeta",(function(){return We})),n.d(e,"isPKCETransactionMeta",(function(){return Xe})),n.d(e,"isIdxTransactionMeta",(function(){return Ze})),n.d(e,"isCustomAuthTransactionMeta",(function(){return Qe})),n.d(e,"isTransactionMeta",(function(){return tn})),n.d(e,"IdxStatus",(function(){return ze})),n.d(e,"IdxFeature",(function(){return Ye})),n.d(e,"isToken",(function(){return en})),n.d(e,"isAccessToken",(function(){return nn})),n.d(e,"isIDToken",(function(){return rn})),n.d(e,"isRefreshToken",(function(){return on})),n.d(e,"transactionStatus",(function(){return At})),n.d(e,"resumeTransaction",(function(){return Rt})),n.d(e,"transactionExists",(function(){return jt})),n.d(e,"postToTransaction",(function(){return Ct})),n.d(e,"introspect",(function(){return Pt})),n.d(e,"AuthTransaction",(function(){return _t})),n.d(e,"getPollFn",(function(){return Tt})),n.d(e,"TransactionState",(function(){return It})),n.d(e,"addStateToken",(function(){return wt})),n.d(e,"getStateToken",(function(){return xt})),n.d(e,"isAuthApiError",(function(){return Lt})),n.d(e,"AuthApiError",(function(){return vt})),n.d(e,"AuthPollStopError",(function(){return St})),n.d(e,"AuthSdkError",(function(){return bt})),n.d(e,"OAuthError",(function(){return Ut})),n.d(e,"convertTokenParamsToOAuthParams",(function(){return Zt})),n.d(e,"buildAuthorizeParams",(function(){return Qt})),n.d(e,"postToTokenEndpoint",(function(){return ne})),n.d(e,"postRefreshToken",(function(){return re})),n.d(e,"getWellKnown",(function(){return oe})),n.d(e,"getKey",(function(){return ie})),n.d(e,"addListener",(function(){return ge})),n.d(e,"removeListener",(function(){return me})),n.d(e,"loadFrame",(function(){return be})),n.d(e,"loadPopup",(function(){return we})),n.d(e,"addPostMessageListener",(function(){return xe})),n.d(e,"getDefaultTokenParams",(function(){return Ae})),n.d(e,"isInteractionRequiredError",(function(){return Re})),n.d(e,"isAuthorizationCodeError",(function(){return Pe})),n.d(e,"hasTokensInHash",(function(){return je})),n.d(e,"hasAuthorizationCode",(function(){return Ce})),n.d(e,"hasInteractionCode",(function(){return Ie})),n.d(e,"hasErrorInUrl",(function(){return Me})),n.d(e,"isRedirectUri",(function(){return Ue})),n.d(e,"isCodeFlow",(function(){return Le})),n.d(e,"getHashOrSearch",(function(){return Fe})),n.d(e,"isLoginRedirect",(function(){return Ne})),n.d(e,"isInteractionRequired",(function(){return De})),n.d(e,"generateState",(function(){return ke})),n.d(e,"generateNonce",(function(){return Se})),n.d(e,"getOAuthBaseUrl",(function(){return _e})),n.d(e,"getOAuthDomain",(function(){return Oe})),n.d(e,"getOAuthUrls",(function(){return Ee})),n.d(e,"pkce",(function(){return Yt})),n.d(e,"prepareTokenParams",(function(){return Be})),n.d(e,"isSameRefreshToken",(function(){return He})),n.d(e,"isRefreshTokenError",(function(){return Ke})),n.d(e,"urlParamsToObject",(function(){return qe})),n.d(e,"validateClaims",(function(){return Ve})),n.d(e,"validateToken",(function(){return an})),n.d(e,"decodeToken",(function(){return un})),n.d(e,"revokeToken",(function(){return sn})),n.d(e,"renewToken",(function(){return wn})),n.d(e,"renewTokensWithRefresh",(function(){return yn})),n.d(e,"renewTokens",(function(){return kn})),n.d(e,"verifyToken",(function(){return ln})),n.d(e,"getUserInfo",(function(){return Tn})),n.d(e,"handleOAuthResponse",(function(){return hn})),n.d(e,"exchangeCodeForTokens",(function(){return cn})),n.d(e,"getToken",(function(){return pn})),n.d(e,"getWithoutPrompt",(function(){return dn})),n.d(e,"getWithPopup",(function(){return _n})),n.d(e,"getWithRedirect",(function(){return On})),n.d(e,"parseFromUrl",(function(){return En})),n.d(e,"EVENT_EXPIRED",(function(){return Dn})),n.d(e,"EVENT_RENEWED",(function(){return Bn})),n.d(e,"EVENT_ADDED",(function(){return Hn})),n.d(e,"EVENT_REMOVED",(function(){return Kn})),n.d(e,"EVENT_ERROR",(function(){return qn})),n.d(e,"TokenManager",(function(){return zn})),n.d(e,"INITIAL_AUTH_STATE",(function(){return Wn})),n.d(e,"AuthStateManager",(function(){return Zn})),n.d(e,"getNativeConsole",(function(){return C})),n.d(e,"getConsole",(function(){return I})),n.d(e,"warn",(function(){return M})),n.d(e,"deprecate",(function(){return U})),n.d(e,"deprecateWrap",(function(){return L})),n.d(e,"isoToUTCString",(function(){return F})),n.d(e,"genRandomString",(function(){return N})),n.d(e,"delay",(function(){return D})),n.d(e,"bind",(function(){return B})),n.d(e,"extend",(function(){return H})),n.d(e,"removeNils",(function(){return K})),n.d(e,"clone",(function(){return q})),n.d(e,"omit",(function(){return V})),n.d(e,"find",(function(){return z})),n.d(e,"getLink",(function(){return Y})),n.d(e,"isString",(function(){return G})),n.d(e,"isObject",(function(){return J})),n.d(e,"isNumber",(function(){return $})),n.d(e,"isFunction",(function(){return W})),n.d(e,"isPromise",(function(){return X})),n.d(e,"isAbsoluteUrl",(function(){return Z})),n.d(e,"toAbsoluteUrl",(function(){return Q})),n.d(e,"toRelativeUrl",(function(){return tt})),n.d(e,"toQueryString",(function(){return et})),n.d(e,"removeTrailingSlash",(function(){return nt}));var r={};n.r(r),n.d(r,"STATE_TOKEN_KEY_NAME",(function(){return h})),n.d(r,"DEFAULT_POLLING_DELAY",(function(){return p})),n.d(r,"DEFAULT_MAX_CLOCK_SKEW",(function(){return d})),n.d(r,"DEFAULT_CACHE_DURATION",(function(){return v})),n.d(r,"REDIRECT_OAUTH_PARAMS_NAME",(function(){return y})),n.d(r,"REDIRECT_STATE_COOKIE_NAME",(function(){return g})),n.d(r,"REDIRECT_NONCE_COOKIE_NAME",(function(){return m})),n.d(r,"TOKEN_STORAGE_NAME",(function(){return b})),n.d(r,"CACHE_STORAGE_NAME",(function(){return w})),n.d(r,"PKCE_STORAGE_NAME",(function(){return x})),n.d(r,"TRANSACTION_STORAGE_NAME",(function(){return k})),n.d(r,"IDX_RESPONSE_STORAGE_NAME",(function(){return S})),n.d(r,"ACCESS_TOKEN_STORAGE_KEY",(function(){return T})),n.d(r,"ID_TOKEN_STORAGE_KEY",(function(){return _})),n.d(r,"REFRESH_TOKEN_STORAGE_KEY",(function(){return O})),n.d(r,"REFERRER_PATH_STORAGE_KEY",(function(){return E})),n.d(r,"MIN_VERIFIER_LENGTH",(function(){return A})),n.d(r,"MAX_VERIFIER_LENGTH",(function(){return R})),n.d(r,"DEFAULT_CODE_CHALLENGE_METHOD",(function(){return P})),n.d(r,"IDX_API_VERSION",(function(){return j}));var o={};n.r(o),n.d(o,"isBrowser",(function(){return ue})),n.d(o,"isIE11OrLess",(function(){return se})),n.d(o,"getUserAgent",(function(){return ce})),n.d(o,"isFingerprintSupported",(function(){return fe})),n.d(o,"isPopupPostMessageSupported",(function(){return le})),n.d(o,"isTokenVerifySupported",(function(){return he})),n.d(o,"hasTextEncoder",(function(){return pe})),n.d(o,"isPKCESupported",(function(){return de})),n.d(o,"isHTTPS",(function(){return ve})),n.d(o,"isLocalhost",(function(){return ye}));var i={};n.r(i),n.d(i,"Remediator",(function(){return Nr})),n.d(i,"EnrollAuthenticator",(function(){return Kr})),n.d(i,"ChallengeAuthenticator",(function(){return Vr})),n.d(i,"ResetAuthenticator",(function(){return Yr})),n.d(i,"EnrollProfile",(function(){return Jr})),n.d(i,"Identify",(function(){return Zr})),n.d(i,"ReEnrollAuthenticator",(function(){return to})),n.d(i,"RedirectIdp",(function(){return no})),n.d(i,"SelectAuthenticatorAuthenticate",(function(){return co})),n.d(i,"SelectAuthenticatorEnroll",(function(){return lo})),n.d(i,"SelectEnrollProfile",(function(){return po})),n.d(i,"AuthenticatorVerificationData",(function(){return mo})),n.d(i,"AuthenticatorEnrollmentData",(function(){return wo})),n.d(i,"Skip",(function(){return ko}));var a=n(2),u=n.n(a),s=n(3),c=n.n(s),f=n(0),l=n.n(f),h="oktaStateToken",p=500,d=300,v=86400,y="okta-oauth-redirect-params",g="okta-oauth-state",m="okta-oauth-nonce",b="okta-token-storage",w="okta-cache-storage",x="okta-pkce-storage",k="okta-transaction-storage",S="okta-idx-response-storage",T="accessToken",_="idToken",O="refreshToken",E="referrerPath",A=43,R=128,P="S256",j="1.0.0";function C(){return "undefined"!=typeof window?window.console:"undefined"!=typeof console?console:void 0}function I(){var t=C();return t&&t.log?t:{log:function(){},warn:function(){},group:function(){},groupEnd:function(){}}}function M(t){I().warn("[okta-auth-sdk] WARN: "+t);}function U(t){I().warn("[okta-auth-sdk] DEPRECATION: "+t);}function L(t,e){return function(){return U(t),e.apply(null,arguments)}}function F(t){var e=t.match(/\d+/g),n=Date.UTC(e[0],e[1]-1,e[2],e[3],e[4],e[5]);return new Date(n).toUTCString()}function N(t){for(var e="abcdefghijklnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n="",r=0,o=e.length;r<t;++r)n+=e[Math.floor(Math.random()*o)];return n}function D(t){return new Promise((function(e){setTimeout(e,t);}))}function B(t,e){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return r=n.concat(r),t.apply(e,r)}}function H(){var t=arguments[0],e=[].slice.call(arguments,1);return e.forEach((function(e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&void 0!==e[n]&&(t[n]=e[n]);})),t}function K(t){var e={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=t[n];null!=r&&(e[n]=r);}return e}function q(t){if(t){var e=JSON.stringify(t);if(e)return JSON.parse(e)}return t}function V(t){for(var e={},n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&-1==r.indexOf(i)&&(e[i]=t[i]);return q(e)}function z(t,e){for(var n=t.length;n--;){var r=t[n],o=!0;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&r[i]!==e[i]){o=!1;break}if(o)return r}}function Y(t,e,n){if(t&&t._links){var r=q(t._links[e]);return r&&r.name&&n?r.name===n?r:void 0:r}}function G(t){return "[object String]"===Object.prototype.toString.call(t)}function J(t){return "[object Object]"===Object.prototype.toString.call(t)}function $(t){return "[object Number]"===Object.prototype.toString.call(t)}function W(t){return !!t&&"[object Function]"==={}.toString.call(t)}function X(t){return t&&t.finally&&"function"==typeof t.finally}function Z(t){return /^(?:[a-z]+:)?\/\//i.test(t)}function Q(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;return Z(t)?t:(e=nt(e),"/"===t[0]?"".concat(e).concat(t):"".concat(e,"/").concat(t))}function tt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;return Z(t)&&(t=t.substring(e.length)),"/"===t[0]?t:"/".concat(t)}function et(t){var e=[];if(null!==t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&void 0!==t[n]&&null!==t[n]&&e.push(n+"="+encodeURIComponent(t[n]));return e.length?"?"+e.join("&"):""}function nt(t){if(t){var e=t.replace(/^\s+|\s+$/gm,"");return e=e.replace(/\/+$/,"")}}var rt=n(4),ot=n.n(rt),it=n(5),at=n.n(it),ut=n(1),st=n.n(ut),ct=n(78),ft=n.n(ct),lt=n(121);function ht(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}();return function(){var n,r=st()(t);if(e){var o=st()(this).constructor;n=Reflect.construct(r,arguments,o);}else n=r.apply(this,arguments);return at()(this,n)}}var pt=function(t){ot()(n,t);var e=ht(n);function n(t){var r;return u()(this,n),r=e.call(this,t),Object.setPrototypeOf(ft()(r),(this instanceof n?this.constructor:void 0).prototype),r}return n}(n.n(lt)()(Error));function dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}();return function(){var n,r=st()(t);if(e){var o=st()(this).constructor;n=Reflect.construct(r,arguments,o);}else n=r.apply(this,arguments);return at()(this,n)}}var vt=function(t){ot()(n,t);var e=dt(n);function n(t,r){var o;u()(this,n);var i=t.errorSummary;return (o=e.call(this,i)).name="AuthApiError",o.errorSummary=t.errorSummary,o.errorCode=t.errorCode,o.errorLink=t.errorLink,o.errorId=t.errorId,o.errorCauses=t.errorCauses,r&&(o.xhr=r),o}return n}(pt);function yt(t,e){var n=(e=e||{}).url,r=e.method,o=e.args,i=e.saveAuthnState,a=e.accessToken,u=!0===e.withCredentials,s=t.options.storageUtil.storage,c=t.storageManager.getHttpCache(t.options.cookies);if(e.cacheResponse){var f=c.getStorage()[n];if(f&&Date.now()/1e3<f.expiresAt)return Promise.resolve(f.response)}var l={Accept:"application/json","Content-Type":"application/json","X-Okta-User-Agent-Extended":t.userAgent};Object.assign(l,t.options.headers,e.headers),l=K(l),a&&G(a)&&(l.Authorization="Bearer "+a);var p,d,y={headers:l,data:o||void 0,withCredentials:u};return t.options.httpRequestClient(r,n,y).then((function(r){return (d=r.responseText)&&G(d)&&(d=JSON.parse(d)),i&&(d.stateToken||s.delete(h)),d&&d.stateToken&&d.expiresAt&&s.set(h,d.stateToken,d.expiresAt,t.options.cookies),d&&e.cacheResponse&&c.updateStorage(n,{expiresAt:Math.floor(Date.now()/1e3)+v,response:d}),d})).catch((function(e){var n=e.responseText||{};if(G(n))try{n=JSON.parse(n);}catch(t){n={errorSummary:"Unknown error"};}throw e.status>=500&&(n.errorSummary="Unknown error"),t.options.transformErrorXHR&&(e=t.options.transformErrorXHR(q(e))),"E0000011"===(p=new vt(n,e)).errorCode&&s.delete(h),p}))}var gt={get:function(t,e,n){var r={url:e=Z(e)?e:t.getIssuerOrigin()+e,method:"GET"};return Object.assign(r,n),yt(t,r)},post:function(t,e,n,r){var o={url:e=Z(e)?e:t.getIssuerOrigin()+e,method:"POST",args:n,saveAuthnState:!0};return Object.assign(o,r),yt(t,o)},httpRequest:yt};function mt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}();return function(){var n,r=st()(t);if(e){var o=st()(this).constructor;n=Reflect.construct(r,arguments,o);}else n=r.apply(this,arguments);return at()(this,n)}}var bt=function(t){ot()(n,t);var e=mt(n);function n(t,r){var o;return u()(this,n),(o=e.call(this,t)).name="AuthSdkError",o.errorCode="INTERNAL",o.errorSummary=t,o.errorLink="INTERNAL",o.errorId="INTERNAL",o.errorCauses=[],r&&(o.xhr=r),o}return n}(pt);function wt(t,e){var n={};return Object.assign(n,e),!n.stateToken&&t.stateToken&&(n.stateToken=t.stateToken),n}function xt(t){return wt(t)}function kt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}();return function(){var n,r=st()(t);if(e){var o=st()(this).constructor;n=Reflect.construct(r,arguments,o);}else n=r.apply(this,arguments);return at()(this,n)}}var St=function(t){ot()(n,t);var e=kt(n);function n(){u()(this,n);return e.call(this,"The poll was stopped by the sdk")}return n}(pt);function Tt(t,e,n){return function(r){var o,i,a,u;$(r)?o=r:J(r)&&(o=(r=r).delay,i=r.rememberDevice,a=r.autoPush,u=r.transactionCallBack),o||0===o||(o=p);var s=Y(e,"next","poll");n.isPolling=!0;var c=0;return function r(){return n.isPolling?function(){var n={};if("function"==typeof a)try{n.autoPush=!!a();}catch(t){return Promise.reject(new bt("AutoPush resulted in an error."))}else null!=a&&(n.autoPush=!!a);if("function"==typeof i)try{n.rememberDevice=!!i();}catch(t){return Promise.reject(new bt("RememberDevice resulted in an error."))}else null!=i&&(n.rememberDevice=!!i);var r=s.href+et(n);return gt.post(t,r,xt(e),{saveAuthnState:!1,withCredentials:!0})}().then((function(e){if(c=0,e.factorResult&&"WAITING"===e.factorResult){if(!n.isPolling)throw new St;return "function"==typeof u&&u(e),D(o).then(r)}return n.isPolling=!1,new _t(t,e)})).catch((function(t){if(t.xhr&&(0===t.xhr.status||429===t.xhr.status)&&c<=4){var e=1e3*Math.pow(2,c);return c++,D(e).then(r)}throw t})):Promise.reject(new St)}().catch((function(t){throw n.isPolling=!1,t}))}}var _t=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(u()(this,t),n){if(this.data=n,this.data.interactionHandle)return void(this.status=n.status);Object.assign(this,Et(e,n,n,{})),delete this.stateToken,"RECOVERY_CHALLENGE"!==n.status||n._links||(this.cancel=function(){return Promise.resolve(new t(e))});}};function Ot(t,e,n,r,o){if(Array.isArray(r))return function(i,a){if(!i)throw new bt("Must provide a link name");var u=z(r,{name:i});if(!u)throw new bt("No link found for that name");return Ot(t,e,n,u,o)(a)};if(r.hints&&r.hints.allow&&1===r.hints.allow.length)switch(r.hints.allow[0]){case"GET":return function(){return gt.get(t,r.href,{withCredentials:!0})};case"POST":return function(i){o&&o.isPolling&&(o.isPolling=!1);var a=wt(e,i);"MFA_ENROLL"!==e.status&&"FACTOR_ENROLL"!==e.status||Object.assign(a,{factorType:n.factorType,provider:n.provider});var u={},s=a.autoPush;if(void 0!==s){if("function"==typeof s)try{u.autoPush=!!s();}catch(t){return Promise.reject(new bt("AutoPush resulted in an error."))}else null!==s&&(u.autoPush=!!s);a=V(a,"autoPush");}var c=a.rememberDevice;if(void 0!==c){if("function"==typeof c)try{u.rememberDevice=!!c();}catch(t){return Promise.reject(new bt("RememberDevice resulted in an error."))}else null!==c&&(u.rememberDevice=!!c);a=V(a,"rememberDevice");}else a.profile&&void 0!==a.profile.updatePhone&&(a.profile.updatePhone&&(u.updatePhone=!0),a.profile=V(a.profile,"updatePhone"));var f=r.href+et(u);return Ct(t,f,a)}}}function Et(t,e,n,r){if(n=q(n=n||e),Array.isArray(n)){for(var o=[],i=0,a=n.length;i<a;i++)o.push(Et(t,e,n[i],r));return o}var u=n._embedded||{};for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(J(u[s])||Array.isArray(u[s]))&&(u[s]=Et(t,e,u[s],r));var c=function(t,e,n,r){var o={};for(var i in n._links)if(Object.prototype.hasOwnProperty.call(n._links,i)){var a=n._links[i];if("next"===i&&(i=a.name),a.type)o[i]=a;else switch(i){case"poll":o.poll=Tt(t,e,r);break;default:var u=Ot(t,e,n,a,r);u&&(o[i]=u);}}return o}(t,e,n,r);return Object.assign(u,c),n=V(n,"_embedded","_links"),Object.assign(n,u),n}function At(t,e){return e=wt(t,e),gt.post(t,t.getIssuerOrigin()+"/api/v1/authn",e,{withCredentials:!0})}function Rt(t,e){if(!e||!e.stateToken){var n=t.tx.exists._get(h);if(!n)return Promise.reject(new bt("No transaction to resume"));e={stateToken:n};}return t.tx.status(e).then((function(e){return new _t(t,e)}))}function Pt(t,e){if(!e||!e.stateToken){var n=t.tx.exists._get(h);if(!n)return Promise.reject(new bt("No transaction to evaluate"));e={stateToken:n};}return function(t,e){return e=wt(t,e),gt.post(t,t.getIssuerOrigin()+"/api/v1/authn/introspect",e,{withCredentials:!0})}(t,e).then((function(e){return new _t(t,e)}))}function jt(t){return !!t.tx.exists._get(h)}function Ct(t,e,n,r){return gt.post(t,e,n,r).then((function(e){return new _t(t,e)}))}var It=function t(){u()(this,t);};function Mt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}();return function(){var n,r=st()(t);if(e){var o=st()(this).constructor;n=Reflect.construct(r,arguments,o);}else n=r.apply(this,arguments);return at()(this,n)}}var Ut=function(t){ot()(n,t);var e=Mt(n);function n(t,r){var o;return u()(this,n),(o=e.call(this,r)).name="OAuthError",o.errorCode=t,o.errorSummary=r,o}return n}(pt);function Lt(t){return t instanceof vt}var Ft=function(t){return atob(t)},Nt=function(t){return btoa(t)},Dt="undefined"==typeof crypto?null:crypto;function Bt(t){return function(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}(Nt(t))}function Ht(t){return t.replace(/-/g,"+").replace(/_/g,"/")}function Kt(t){var e=Ht(t);switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new bt("Not a valid Base64Url")}var n=Ft(e);try{return decodeURIComponent(escape(n))}catch(t){return n}}function qt(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}function Vt(t,e){e=q(e);var n={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};return delete e.use,Dt.subtle.importKey("jwk",e,n,!0,["verify"]).then((function(e){var r,o=t.split("."),i=qt(o[0]+"."+o[1]),a=qt((r=o[2],Ft(Ht(r))));return Dt.subtle.verify(n,e,a,i)}))}function zt(t){return ("0"+t.toString(16)).substr(-2)}var Yt={DEFAULT_CODE_CHALLENGE_METHOD:P,generateVerifier:function(t){var e,n,r=t||"";return r.length<A&&(r+=(e=A-r.length,n=new Uint8Array(Math.ceil(e/2)),Dt.getRandomValues(n),Array.from(n,zt).join("").slice(0,e))),encodeURIComponent(r).slice(0,R)},computeChallenge:function(t){var e=(new TextEncoder).encode(t);return Dt.subtle.digest("SHA-256",e).then((function(t){return Bt(String.fromCharCode.apply(null,new Uint8Array(t)))}))}};function Gt(t){return t.session.get().then((function(t){return "ACTIVE"===t.status})).catch((function(){return !1}))}function Jt(t){return gt.get(t,"/api/v1/sessions/me",{withCredentials:!0}).then((function(e){var n=V(e,"_links");return n.refresh=function(){return gt.post(t,Y(e,"refresh").href,{},{withCredentials:!0})},n.user=function(){return gt.get(t,Y(e,"user").href,{withCredentials:!0})},n})).catch((function(){return {status:"INACTIVE"}}))}function $t(t){return gt.httpRequest(t,{url:t.getIssuerOrigin()+"/api/v1/sessions/me",method:"DELETE",withCredentials:!0})}function Wt(t){return gt.post(t,"/api/v1/sessions/me/lifecycle/refresh",{},{withCredentials:!0})}function Xt(t,e,n){n=n||window.location.href,window.location.assign(t.getIssuerOrigin()+"/login/sessionCookieRedirect"+et({checkAccountSetupComplete:!0,token:e,redirectUrl:n}));}function Zt(t){if(!t.clientId)throw new bt("A clientId must be specified in the OktaAuth constructor to get a token");if(G(t.responseType)&&-1!==t.responseType.indexOf(" "))throw new bt("Multiple OAuth responseTypes must be defined as an array");var e={client_id:t.clientId,code_challenge:t.codeChallenge,code_challenge_method:t.codeChallengeMethod,display:t.display,idp:t.idp,idp_scope:t.idpScope,login_hint:t.loginHint,max_age:t.maxAge,nonce:t.nonce,prompt:t.prompt,redirect_uri:t.redirectUri,response_mode:t.responseMode,response_type:t.responseType,sessionToken:t.sessionToken,state:t.state};if(e=K(e),["idp_scope","response_type"].forEach((function(t){Array.isArray(e[t])&&(e[t]=e[t].join(" "));})),-1!==t.responseType.indexOf("id_token")&&-1===t.scopes.indexOf("openid"))throw new bt("openid scope must be specified in the scopes argument when requesting an id_token");return e.scope=t.scopes.join(" "),e}function Qt(t){return et(Zt(t))}var te=n(122),ee=n.n(te);function ne(t,e,n){!function(t){if(!t.clientId)throw new bt("A clientId must be specified in the OktaAuth constructor to get a token");if(!t.redirectUri)throw new bt("The redirectUri passed to /authorize must also be passed to /token");if(!t.authorizationCode&&!t.interactionCode)throw new bt("An authorization code (returned from /authorize) must be passed to /token");if(!t.codeVerifier)throw new bt('The "codeVerifier" (generated and saved by your app) must be passed to /token')}(e);var r=function(t,e){var n=K({client_id:e.clientId,redirect_uri:e.redirectUri,grant_type:e.interactionCode?"interaction_code":"authorization_code",code_verifier:e.codeVerifier});e.interactionCode?n.interaction_code=e.interactionCode:e.authorizationCode&&(n.code=e.authorizationCode);var r=t.options.clientSecret;return r&&(n.client_secret=r),et(n).slice(1)}(t,e);return gt.httpRequest(t,{url:n.tokenUrl,method:"POST",args:r,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function re(t,e,n){return gt.httpRequest(t,{url:n.tokenUrl,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},args:Object.entries({client_id:e.clientId,grant_type:"refresh_token",scope:n.scopes.join(" "),refresh_token:n.refreshToken}).map((function(t){var e=ee()(t,2),n=e[0],r=e[1];return n+"="+encodeURIComponent(r)})).join("&")})}function oe(t,e){var n=e||t.options.issuer;return gt.get(t,n+"/.well-known/openid-configuration",{cacheResponse:!0})}function ie(t,e,n){var r=t.storageManager.getHttpCache(t.options.cookies);return oe(t,e).then((function(e){var o=e.jwks_uri,i=r.getStorage()[o];if(i&&Date.now()/1e3<i.expiresAt){var a=z(i.response.keys,{kid:n});if(a)return a}return r.clearStorage(o),gt.get(t,o,{cacheResponse:!0}).then((function(t){var e=z(t.keys,{kid:n});if(e)return e;throw new bt("The key id, "+n+", was not found in the server's keys")}))}))}var ae=/windows phone|iemobile|wpdesktop/i;function ue(){return "undefined"!=typeof document&&"undefined"!=typeof window}function se(){return ue()&&!!document.documentMode&&document.documentMode<=11}function ce(){return navigator.userAgent}function fe(){var t=ce();return t&&!ae.test(t)}function le(){if(!ue())return !1;var t=document.documentMode&&document.documentMode<10;return !(!window.postMessage||t)}function he(){return void 0!==Dt&&void 0!==Dt.subtle&&"undefined"!=typeof Uint8Array}function pe(){return "undefined"!=typeof TextEncoder}function de(){return he()&&pe()}function ve(){return !!ue()&&"https:"===window.location.protocol}function ye(){return ue()&&"localhost"===window.location.hostname}function ge(t,e,n){t.addEventListener?t.addEventListener(e,n):t.attachEvent("on"+e,n);}function me(t,e,n){t.removeEventListener?t.removeEventListener(e,n):t.detachEvent("on"+e,n);}function be(t){var e=document.createElement("iframe");return e.style.display="none",e.src=t,document.body.appendChild(e)}function we(t,e){var n=e.popupTitle||"External Identity Provider User Authentication",r="toolbar=no, scrollbars=yes, resizable=yes, top=100, left=500, width=600, height=600";if(se()){var o=window.open("/",n,r);return o.location.href=t,o}return window.open(t,n,r)}function xe(t,e,n){var r,o;return new Promise((function(i,a){r=function(e){if(e.data&&e.data.state===n)return e.origin!==t.getIssuerOrigin()?a(new bt("The request does not match client configuration")):void i(e.data)},ge(window,"message",r),o=setTimeout((function(){a(new bt("OAuth flow timed out"));}),e||12e4);})).finally((function(){clearTimeout(o),me(window,"message",r);}))}function ke(){return N(64)}function Se(){return N(64)}function Te(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=nt(e.issuer)||t.options.issuer;return n}function _e(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Te(t,e),r=n.indexOf("/oauth2")>0?n:n+"/oauth2";return r}function Oe(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Te(t,e),r=n.split("/oauth2")[0];return r}function Ee(t,e){if(arguments.length>2)throw new bt('As of version 3.0, "getOAuthUrls" takes only a single set of options');var n=nt((e=e||{}).authorizeUrl)||t.options.authorizeUrl,r=Te(t,e),o=nt(e.userinfoUrl)||t.options.userinfoUrl,i=nt(e.tokenUrl)||t.options.tokenUrl,a=nt(e.logoutUrl)||t.options.logoutUrl,u=nt(e.revokeUrl)||t.options.revokeUrl,s=_e(t,e);return {issuer:r,authorizeUrl:n=n||s+"/v1/authorize",userinfoUrl:o=o||s+"/v1/userinfo",tokenUrl:i=i||s+"/v1/token",revokeUrl:u=u||s+"/v1/revoke",logoutUrl:a=a||s+"/v1/logout"}}function Ae(t){var e=t.options,n=e.pkce,r=e.clientId,o=e.redirectUri,i=e.responseType,a=e.responseMode,u=e.scopes,s=e.state,c=e.ignoreSignature,f=ue()?window.location.href:void 0;return K({pkce:n,clientId:r,redirectUri:o||f,responseType:i||["token","id_token"],responseMode:a,state:s||ke(),nonce:Se(),scopes:u||["openid","email"],ignoreSignature:c})}function Re(t){return "OAuthError"===t.name&&"interaction_required"===t.errorCode}function Pe(t,e){if("AuthApiError"!==e.name)return !1;var n=e.xhr,r=null==n?void 0:n.responseJSON;return t.options.pkce&&"invalid_grant"===(null==r?void 0:r.error)}function je(t){return /((id|access)_token=)/i.test(t)}function Ce(t){return /(code=)/i.test(t)}function Ie(t){return /(interaction_code=)/i.test(t)}function Me(t){return /(error=)/i.test(t)||/(error_description)/i.test(t)}function Ue(t,e){var n=e.options;return t&&0===t.indexOf(n.redirectUri)}function Le(t){return t.pkce||"code"===t.responseType||"query"===t.responseMode}function Fe(t){return Le(t)&&"fragment"!==t.responseMode?window.location.search:window.location.hash}function Ne(t){if(!Ue(window.location.href,t))return !1;var e=Le(t.options),n=Fe(t.options);return !!Me(n)||(e?Ce(n)||Ie(n):je(window.location.hash))}function De(t){if(!Ne(t))return !1;var e=Fe(t.options);return /(error=interaction_required)/i.test(e)}function Be(t,e){var n=Ae(t);if(!1===(e=Object.assign({},n,q(e))).pkce)return Promise.resolve(e);if(!t.features.isPKCESupported()){var r="PKCE requires a modern browser with encryption support running in a secure context.";return t.features.isHTTPS()||(r+="\nThe current page is not being served with HTTPS protocol. PKCE requires secure HTTPS protocol."),t.features.hasTextEncoder()||(r+='\n"TextEncoder" is not defined. To use PKCE, you may need to include a polyfill/shim for this browser.'),Promise.reject(new bt(r))}return e.codeChallengeMethod||(e.codeChallengeMethod=P),e.responseType="code",oe(t,null).then((function(t){if(-1===(t.code_challenge_methods_supported||[]).indexOf(e.codeChallengeMethod))throw new bt("Invalid code_challenge_method")})).then((function(){return e.codeVerifier||(e.codeVerifier=Yt.generateVerifier()),Yt.computeChallenge(e.codeVerifier)})).then((function(t){var n=q(e)||{};return Object.assign(n,e,{codeChallenge:t}),n}))}function He(t,e){return t.refreshToken===e.refreshToken}function Ke(t){return !!Lt(t)&&(!(!t.xhr||!t.xhr.responseJSON)&&"invalid_grant"===t.xhr.responseJSON.error)}function qe(t){var e=/\+/g,n=/([^&=]+)=?([^&]*)/g,r=t;"#"===r.charAt(0)&&"/"===r.charAt(1)&&(r=r.substring(2)),"#"!==r.charAt(0)&&"?"!==r.charAt(0)||(r=r.substring(1));for(var o,i={};o=n.exec(r);){var a=o[1],u=o[2];i[a]="id_token"===a||"access_token"===a||"code"===a?u:decodeURIComponent(u.replace(e," "));}return i}function Ve(t,e,n){var r=n.clientId,o=n.issuer,i=n.nonce;if(!e||!o||!r)throw new bt("The jwt, iss, and aud arguments are all required");if(i&&e.nonce!==i)throw new bt("OAuth flow response nonce doesn't match request nonce");var a=Math.floor(Date.now()/1e3);if(e.iss!==o)throw new bt("The issuer ["+e.iss+"] does not match ["+o+"]");if(e.aud!==r)throw new bt("The audience ["+e.aud+"] does not match ["+r+"]");if(e.iat>e.exp)throw new bt("The JWT expired before it was issued");if(a-t.options.maxClockSkew>e.exp)throw new bt("The JWT expired and is no longer valid");if(e.iat>a+t.options.maxClockSkew)throw new bt("The JWT was issued in the future")}var ze,Ye,Ge=n(25),Je=n.n(Ge);function $e(t){return !(!t||"object"!==Je()(t)||0===Object.values(t).length)}function We(t){return !!$e(t)&&(!!t.redirectUri||!!t.responseType)}function Xe(t){return !!We(t)&&!!t.codeVerifier}function Ze(t){return !!Xe(t)&&!!t.interactionHandle}function Qe(t){return !!$e(t)&&void 0===Object.values(t).find((function(t){return "string"!=typeof t}))}function tn(t){return !(!We(t)&&!Qe(t))}function en(t){return !!(t&&(t.accessToken||t.idToken||t.refreshToken)&&Array.isArray(t.scopes))}function nn(t){return t&&t.accessToken}function rn(t){return t&&t.idToken}function on(t){return t&&t.refreshToken}function an(t,e){if(!rn(t)&&!nn(t)&&!on(t))throw new bt("Token must be an Object with scopes, expiresAt, and one of: an idToken, accessToken, or refreshToken property");if("accessToken"===e&&!nn(t))throw new bt("invalid accessToken");if("idToken"===e&&!rn(t))throw new bt("invalid idToken");if("refreshToken"===e&&!on(t))throw new bt("invalid refreshToken")}function un(t){var e,n=t.split(".");try{e={header:JSON.parse(Kt(n[0])),payload:JSON.parse(Kt(n[1])),signature:n[2]};}catch(t){throw new bt("Malformed token")}return e}function sn(t,e){return Promise.resolve().then((function(){var n,r;if(e&&(n=e.accessToken,r=e.refreshToken),!n&&!r)throw new bt("A valid access or refresh token object is required");var o=t.options.clientId,i=t.options.clientSecret;if(!o)throw new bt("A clientId must be specified in the OktaAuth constructor to revoke a token");var a=Ee(t).revokeUrl,u=et({token_type_hint:r?"refresh_token":"access_token",token:r||n}).slice(1),s=Nt(i?"".concat(o,":").concat(i):o);return gt.post(t,a,u,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+s}})}))}function cn(t,e,n){n=n||Ee(t,e);var r=e=Object.assign({},Ae(t),q(e)),o=r.authorizationCode,i=r.interactionCode,a=r.codeVerifier,u=r.clientId,s=r.redirectUri,c=r.scopes,f=r.ignoreSignature;return ne(t,{clientId:u,redirectUri:s,authorizationCode:o,interactionCode:i,codeVerifier:a},n).then((function(e){var r=["token"];return -1!==c.indexOf("openid")&&r.push("id_token"),hn(t,{clientId:u,redirectUri:s,scopes:c,responseType:r,ignoreSignature:f},e,n).then((function(t){return t.code=o,t}))})).finally((function(){t.transactionManager.clear();}))}!function(t){t[t.SUCCESS=0]="SUCCESS",t[t.PENDING=1]="PENDING",t[t.FAILURE=2]="FAILURE",t[t.TERMINAL=3]="TERMINAL",t[t.CANCELED=4]="CANCELED";}(ze||(ze={})),function(t){t[t.PASSWORD_RECOVERY=0]="PASSWORD_RECOVERY",t[t.REGISTRATION=1]="REGISTRATION",t[t.SOCIAL_IDP=2]="SOCIAL_IDP";}(Ye||(Ye={}));var fn=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t));}catch(t){i(t);}}function u(t){try{s(r.throw(t));}catch(t){i(t);}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e);}))).then(a,u);}s((r=r.apply(t,e||[])).next());}))};function ln(t,e,n){return fn(this,void 0,void 0,l.a.mark((function r(){var o,i,a,u,s,c;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e&&e.idToken){r.next=2;break}throw new bt("Only idTokens may be verified");case 2:return o=un(e.idToken),i=(null==n?void 0:n.issuer)||t.options.issuer,r.next=6,oe(t,i);case 6:if(a=r.sent,u=a.issuer,s=Object.assign({clientId:t.options.clientId,ignoreSignature:t.options.ignoreSignature},n,{issuer:u}),Ve(t,o.payload,s),1!=s.ignoreSignature&&t.features.isTokenVerifySupported()){r.next=12;break}return r.abrupt("return",e);case 12:return r.next=14,ie(t,e.issuer,o.header.kid);case 14:return c=r.sent,r.next=17,Vt(e.idToken,c);case 17:if(r.sent){r.next=20;break}throw new bt("The token signature is not valid");case 20:if(!(n&&n.accessToken&&e.claims.at_hash)){r.next=26;break}return r.next=23,f=n.accessToken,l=void 0,l=(new TextEncoder).encode(f),Dt.subtle.digest("SHA-256",l).then((function(t){var e=new Uint8Array(t).slice(0,16);return Bt(String.fromCharCode.apply(null,e))}));case 23:if(r.sent===e.claims.at_hash){r.next=26;break}throw new bt("Token hash verification failed");case 26:return r.abrupt("return",e);case 27:case"end":return r.stop()}var f,l;}),r)})))}function hn(t,e,n,r){if(!1!==t.options.pkce&&(n.code||n.interaction_code))return cn(t,Object.assign({},e,{authorizationCode:n.code,interactionCode:n.interaction_code}),r);e=e||Ae(t),r=r||Ee(t,e);var o,i=e.responseType;Array.isArray(i)||(i=[i]),o=n.scope?n.scope.split(" "):q(e.scopes);var a=e.clientId||t.options.clientId;return Promise.resolve().then((function(){!function(t,e){if(t.error||t.error_description)throw new Ut(t.error,t.error_description);if(t.state!==e.state)throw new bt("OAuth flow response state doesn't match request state")}(n,e);})).then((function(){var i={},u=n.expires_in,s=n.token_type,c=n.access_token,f=n.id_token,l=n.refresh_token,h=Math.floor(Date.now()/1e3);if(c){var p=t.token.decode(c);i.accessToken={accessToken:c,claims:p.payload,expiresAt:Number(u)+h,tokenType:s,scopes:o,authorizeUrl:r.authorizeUrl,userinfoUrl:r.userinfoUrl};}if(l&&(i.refreshToken={refreshToken:l,expiresAt:Number(u)+h,scopes:o,tokenUrl:r.tokenUrl,authorizeUrl:r.authorizeUrl,issuer:r.issuer}),f){var d=t.token.decode(f),v={idToken:f,claims:d.payload,expiresAt:d.payload.exp-d.payload.iat+h,scopes:o,authorizeUrl:r.authorizeUrl,issuer:r.issuer,clientId:a},y={clientId:a,issuer:r.issuer,nonce:e.nonce,accessToken:c};return void 0!==e.ignoreSignature&&(y.ignoreSignature=e.ignoreSignature),ln(t,v,y).then((function(){return i.idToken=v,i}))}return i})).then((function(t){if(-1!==i.indexOf("token")&&!t.accessToken)throw new bt('Unable to parse OAuth flow response: response type "token" was requested but "access_token" was not returned.');if(-1!==i.indexOf("id_token")&&!t.idToken)throw new bt('Unable to parse OAuth flow response: response type "id_token" was requested but "id_token" was not returned.');return {tokens:t,state:n.state,code:n.code}}))}function pn(t,e){return arguments.length>2?Promise.reject(new bt('As of version 3.0, "getToken" takes only a single set of options')):Be(t,e=e||{}).then((function(n){var r,o;switch(e.sessionToken?Object.assign(n,{prompt:"none",responseMode:"okta_post_message",display:null}):e.idp&&Object.assign(n,{display:"popup"}),o=Ee(t,n),r=(e.codeVerifier?o.tokenUrl:o.authorizeUrl)+Qt(n),n.sessionToken||null===n.display?"IFRAME":"popup"===n.display?"POPUP":"IMPLICIT"){case"IFRAME":var i=xe(t,e.timeout,n.state),a=be(r);return i.then((function(e){return hn(t,n,e,o)})).finally((function(){document.body.contains(a)&&a.parentElement.removeChild(a);}));case"POPUP":var u;if("okta_post_message"===n.responseMode){if(!t.features.isPopupPostMessageSupported())throw new bt("This browser doesn't have full postMessage support");u=xe(t,e.timeout,n.state);}var s=we(r,{popupTitle:e.popupTitle});return new Promise((function(t,e){var n=setInterval((function(){s&&!s.closed||(clearInterval(n),e(new bt("Unable to parse OAuth flow response")));}),100);u.then((function(e){clearInterval(n),t(e);})).catch((function(t){clearInterval(n),e(t);}));})).then((function(e){return hn(t,n,e,o)})).finally((function(){s&&!s.closed&&s.close();}));default:throw new bt("The full page redirect flow is not supported")}}))}function dn(t,e){return arguments.length>2?Promise.reject(new bt('As of version 3.0, "getWithoutPrompt" takes only a single set of options')):(e=q(e)||{},Object.assign(e,{prompt:"none",responseMode:"okta_post_message",display:null}),pn(t,e))}var vn=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t));}catch(t){i(t);}}function u(t){try{s(r.throw(t));}catch(t){i(t);}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e);}))).then(a,u);}s((r=r.apply(t,e||[])).next());}))};function yn(t,e,n){return vn(this,void 0,void 0,l.a.mark((function r(){var o,i,a,u,s,c,f;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t.options.clientId){r.next=3;break}throw new bt("A clientId must be specified in the OktaAuth constructor to renew tokens");case 3:return i=Object.assign({},e,{clientId:o}),r.next=6,re(t,i,n);case 6:return a=r.sent,u=Ee(t,e),r.next=10,hn(t,i,a,u);case 10:return s=r.sent,c=s.tokens,(f=c.refreshToken)&&!He(f,n)&&t.tokenManager.updateRefreshToken(f),r.abrupt("return",c);case 15:case"end":return r.stop()}}),r)})))}var gn=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t));}catch(t){i(t);}}function u(t){try{s(r.throw(t));}catch(t){i(t);}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e);}))).then(a,u);}s((r=r.apply(t,e||[])).next());}))};function mn(){throw new bt("Renew must be passed a token with an array of scopes and an accessToken or idToken")}function bn(t,e){return rn(t)?e.idToken:nn(t)?e.accessToken:void mn()}function wn(t,e){return gn(this,void 0,void 0,l.a.mark((function n(){var r,o,i,a,u,s;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(rn(e)||nn(e)||mn(),!(r=t.tokenManager.getTokensSync()).refreshToken){n.next=7;break}return n.next=5,yn(t,{scopes:e.scopes},r.refreshToken);case 5:return r=n.sent,n.abrupt("return",bn(e,r));case 7:return o=t.options.pkce?"code":nn(e)?"token":"id_token",i=e.scopes,a=e.authorizeUrl,u=e.userinfoUrl,s=e.issuer,n.abrupt("return",dn(t,{responseType:o,scopes:i,authorizeUrl:a,userinfoUrl:u,issuer:s}).then((function(t){return bn(e,t.tokens)})));case 10:case"end":return n.stop()}}),n)})))}var xn=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t));}catch(t){i(t);}}function u(t){try{s(r.throw(t));}catch(t){i(t);}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e);}))).then(a,u);}s((r=r.apply(t,e||[])).next());}))};function kn(t,e){return xn(this,void 0,void 0,l.a.mark((function n(){var r,o,i;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=t.tokenManager.getTokensSync()).refreshToken){n.next=3;break}return n.abrupt("return",yn(t,e,r.refreshToken));case 3:return e=Object.assign({scopes:t.options.scopes,authorizeUrl:t.options.authorizeUrl,userinfoUrl:t.options.userinfoUrl,issuer:t.options.issuer},e),t.options.pkce?e.responseType="code":(o=Ae(t),i=o.responseType,e.responseType=i),n.abrupt("return",dn(t,e).then((function(t){return t.tokens})));case 6:case"end":return n.stop()}}),n)})))}var Sn=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t));}catch(t){i(t);}}function u(t){try{s(r.throw(t));}catch(t){i(t);}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e);}))).then(a,u);}s((r=r.apply(t,e||[])).next());}))};function Tn(t,e,n){return Sn(this,void 0,void 0,l.a.mark((function r(){return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=4;break}return r.next=3,t.tokenManager.getTokens();case 3:e=r.sent.accessToken;case 4:if(n){r.next=8;break}return r.next=7,t.tokenManager.getTokens();case 7:n=r.sent.idToken;case 8:if(e&&nn(e)){r.next=10;break}return r.abrupt("return",Promise.reject(new bt("getUserInfo requires an access token object")));case 10:if(n&&rn(n)){r.next=12;break}return r.abrupt("return",Promise.reject(new bt("getUserInfo requires an ID token object")));case 12:return r.abrupt("return",gt.httpRequest(t,{url:e.userinfoUrl,method:"GET",accessToken:e.accessToken}).then((function(t){return t.sub===n.claims.sub?t:Promise.reject(new bt("getUserInfo request was rejected due to token mismatch"))})).catch((function(t){var e;if(t.xhr&&(401===t.xhr.status||403===t.xhr.status)&&(t.xhr.headers&&W(t.xhr.headers.get)&&t.xhr.headers.get("WWW-Authenticate")?e=t.xhr.headers.get("WWW-Authenticate"):W(t.xhr.getResponseHeader)&&(e=t.xhr.getResponseHeader("WWW-Authenticate")),e)){var n=e.match(/error="(.*?)"/)||[],r=e.match(/error_description="(.*?)"/)||[],o=n[1],i=r[1];o&&i&&(t=new Ut(o,i));}throw t})));case 13:case"end":return r.stop()}}),r)})))}function _n(t,e){return arguments.length>2?Promise.reject(new bt('As of version 3.0, "getWithPopup" takes only a single set of options')):(e=q(e)||{},Object.assign(e,{display:"popup",responseMode:"okta_post_message"}),pn(t,e))}function On(t,e){return arguments.length>2?Promise.reject(new bt('As of version 3.0, "getWithRedirect" takes only a single set of options')):(e=q(e)||{},Be(t,e).then((function(n){var r=Ee(t,e),o=r.authorizeUrl+Qt(n),i={issuer:t.options.issuer,responseType:n.responseType,state:n.state,nonce:n.nonce,scopes:n.scopes,clientId:n.clientId,urls:r,ignoreSignature:n.ignoreSignature,redirectUri:n.redirectUri,codeVerifier:n.codeVerifier,codeChallenge:n.codeChallenge,codeChallengeMethod:n.codeChallengeMethod};t.transactionManager.save(i,{oauth:!0}),t.token.getWithRedirect._setLocation(o);})))}function En(t,e){e=G(e=e||{})?{url:e}:e;var n,r=t.options.pkce?"query":"fragment",o=e.url,i=e.responseMode||t.options.responseMode||r,a=t.token.parseFromUrl._getLocation();if(!(n="query"===i?o?o.substring(o.indexOf("?")):a.search:o?o.substring(o.indexOf("#")):a.hash))return Promise.reject(new bt("Unable to parse a token from the url"));var u=t.transactionManager.load({oauth:!0,pkce:t.options.pkce}),s=u.urls;return delete u.urls,Promise.resolve(qe(n)).then((function(e){return o||("query"===i?function(t){var e=t.token.parseFromUrl._getHistory(),n=t.token.parseFromUrl._getDocument(),r=t.token.parseFromUrl._getLocation();e&&e.replaceState?e.replaceState(null,n.title,r.pathname+r.hash):r.search="";}(t):function(t){var e=t.token.parseFromUrl._getHistory(),n=t.token.parseFromUrl._getDocument(),r=t.token.parseFromUrl._getLocation();e&&e.replaceState?e.replaceState(null,n.title,r.pathname+r.search):r.hash="";}(t)),hn(t,u,e,s).catch((function(e){throw Re(e)||t.transactionManager.clear(),e})).then((function(e){return t.transactionManager.clear(),e}))}))}var An=n(207),Rn={getHttpCache:function(){return null},getPKCEStorage:function(){return null},browserHasLocalStorage:function(){try{var t=Rn.getLocalStorage();return Rn.testStorage(t)}catch(t){return !1}},browserHasSessionStorage:function(){try{var t=Rn.getSessionStorage();return Rn.testStorage(t)}catch(t){return !1}},testStorageType:function(t){var e=!1;switch(t){case"sessionStorage":e=Rn.browserHasSessionStorage();break;case"localStorage":e=Rn.browserHasLocalStorage();break;case"cookie":case"memory":e=!0;break;default:e=!1;}return e},getStorageByType:function(t,e){var n=null;switch(t){case"sessionStorage":n=Rn.getSessionStorage();break;case"localStorage":n=Rn.getLocalStorage();break;case"cookie":n=Rn.getCookieStorage(e);break;case"memory":n=Rn.getInMemoryStorage();break;default:throw new bt("Unrecognized storage option: ".concat(t))}return n},findStorageType:function(t){var e,n;return e=(t=t.slice()).shift(),(n=t.length?t[0]:null)?Rn.testStorageType(e)?e:(M("This browser doesn't support ".concat(e,". Switching to ").concat(n,".")),Rn.findStorageType(t)):e},getLocalStorage:function(){return localStorage},getSessionStorage:function(){return sessionStorage},getCookieStorage:function(t){var e=t.secure,n=t.sameSite,r=t.sessionCookie;if(void 0===e||void 0===n)throw new bt('getCookieStorage: "secure" and "sameSite" options must be provided');var o={getItem:Rn.storage.get,setItem:function(t,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"2200-01-01T00:00:00.000Z";i=r?null:i,Rn.storage.set(t,o,i,{secure:e,sameSite:n});},removeItem:function(t){Rn.storage.delete(t);}};return t.useMultipleCookies?{getItem:function(t){var e=o.getItem(),n={};return Object.keys(e).forEach((function(r){0===r.indexOf(t)&&(n[r.replace("".concat(t,"_"),"")]=JSON.parse(e[r]));})),JSON.stringify(n)},setItem:function(t,e){var n=JSON.parse(this.getItem(t));e=JSON.parse(e),Object.keys(e).forEach((function(r){var i=t+"_"+r,a=JSON.stringify(e[r]);o.setItem(i,a),delete n[r];})),Object.keys(n).forEach((function(e){o.removeItem(t+"_"+e);}));},removeItem:function(t){var e=JSON.parse(this.getItem(t));Object.keys(e).forEach((function(e){o.removeItem(t+"_"+e);}));}}:o},getInMemoryStorage:function(){var t={};return {getItem:function(e){return t[e]},setItem:function(e,n){t[e]=n;}}},testStorage:function(t){var e="okta-test-storage";try{return t.setItem(e,e),t.removeItem(e),!0}catch(t){return !1}},storage:{set:function(t,e,n,r){var o=r.sameSite,i=r.secure;if(void 0===i||void 0===o)throw new bt('storage.set: "secure" and "sameSite" options must be provided');var a={path:r.path||"/",secure:i,sameSite:o};return Date.parse(n)&&(a.expires=new Date(n)),An.set(t,e,a),Rn.storage.get(t)},get:function(t){return An.get(t)},delete:function(t){return An.remove(t,{path:"/"})}}},Pn=Rn;function jn(t){var e=(t=t||{}).issuer;if(!e)throw new bt('No issuer passed to constructor. Required usage: new OktaAuth({issuer: "https://{yourOktaDomain}.com/oauth2/{authServerId}"})');if(!new RegExp("^http?s?://.+").test(t.issuer))throw new bt('Issuer must be a valid URL. Required usage: new OktaAuth({issuer: "https://{yourOktaDomain}.com/oauth2/{authServerId}"})');if(-1!==e.indexOf("-admin."))throw new bt('Issuer URL passed to constructor contains "-admin" in subdomain. Required usage: new OktaAuth({issuer: "https://{yourOktaDomain}.com})');var n=t.userAgent;if(n&&n.template&&-1===n.template.indexOf("$OKTA_AUTH_JS"))throw new bt('UserAgentTemplate must include "$OKTA_AUTH_JS" placeholder. Required usage: new OktaAuth({userAgentTemplate: "xxx $OKTA_AUTH_JS xxx"})')}function Cn(t,e){var n=t.userAgent||{};return n.value?n.value:n.template?n.template.replace("$OKTA_AUTH_JS",e):e}var In=n(79),Mn=n.n(In),Un=function(){function t(e){u()(this,t),this.localOffset=parseInt(e||0);}return c()(t,[{key:"now",value:function(){var t=(Date.now()+this.localOffset)/1e3;return t}}],[{key:"create",value:function(){return new t(0)}}]),t}();var Ln=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u()(this,t),this.tokenManager=e,this.options=n;}return c()(t,[{key:"start",value:function(){var t=this,e=[];this.onTokenExpiredHandler=function(n){if(t.options.autoRenew)if(function(t){var e=!1;if(t.push(Date.now()),t.length>=10){var n=t.shift();e=t[t.length-1]-n<3e4;}return e}(e)){var r=new bt("Too many token renew requests");t.tokenManager.emitError(r);}else t.tokenManager.renew(n).catch((function(){}));else t.options.autoRemove&&t.tokenManager.remove(n);},this.tokenManager.on(Dn,this.onTokenExpiredHandler),this.tokenManager.setExpireEventTimeoutAll(),this.options.syncStorage&&ue()&&(this.storageListener=function(e){var n=e.key,r=e.newValue,o=e.oldValue;(!n||n===t.options.storageKey&&r!==o)&&(t.syncTimeout=setTimeout((function(){return t.tokenManager.resetExpireEventTimeoutAll(),void t.tokenManager.emitEventsForCrossTabsStorageUpdate(r,o)}),t.options._storageEventDelay));},window.addEventListener("storage",this.storageListener));}},{key:"stop",value:function(){this.tokenManager.clearExpireEventTimeoutAll(),this.tokenManager.off(Dn,this.onTokenExpiredHandler),this.options.syncStorage&&ue()&&(window.removeEventListener("storage",this.storageListener),clearTimeout(this.syncTimeout));}}]),t}(),Fn=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t));}catch(t){i(t);}}function u(t){try{s(r.throw(t));}catch(t){i(t);}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e);}))).then(a,u);}s((r=r.apply(t,e||[])).next());}))},Nn={autoRenew:!0,autoRemove:!0,storage:void 0,expireEarlySeconds:30,storageKey:b,syncStorage:!0,_storageEventDelay:0},Dn="expired",Bn="renewed",Hn="added",Kn="removed",qn="error";var Vn,zn=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(u()(this,t),this.sdk=e,this.emitter=e.emitter,!this.emitter)throw new bt("Emitter should be initialized before TokenManager");n=Object.assign({},Nn,K(n)),se()&&(n._storageEventDelay=n._storageEventDelay||1e3),ye()||(n.expireEarlySeconds=Nn.expireEarlySeconds),this.options=n;var r=K({storageKey:n.storageKey,secure:n.secure});"object"===Je()(n.storage)?r.storageProvider=n.storage:n.storage&&(r.storageType=n.storage),this.storage=e.storageManager.getTokenStorage(r),this.clock=Un.create(),this.state={expireTimeouts:{},renewPromise:{}},this.on=this.emitter.on.bind(this.emitter),this.off=this.emitter.off.bind(this.emitter);}return c()(t,[{key:"start",value:function(){this.service&&this.stop(),this.service=new Ln(this,this.getOptions()),this.service.start();}},{key:"stop",value:function(){this.service&&(this.service.stop(),this.service=null);}},{key:"getOptions",value:function(){return q(this.options)}},{key:"getExpireTime",value:function(t){return t.expiresAt-this.options.expireEarlySeconds}},{key:"hasExpired",value:function(t){return this.getExpireTime(t)<=this.clock.now()}},{key:"emitExpired",value:function(t,e){this.emitter.emit(Dn,t,e);}},{key:"emitRenewed",value:function(t,e,n){this.emitter.emit(Bn,t,e,n);}},{key:"emitAdded",value:function(t,e){this.emitter.emit(Hn,t,e);}},{key:"emitRemoved",value:function(t,e){this.emitter.emit(Kn,t,e);}},{key:"emitError",value:function(t){this.emitter.emit(qn,t);}},{key:"emitEventsForCrossTabsStorageUpdate",value:function(t,e){var n=this,r=this.getTokensFromStorageValue(e),o=this.getTokensFromStorageValue(t);Object.keys(o).forEach((function(t){var e=r[t],i=o[t];JSON.stringify(e)!==JSON.stringify(i)&&n.emitAdded(t,i);})),Object.keys(r).forEach((function(t){var e=r[t];o[t]||n.emitRemoved(t,e);}));}},{key:"clearExpireEventTimeout",value:function(t){clearTimeout(this.state.expireTimeouts[t]),delete this.state.expireTimeouts[t],delete this.state.renewPromise[t];}},{key:"clearExpireEventTimeoutAll",value:function(){var t=this.state.expireTimeouts;for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&this.clearExpireEventTimeout(e);}},{key:"setExpireEventTimeout",value:function(t,e){var n=this;if(!on(e)){var r=this.getExpireTime(e),o=1e3*Math.max(r-this.clock.now(),0);this.clearExpireEventTimeout(t);var i=setTimeout((function(){n.emitExpired(t,e);}),o);this.state.expireTimeouts[t]=i;}}},{key:"setExpireEventTimeoutAll",value:function(){var t=this.storage.getStorage();for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=t[e];this.setExpireEventTimeout(e,n);}}},{key:"resetExpireEventTimeoutAll",value:function(){this.clearExpireEventTimeoutAll(),this.setExpireEventTimeoutAll();}},{key:"add",value:function(t,e){var n=this.storage.getStorage();an(e),n[t]=e,this.storage.setStorage(n),this.emitAdded(t,e),this.setExpireEventTimeout(t,e);}},{key:"getSync",value:function(t){return this.storage.getStorage()[t]}},{key:"get",value:function(t){return Fn(this,void 0,void 0,l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getSync(t));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"getTokensSync",value:function(){var t={},e=this.storage.getStorage();return Object.keys(e).forEach((function(n){var r=e[n];nn(r)?t.accessToken=r:rn(r)?t.idToken=r:on(r)&&(t.refreshToken=r);})),t}},{key:"getTokens",value:function(){return Fn(this,void 0,void 0,l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getTokensSync());case 1:case"end":return t.stop()}}),t,this)})))}},{key:"getStorageKeyByType",value:function(t){var e=this.storage.getStorage();return Object.keys(e).filter((function(n){var r=e[n];return nn(r)&&"accessToken"===t||rn(r)&&"idToken"===t||on(r)&&"refreshToken"===t}))[0]}},{key:"setTokens",value:function(t,e,n,r){var o=this,i=t.accessToken,a=t.idToken,u=t.refreshToken,s=function(t,e,n){o.emitAdded(t,e),o.setExpireEventTimeout(t,e),n&&n(t,e);},c=function(t,e,n){o.clearExpireEventTimeout(t),o.emitRemoved(t,e),n&&n(t,e);};a&&an(a,"idToken"),i&&an(i,"accessToken"),u&&an(u,"refreshToken");var f=this.getStorageKeyByType("idToken")||_,l=this.getStorageKeyByType("accessToken")||T,h=this.getStorageKeyByType("refreshToken")||O,p=Object.assign(Object.assign(Object.assign({},a&&Mn()({},f,a)),i&&Mn()({},l,i)),u&&Mn()({},h,u));this.storage.setStorage(p);var d=this.getTokensSync();a?s(f,a,n):d.idToken&&c(f,d.idToken,n),i?s(l,i,e):d.accessToken&&c(l,d.accessToken,e),u?s(h,u,r):d.refreshToken&&c(h,d.refreshToken,r);}},{key:"remove",value:function(t){this.clearExpireEventTimeout(t);var e=this.storage.getStorage(),n=e[t];delete e[t],this.storage.setStorage(e),this.emitRemoved(t,n);}},{key:"renewToken",value:function(t){return Fn(this,void 0,void 0,l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.sdk.token.renew(t));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"validateToken",value:function(t){return an(t)}},{key:"renew",value:function(t){var e=this,n=this.state.renewPromise[t];if(n)return n;try{var r=this.getSync(t);if(!r)throw new bt("The tokenManager has no token for the key: "+t)}catch(t){return Promise.reject(t)}return this.clearExpireEventTimeout(t),this.state.renewPromise[t]=this.sdk.token.renew(r).then((function(n){var r=e.storage.getStorage();return e.remove(t),e.add(t,n),e.emitRenewed(t,n,r[t]),n})).catch((function(n){throw (Ke(n)||"OAuthError"===n.name||"AuthSdkError"===n.name)&&(e.remove(t),n.tokenKey=t,e.emitError(n)),n})).finally((function(){delete e.state.renewPromise[t];})),this.state.renewPromise[t]}},{key:"clear",value:function(){this.clearExpireEventTimeoutAll(),this.storage.clearStorage();}},{key:"getTokensFromStorageValue",value:function(t){var e;try{e=JSON.parse(t)||{};}catch(t){e={};}return e}},{key:"updateRefreshToken",value:function(t){var e=this.getStorageKeyByType("refreshToken")||O,n=this.storage.getStorage();an(t),n[e]=t,this.storage.setStorage(n);}}]),t}();ye()&&(Vn=zn.prototype.add,Object.assign(zn.prototype,{add:function(t,e){M("Use setTokens() instead if you want to add a set of tokens at same time.\nIt prevents current tab from emitting unnecessary StorageEvent,\nwhich may cause false-positive authState change cross tabs."),Vn.call(this,t,e);}}));var Yn=function(){function t(){u()(this,t),this.queue=[],this.running=!1;}return c()(t,[{key:"push",value:function(t,e){for(var n=this,r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return new Promise((function(r,i){n.queue.push({method:t,thisObject:e,args:o,resolve:r,reject:i}),n.run();}))}},{key:"run",value:function(){var t=this;if(!this.running&&0!==this.queue.length){this.running=!0;var e=this.queue.shift(),n=e.method.apply(e.thisObject,e.args);X(n)?n.then(e.resolve,e.reject).finally((function(){t.running=!1,t.run();})):(e.resolve(n),this.running=!1,this.run());}}}]),t}();function Gn(t,e){return e=e||{},fe()?new Promise((function(i,a){(r=document.createElement("iframe")).style.display="none",o=function(e){if(e&&e.data&&e.origin===t.getIssuerOrigin()){try{var n=JSON.parse(e.data);}catch(t){return}if(n)return "FingerprintAvailable"===n.type?i(n.fingerprint):void("FingerprintServiceReady"===n.type&&e.source.postMessage(JSON.stringify({type:"GetFingerprint"}),e.origin))}},ge(window,"message",o),r.src=t.getIssuerOrigin()+"/auth/services/devicefingerprint",document.body.appendChild(r),n=setTimeout((function(){a(new bt("Fingerprinting timed out"));}),e.timeout||15e3);})).finally((function(){clearTimeout(n),me(window,"message",o),document.body.contains(r)&&r.parentElement.removeChild(r);})):Promise.reject(new bt("Fingerprinting is not supported on this device"));var n,r,o;}var Jn=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t));}catch(t){i(t);}}function u(t){try{s(r.throw(t));}catch(t){i(t);}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e);}))).then(a,u);}s((r=r.apply(t,e||[])).next());}))},$n=n(208),Wn=null,Xn={updateAuthStatePromise:null,canceledTimes:0},Zn=function(){function t(e){var n=this;if(u()(this,t),!e.emitter)throw new bt("Emitter should be initialized before AuthStateManager");this._sdk=e,this._pending=Object.assign({},Xn),this._authState=Wn,this._logOptions={},e.tokenManager.on(Hn,(function(t,e){n._setLogOptions({event:Hn,key:t,token:e}),n.updateAuthState();})),e.tokenManager.on(Kn,(function(t,e){n._setLogOptions({event:Kn,key:t,token:e}),n.updateAuthState();}));}return c()(t,[{key:"_setLogOptions",value:function(t){this._logOptions=t;}},{key:"getAuthState",value:function(){return this._authState}},{key:"updateAuthState",value:function(){return Jn(this,void 0,void 0,l.a.mark((function t(){var e,n,r,o,i,a,u,s=this;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this._sdk.options,n=e.transformAuthState,r=e.devMode,o=function(t){var e=s._logOptions,n=e.event,r=e.key,o=e.token;I().group("OKTA-AUTH-JS:updateAuthState: Event:".concat(n," Status:").concat(t)),I().log(r,o),I().log("Current authState",s._authState),I().groupEnd(),s._logOptions={};},i=function(t){var e,n;(e=s._authState,n=t,e&&e.isAuthenticated===n.isAuthenticated&&JSON.stringify(e.idToken)===JSON.stringify(n.idToken)&&JSON.stringify(e.accessToken)===JSON.stringify(n.accessToken)&&e.error===n.error)?r&&o("unchanged"):(s._authState=t,s._sdk.emitter.emit("authStateChange",Object.assign({},t)),r&&o("emitted"));},a=function t(e){return s._pending.updateAuthStatePromise.then((function(){var n=s._pending.updateAuthStatePromise;return n&&n!==e?t(n):s.getAuthState()}))},!this._pending.updateAuthStatePromise){t.next=11;break}if(!(this._pending.canceledTimes>=10)){t.next=10;break}return r&&o("terminated"),t.abrupt("return",a(this._pending.updateAuthStatePromise));case 10:this._pending.updateAuthStatePromise.cancel();case 11:return u=new $n((function(t,e,a){a.shouldReject=!1,a((function(){s._pending.updateAuthStatePromise=null,s._pending.canceledTimes=s._pending.canceledTimes+1,r&&o("canceled");}));var c=function(e){u.isCanceled?t():(i(e),t(),s._pending=Object.assign({},Xn));};s._sdk.isAuthenticated().then((function(){if(u.isCanceled)t();else{var e=s._sdk.tokenManager.getTokensSync(),r=e.accessToken,o=e.idToken,i=e.refreshToken,a={accessToken:r,idToken:o,refreshToken:i,isAuthenticated:!(!r||!o)};(n?n(s._sdk,a):Promise.resolve(a)).then((function(t){return c(t)})).catch((function(t){return c({accessToken:r,idToken:o,refreshToken:i,isAuthenticated:!1,error:t})}));}}));})),this._pending.updateAuthStatePromise=u,t.abrupt("return",a(u));case 14:case"end":return t.stop()}}),t,this)})))}},{key:"subscribe",value:function(t){this._sdk.emitter.on("authStateChange",t);}},{key:"unsubscribe",value:function(t){this._sdk.emitter.off("authStateChange",t);}}]),t}(),Qn=function(){function t(e,n){if(u()(this,t),!e)throw new bt('"storage" is required');if("string"!=typeof n||!n.length)throw new bt('"storageName" is required');this.storageName=n,this.storageProvider=e;}return c()(t,[{key:"getItem",value:function(t){return this.getStorage()[t]}},{key:"setItem",value:function(t,e){return this.updateStorage(t,e)}},{key:"removeItem",value:function(t){return this.clearStorage(t)}},{key:"getStorage",value:function(){var t=this.storageProvider.getItem(this.storageName);t=t||"{}";try{return JSON.parse(t)}catch(t){throw new bt("Unable to parse storage string: "+this.storageName)}}},{key:"setStorage",value:function(t){try{var e=t?JSON.stringify(t):"{}";this.storageProvider.setItem(this.storageName,e);}catch(t){throw new bt("Unable to set storage: "+this.storageName)}}},{key:"clearStorage",value:function(t){if(t){var e=this.getStorage();delete e[t],this.setStorage(e);}else this.storageProvider.removeItem?this.storageProvider.removeItem(this.storageName):this.setStorage();}},{key:"updateStorage",value:function(t,e){var n=this.getStorage();n[t]=e,this.setStorage(n);}}]),t}();function tr(t){ue()||t.storageProvider||t.storageProvider||M("Memory storage can only support simple single user use case on server side, please provide custom storageProvider or storageKey if advanced scenarios need to be supported.");}var er=function(){function t(e,n,r){u()(this,t),this.storageManagerOptions=e,this.cookieOptions=n,this.storageUtil=r;}return c()(t,[{key:"getOptionsForSection",value:function(t,e){return Object.assign({},this.storageManagerOptions[t],e)}},{key:"getStorage",value:function(t){if((t=Object.assign({},this.cookieOptions,t)).storageProvider)return t.storageProvider;var e=t,n=e.storageType,r=e.storageTypes;if("sessionStorage"===n&&(t.sessionCookie=!0),n&&r){var o=r.indexOf(n);o>=0&&(r=r.slice(o),n=null);}return n||(n=this.storageUtil.findStorageType(r)),this.storageUtil.getStorageByType(n,t)}},{key:"getTransactionStorage",value:function(t){tr(t=this.getOptionsForSection("transaction",t));var e=this.getStorage(t),n=t.storageKey||k;return new Qn(e,n)}},{key:"getIdxResponseStorage",value:function(t){var e;if(ue())try{e=this.storageUtil.getStorageByType("memory",t);}catch(t){M("No response storage found, you may want to provide custom implementation for intermediate idx responses to optimize the network traffic");}else{var n=this.getTransactionStorage(t);n&&(e={getItem:function(t){var e=n.getStorage();return e&&e[t]?e[t]:null},setItem:function(t,e){var r=n.getStorage();if(!r)throw new bt("Transaction has been cleared, failed to save idxState");r[t]=e,n.setStorage(r);},removeItem:function(t){var e=n.getStorage();e&&(delete e[t],n.setStorage(e));}});}return e?new Qn(e,S):null}},{key:"getTokenStorage",value:function(t){tr(t=this.getOptionsForSection("token",t));var e=this.getStorage(t),n=t.storageKey||b;return new Qn(e,n)}},{key:"getHttpCache",value:function(t){t=this.getOptionsForSection("cache",t);var e=this.getStorage(t),n=t.storageKey||w;return new Qn(e,n)}},{key:"getLegacyPKCEStorage",value:function(t){t=this.getOptionsForSection("legacy-pkce",t);var e=this.getStorage(t),n=t.storageKey||x;return new Qn(e,n)}},{key:"getLegacyOAuthParamsStorage",value:function(t){t=this.getOptionsForSection("legacy-oauth-params",t);var e=this.getStorage(t),n=t.storageKey||y;return new Qn(e,n)}}]),t}();function nr(t){return t&&t.version}var rr=function(){function t(e){u()(this,t),this.storageManager=e.storageManager,this.legacyWidgetSupport=!1!==e.legacyWidgetSupport,this.saveNonceCookie=!1!==e.saveNonceCookie,this.saveStateCookie=!1!==e.saveStateCookie,this.saveParamsCookie=!1!==e.saveParamsCookie,this.options=e;}return c()(t,[{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.storageManager.getTransactionStorage();e.clearStorage();var n=this.storageManager.getIdxResponseStorage();null==n||n.clearStorage(),this.legacyWidgetSupport&&(t.oauth&&this.clearLegacyOAuthParams(),t.pkce&&this.clearLegacyPKCE());}},{key:"save",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.storageManager.getTransactionStorage(),r=n.getStorage();if(tn(r)&&M("a saved auth transaction exists in storage. This may indicate another auth flow is already in progress."),n.setStorage(t),e.oauth&&(this.saveNonceCookie||this.saveStateCookie||this.saveParamsCookie)){var o=this.storageManager.getStorage({storageType:"cookie"});if(this.saveParamsCookie){var i=t.responseType,a=t.state,u=t.nonce,s=t.scopes,c=t.clientId,f=t.urls,l=t.ignoreSignature,h={responseType:i,state:a,nonce:u,scopes:s,clientId:c,urls:f,ignoreSignature:l};o.setItem(y,JSON.stringify(h),null);}this.saveNonceCookie&&t.nonce&&o.setItem(m,t.nonce,null),this.saveStateCookie&&t.state&&o.setItem(g,t.state,null);}}},{key:"exists",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var e=this.load(t);return !!e}catch(t){return !1}}},{key:"load",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.storageManager.getTransactionStorage(),n=e.getStorage();if(tn(n))return n;if(!this.legacyWidgetSupport)return null;if(t.oauth)try{var r=this.loadLegacyOAuthParams();Object.assign(n,r);}finally{this.clearLegacyOAuthParams();}if(t.pkce)try{var o=this.loadLegacyPKCE();Object.assign(n,o);}finally{this.clearLegacyPKCE();}return tn(n)?n:null}},{key:"clearLegacyPKCE",value:function(){this.storageManager.storageUtil.testStorageType("localStorage")&&this.storageManager.getLegacyPKCEStorage({storageType:"localStorage"}).clearStorage(),this.storageManager.storageUtil.testStorageType("sessionStorage")&&this.storageManager.getLegacyPKCEStorage({storageType:"sessionStorage"}).clearStorage();}},{key:"loadLegacyPKCE",value:function(){var t;if(this.storageManager.storageUtil.testStorageType("localStorage")&&(t=this.storageManager.getLegacyPKCEStorage({storageType:"localStorage"}).getStorage())&&t.codeVerifier)return t;if(this.storageManager.storageUtil.testStorageType("sessionStorage")&&(t=this.storageManager.getLegacyPKCEStorage({storageType:"sessionStorage"}).getStorage())&&t.codeVerifier)return t;throw new bt("Could not load PKCE codeVerifier from storage. This may indicate the auth flow has already completed or multiple auth flows are executing concurrently.",null)}},{key:"clearLegacyOAuthParams",value:function(){this.storageManager.storageUtil.testStorageType("sessionStorage")&&this.storageManager.getLegacyOAuthParamsStorage({storageType:"sessionStorage"}).clearStorage(),this.storageManager.storageUtil.testStorageType("cookie")&&this.storageManager.getLegacyOAuthParamsStorage({storageType:"cookie"}).clearStorage();}},{key:"loadLegacyOAuthParams",value:function(){var t;if(this.storageManager.storageUtil.testStorageType("sessionStorage")&&(t=this.storageManager.getLegacyOAuthParamsStorage({storageType:"sessionStorage"}).getStorage()),We(t))return t;if(this.storageManager.storageUtil.testStorageType("cookie")&&(t=this.storageManager.getLegacyOAuthParamsStorage({storageType:"cookie"}).getStorage()),We(t))return t;throw new bt("Unable to retrieve OAuth redirect params from storage")}},{key:"saveIdxResponse",value:function(t){var e=this.storageManager.getIdxResponseStorage();e&&e.setStorage(t);}},{key:"loadIdxResponse",value:function(){var t=this.storageManager.getIdxResponseStorage();if(!t)return null;var e=t.getStorage();return nr(e)?e:null}}]),t}(),or=n(202),ir=new(n(209)),ar=function(){function t(e){u()(this,t),this.nodeCache=e;}return c()(t,[{key:"set",value:function(t,e,n){if(Date.parse(n)){var r=(Date.parse(n)-Date.now())/1e3;this.nodeCache.set(t,e,r);}else this.nodeCache.set(t,e);return this.get(t)}},{key:"get",value:function(t){return this.nodeCache.get(t)}},{key:"delete",value:function(t){return this.nodeCache.del(t)}}]),t}(),ur=new(function(){function t(e){u()(this,t),this.nodeCache=e,this.storage=new ar(e);}return c()(t,[{key:"testStorageType",value:function(t){var e=!1;switch(t){case"memory":e=!0;}return e}},{key:"getStorageByType",value:function(t){var e=null;switch(t){case"memory":e=this.getStorage();break;default:throw new bt("Unrecognized storage option: ".concat(t))}return e}},{key:"findStorageType",value:function(){return "memory"}},{key:"getHttpCache",value:function(){return null}},{key:"getStorage",value:function(){var t=this;return {getItem:this.nodeCache.get,setItem:function(e,n){t.nodeCache.set(e,n,"2200-01-01T00:00:00.000Z");}}}}]),t}())(ir),sr={token:{storageTypes:["localStorage","sessionStorage","cookie"],useMultipleCookies:!0},cache:{storageTypes:["localStorage","sessionStorage","cookie"]},transaction:{storageTypes:["sessionStorage","localStorage","cookie"]}},cr={token:{storageTypes:["memory"]},cache:{storageTypes:["memory"]},transaction:{storageTypes:["memory"]}};function fr(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=t.cookies||{};return void 0===n.secure&&(n.secure=e),void 0===n.sameSite&&(n.sameSite=n.secure?"none":"lax"),n.secure&&!e&&(M('The current page is not being served with the HTTPS protocol.\nFor security reasons, we strongly recommend using HTTPS.\nIf you cannot use HTTPS, set "cookies.secure" option to false.'),n.secure=!1),"none"!==n.sameSite||n.secure||(n.sameSite="lax"),n}function lr(){var t=ue()?Pn:ur,e=ue()?sr:cr;return {devMode:!1,httpRequestClient:or.a,storageUtil:t,storageManager:e}}function hr(t,e){return Object.assign({},t,K(e),{storageManager:Object.assign({},t.storageManager,e.storageManager)})}var pr=n(33),dr=n.n(pr),vr=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t));}catch(t){i(t);}}function u(t){try{s(r.throw(t));}catch(t){i(t);}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e);}))).then(a,u);}s((r=r.apply(t,e||[])).next());}))};function yr(t){if(t.transactionManager.exists()){var e=t.transactionManager.load();if(br(t,e)&&e.interactionHandle)return !0}return !1}function gr(t){return vr(this,void 0,void 0,l.a.mark((function e(){var n,r,o,i,a,u,s,c,f,h,p,d,v,y,g,m,b;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.transactionManager.exists()){e.next=5;break}if(n=t.transactionManager.load(),!br(t,n)){e.next=4;break}return e.abrupt("return",n);case 4:M("Saved transaction meta does not match the current configuration. This may indicate that two apps are sharing a storage key.");case 5:return e.next=7,t.token.prepareTokenParams();case 7:return r=e.sent,o=Ee(t,r),i=t.options.issuer,a=r.pkce,u=r.clientId,s=r.redirectUri,c=r.responseType,f=r.responseMode,h=r.scopes,p=r.state,d=r.nonce,v=r.ignoreSignature,y=r.codeVerifier,g=r.codeChallengeMethod,m=r.codeChallenge,b={issuer:i,pkce:a,clientId:u,redirectUri:s,responseType:c,responseMode:f,scopes:h,state:p,nonce:d,urls:o,ignoreSignature:v,codeVerifier:y,codeChallengeMethod:g,codeChallenge:m},e.abrupt("return",b);case 13:case"end":return e.stop()}}),e)})))}function mr(t,e){t.transactionManager.save(e);}function br(t,e){return !["issuer","clientId","redirectUri"].find((function(n){return t.options[n]!==e[n]}))}var wr=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t));}catch(t){i(t);}}function u(t){try{s(r.throw(t));}catch(t){i(t);}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e);}))).then(a,u);}s((r=r.apply(t,e||[])).next());}))};function xr(t){return {meta:t,interactionHandle:t.interactionHandle,state:t.state}}function kr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return wr(this,void 0,void 0,l.a.mark((function n(){var r,o,i,a,u,s,c,f,h;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,gr(t);case 2:if(!(r=n.sent).interactionHandle){n.next=5;break}return n.abrupt("return",xr(r));case 5:return o=r.codeChallenge,i=r.codeChallengeMethod,a=t.options,u=a.clientId,s=a.redirectUri,c=e.state||t.options.state||r.state,f=e.scopes||t.options.scopes||r.scopes,h=_e(t),n.abrupt("return",dr.a.interact({clientId:u,baseUrl:h,scopes:f,state:c,redirectUri:s,codeChallenge:o,codeChallengeMethod:i}).then((function(e){var n=Object.assign(Object.assign({},r),{interactionHandle:e,state:c,scopes:f});return mr(t,n),xr(n)})));case 11:case"end":return n.stop()}}),n)})))}var Sr=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t));}catch(t){i(t);}}function u(t){try{s(r.throw(t));}catch(t){i(t);}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e);}))).then(a,u);}s((r=r.apply(t,e||[])).next());}))};function Tr(t,e){return Sr(this,void 0,void 0,l.a.mark((function n(){var r,o,i;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.transactionManager.loadIdxResponse()){n.next=7;break}return o=j,i=Oe(t),n.next=6,dr.a.introspect(Object.assign({domain:i,version:o},e));case 6:r=n.sent;case 7:return n.abrupt("return",dr.a.makeIdxState(r));case 8:case"end":return n.stop()}}),n)})))}var _r=n(8),Or=n.n(_r);function Er(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ar(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ar(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return {s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return {s:function(){n=n.call(t);},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t;},f:function(){try{a||null==n.return||n.return();}finally{if(u)throw i}}}}function Ar(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Rr=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t));}catch(t){i(t);}}function u(t){try{s(r.throw(t));}catch(t){i(t);}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e);}))).then(a,u);}s((r=r.apply(t,e||[])).next());}))};function Pr(t,e,n){var r,o,i=n.flow,a=n.flowMonitor,u=[],s=Er(t);try{for(s.s();!(o=s.n()).done;){var c=o.value;if(Object.keys(i).includes(c.name))if(r=new(0,i[c.name])(c,e),a.isRemediatorCandidate(r,t,e)){if(r.canRemediate())return r;u.push(r);}}}catch(t){s.e(t);}finally{s.f();}return u[0]}function jr(t){var e=t.neededToProceed,n=t.interactionCode;return !e.length&&!n}function Cr(t,e){var n,r=[],o=t.rawIdxState,i=t.neededToProceed,a=null===(n=o.messages)||void 0===n?void 0:n.value.map((function(t){return t}));a&&(r=[].concat(Or()(r),Or()(a)));var u,s=Er(i);try{for(s.s();!(u=s.n()).done;){var c=u.value,f=e[c.name];if(f){var l=new f(c).getMessages();l&&(r=[].concat(Or()(r),Or()(l)));}}}catch(t){s.e(t);}finally{s.f();}return r}function Ir(t,e){var n=t.getNextStep(),r=function(t){return t.neededToProceed.some((function(t){return "skip"===t.name}))}(e);return Object.assign(Object.assign({},n),{canSkip:r})}function Mr(t,e,n){if(nr(t)){var r=dr.a.makeIdxState(t),o=jr(r),i=Cr(r,e);if(o)return {terminal:o,messages:i};var a=n&&Ir(n,r);return Object.assign({messages:i},a&&{nextStep:a})}throw t}function Ur(t,e,n){return Rr(this,void 0,void 0,l.a.mark((function r(){var o,i,a,u,s,c,f,h,p,d,v,y,g,m;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t.neededToProceed,i=n.actions,a=n.flow,u=n.flowMonitor,!i){r.next=31;break}s=Er(i),r.prev=4,s.s();case 6:if((c=s.n()).done){r.next=23;break}if(f=c.value,"function"!=typeof t.actions[f]){r.next=21;break}return r.prev=9,r.next=12,t.actions[f]();case 12:t=r.sent,r.next=18;break;case 15:return r.prev=15,r.t0=r.catch(9),r.abrupt("return",Mr(r.t0,a));case 18:if("cancel"!==f){r.next=20;break}return r.abrupt("return",{canceled:!0});case 20:return r.abrupt("return",Ur(t,e,n));case 21:r.next=6;break;case 23:r.next=28;break;case 25:r.prev=25,r.t1=r.catch(4),s.e(r.t1);case 28:return r.prev=28,s.f(),r.finish(28);case 31:if(h=Pr(o,e,n)){r.next=34;break}throw new bt("\n      No remediation can match current flow, check policy settings in your org.\n      Remediations: [".concat(o.reduce((function(t,e){return t?t+" ,"+e.name:e.name}),""),"]\n    "));case 34:if(!u.loopDetected(h)){r.next=36;break}throw new bt("\n      Remediation run into loop, break!!! remediation: ".concat(h.getName(),"\n    "));case 36:if(h.canRemediate()){r.next=39;break}return p=Ir(h,t),r.abrupt("return",{idxResponse:t,nextStep:p});case 39:return d=h.getName(),v=h.getData(),r.prev=41,r.next=44,t.proceed(d,v);case 44:return t=r.sent,r.next=47,u.trackRemediations(d);case 47:if(!t.interactionCode){r.next=49;break}return r.abrupt("return",{idxResponse:t});case 49:if(y=jr(t),g=Cr(t,a),!y){r.next=53;break}return r.abrupt("return",{terminal:y,messages:g});case 53:if(!g.length){r.next=56;break}return m=Ir(h,t),r.abrupt("return",{nextStep:m,messages:g});case 56:return e=h.getValuesAfterProceed(),r.abrupt("return",Ur(t,e,n));case 60:return r.prev=60,r.t2=r.catch(41),r.abrupt("return",Mr(r.t2,a,h));case 63:case"end":return r.stop()}}),r,null,[[4,25,28,31],[9,15],[41,60]])})))}function Lr(t){return t.charAt(0).toUpperCase()+t.substring(1)}function Fr(t){return t.value.find((function(t){return "authenticator"===t.name}))}var Nr=function(){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u()(this,t),r.authenticators=(null===(n=r.authenticators)||void 0===n?void 0:n.map((function(t){return "string"==typeof t?{type:t}:t})))||[],this.values=r,this.remediation=e;}return c()(t,[{key:"getName",value:function(){return this.remediation.name}},{key:"canRemediate",value:function(){var t=this;return !!this.map&&!this.remediation.value.reduce((function(t,e){return e.required&&t.push(e.name),t}),[]).find((function(e){return !t.hasData(e)}))}},{key:"getData",value:function(t){var e=this;if(!t)return this.remediation.value.map((function(t){return t.name})).reduce((function(t,n){return t[n]=e.getData(n),t}),{});if("function"==typeof this["map".concat(Lr(t))])return this["map".concat(Lr(t))](this.remediation.value.find((function(e){return e.name===t})));if(!this.map)return this.values[t];var n=this.map[t];if(!n)return this.values[t];for(var r=0;r<n.length;r++){var o=this.values[n[r]];if(o)return o}}},{key:"hasData",value:function(t){var e=this.getData(t);return "object"===Je()(e)?!!Object.keys(e).find((function(t){return !!e[t]})):!!e}},{key:"getNextStep",value:function(){var t=this.getName(),e=this.getRelatesToType(),n=this.getInputs();return Object.assign({name:t,inputs:n},e&&{type:e})}},{key:"getInputs",value:function(){var t=this;return this.map?Object.keys(this.map).reduce((function(e,n){var r,o=t.remediation.value.find((function(t){return t.name===n}));if(!o)return e;var i=t.map[n],a=o.type;if("function"==typeof t["getInput".concat(Lr(n))])r=t["getInput".concat(Lr(n))](o);else if("object"!==a){var u;(u=1===i.length?i[0]:i.find((function(e){return Object.keys(t.values).includes(e)})))&&(r=Object.assign(Object.assign({},o),{name:u}));}if(!r)throw new bt("Missing custom getInput".concat(Lr(n)," method in Remediator: ").concat(t.getName()));return Array.isArray(r)?r.forEach((function(t){return e.push(t)})):e.push(r),e}),[]):[]}},{key:"getMessages",value:function(){var t,e;if(this.remediation.value)return null===(e=null===(t=this.remediation.value[0])||void 0===t?void 0:t.form)||void 0===e?void 0:e.value.reduce((function(t,e){return e.messages&&(t=[].concat(Or()(t),Or()(e.messages.value))),t}),[])}},{key:"getValuesAfterProceed",value:function(){var t,e=this.getRelatesToType(),n=null===(t=this.values.authenticators)||void 0===t?void 0:t.filter((function(t){return t.type!==e}));return Object.assign(Object.assign({},this.values),{authenticators:n})}},{key:"getRelatesToType",value:function(){var t;return null===(t=this.remediation.relatesTo)||void 0===t?void 0:t.value.type}}]),t}();function Dr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}();return function(){var n,r=st()(t);if(e){var o=st()(this).constructor;n=Reflect.construct(r,arguments,o);}else n=r.apply(this,arguments);return at()(this,n)}}var Br=function(t){ot()(n,t);var e=Dr(n);function n(){var t;return u()(this,n),(t=e.apply(this,arguments)).map={credentials:[]},t}return c()(n,[{key:"canRemediate",value:function(){var t=this.getRelatesToType();return !(!this.values.verificationCode||!["email","phone"].includes(t))||!(!this.values.password||"password"!==t)}},{key:"mapCredentials",value:function(){return {passcode:this.values.verificationCode||this.values.password}}},{key:"getInputCredentials",value:function(t){var e="password"===this.getRelatesToType()?"password":"verificationCode";return Object.assign(Object.assign({},t.form.value[0]),{name:e,type:"string",required:t.required})}}]),n}(Nr);function Hr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}();return function(){var n,r=st()(t);if(e){var o=st()(this).constructor;n=Reflect.construct(r,arguments,o);}else n=r.apply(this,arguments);return at()(this,n)}}Br.remediationName="challenge-authenticator";var Kr=function(t){ot()(n,t);var e=Hr(n);function n(){return u()(this,n),e.apply(this,arguments)}return n}(Br);function qr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}();return function(){var n,r=st()(t);if(e){var o=st()(this).constructor;n=Reflect.construct(r,arguments,o);}else n=r.apply(this,arguments);return at()(this,n)}}Kr.remediationName="enroll-authenticator";var Vr=function(t){ot()(n,t);var e=qr(n);function n(){return u()(this,n),e.apply(this,arguments)}return n}(Br);function zr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}();return function(){var n,r=st()(t);if(e){var o=st()(this).constructor;n=Reflect.construct(r,arguments,o);}else n=r.apply(this,arguments);return at()(this,n)}}Vr.remediationName="challenge-authenticator";var Yr=function(t){ot()(n,t);var e=zr(n);function n(){return u()(this,n),e.apply(this,arguments)}return n}(Br);function Gr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}();return function(){var n,r=st()(t);if(e){var o=st()(this).constructor;n=Reflect.construct(r,arguments,o);}else n=r.apply(this,arguments);return at()(this,n)}}Yr.remediationName="reset-authenticator";var Jr=function(t){ot()(n,t);var e=Gr(n);function n(){var t;return u()(this,n),(t=e.apply(this,arguments)).map={userProfile:[]},t}return c()(n,[{key:"mapUserProfile",value:function(){var t=this.values;return {firstName:t.firstName,lastName:t.lastName,email:t.email}}},{key:"getInputUserProfile",value:function(t){return Or()(t.form.value)}},{key:"getErrorMessages",value:function(t){return t.value[0].form.value.reduce((function(t,e){return e.messages&&t.push(e.messages.value[0].message),t}),[])}}]),n}(Nr);Jr.remediationName="enroll-profile";var $r=n(13),Wr=n.n($r);function Xr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}();return function(){var n,r=st()(t);if(e){var o=st()(this).constructor;n=Reflect.construct(r,arguments,o);}else n=r.apply(this,arguments);return at()(this,n)}}var Zr=function(t){ot()(n,t);var e=Xr(n);function n(t,r){var o;u()(this,n),(o=e.call(this,t,r)).map={identifier:["username"],credentials:[]};var i=o.values,a=i.password,s=i.authenticators;return a&&!s.some((function(t){return "password"===t.type}))&&(o.values=Object.assign(Object.assign({},o.values),{authenticators:[{type:"password"}].concat(Or()(s))})),o}return c()(n,[{key:"canRemediate",value:function(){return !!this.getData().identifier}},{key:"mapCredentials",value:function(){return {passcode:this.values.password}}},{key:"getInputCredentials",value:function(t){return Object.assign(Object.assign({},t.form.value[0]),{name:"password",required:t.required})}},{key:"getValuesAfterProceed",value:function(){var t;if(this.remediation.value.some((function(t){return "credentials"===t.name}))){var e=null===(t=this.values.authenticators)||void 0===t?void 0:t.filter((function(t){return "password"!==t.type}));return Object.assign(Object.assign({},this.values),{authenticators:e})}return Wr()(st()(n.prototype),"getValuesAfterProceed",this).call(this)}}]),n}(Nr);function Qr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}();return function(){var n,r=st()(t);if(e){var o=st()(this).constructor;n=Reflect.construct(r,arguments,o);}else n=r.apply(this,arguments);return at()(this,n)}}Zr.remediationName="identify";var to=function(t){ot()(n,t);var e=Qr(n);function n(){var t;return u()(this,n),(t=e.apply(this,arguments)).map={credentials:[]},t}return c()(n,[{key:"mapCredentials",value:function(){return {passcode:this.values.newPassword}}},{key:"getInputCredentials",value:function(t){var e="password"===this.getRelatesToType()?"newPassword":"verificationCode";return Object.assign(Object.assign({},t.form.value[0]),{name:e})}}]),n}(Nr);function eo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}();return function(){var n,r=st()(t);if(e){var o=st()(this).constructor;n=Reflect.construct(r,arguments,o);}else n=r.apply(this,arguments);return at()(this,n)}}to.remediationName="reenroll-authenticator";var no=function(t){ot()(n,t);var e=eo(n);function n(){return u()(this,n),e.apply(this,arguments)}return c()(n,[{key:"canRemediate",value:function(){return !1}},{key:"getNextStep",value:function(){var t=this.remediation;return {name:t.name,type:t.type,idp:t.idp,href:t.href}}}]),n}(Nr);function ro(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}();return function(){var n,r=st()(t);if(e){var o=st()(this).constructor;n=Reflect.construct(r,arguments,o);}else n=r.apply(this,arguments);return at()(this,n)}}function oo(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return io(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return io(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return {s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return {s:function(){n=n.call(t);},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t;},f:function(){try{a||null==n.return||n.return();}finally{if(u)throw i}}}}function io(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ao(t,e){var n,r,o=oo(t);try{var i=function(){var t=r.value;if(n=e.find((function(e){return e.relatesTo.type===t.type})))return "break"};for(o.s();!(r=o.n()).done;){if("break"===i())break}}catch(t){o.e(t);}finally{o.f();}return n}no.remediationName="redirect-idp";var uo=function(t){ot()(n,t);var e=ro(n);function n(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u()(this,n),(r=e.call(this,t,o)).map={authenticator:[]};var i=r.values,a=i.authenticator,s=i.authenticators,c=null==s?void 0:s.some((function(t){return t.type===a}));return a&&!c&&(r.values.authenticators=[].concat(Or()(s||[]),[{type:a}])),r}return c()(n,[{key:"canRemediate",value:function(){var t=this.values.authenticators,e=Fr(this.remediation).options;return !(!t||!t.length)&&!!ao(t,e)}},{key:"getNextStep",value:function(){var t=Wr()(st()(n.prototype),"getNextStep",this).call(this),e=Fr(this.remediation).options.map((function(t){return {label:t.label,value:t.relatesTo.type}}));return Object.assign(Object.assign({},t),{options:e})}},{key:"mapAuthenticator",value:function(t){var e=ao(this.values.authenticators,t.options);return {id:null==e?void 0:e.value.form.value.find((function(t){return "id"===t.name})).value}}},{key:"getInputAuthenticator",value:function(){return {name:"authenticator",type:"string"}}}]),n}(Nr);function so(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}();return function(){var n,r=st()(t);if(e){var o=st()(this).constructor;n=Reflect.construct(r,arguments,o);}else n=r.apply(this,arguments);return at()(this,n)}}var co=function(t){ot()(n,t);var e=so(n);function n(){return u()(this,n),e.apply(this,arguments)}return n}(uo);function fo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}();return function(){var n,r=st()(t);if(e){var o=st()(this).constructor;n=Reflect.construct(r,arguments,o);}else n=r.apply(this,arguments);return at()(this,n)}}co.remediationName="select-authenticator-authenticate";var lo=function(t){ot()(n,t);var e=fo(n);function n(){return u()(this,n),e.apply(this,arguments)}return n}(uo);function ho(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}();return function(){var n,r=st()(t);if(e){var o=st()(this).constructor;n=Reflect.construct(r,arguments,o);}else n=r.apply(this,arguments);return at()(this,n)}}lo.remediationName="select-authenticator-enroll";var po=function(t){ot()(n,t);var e=ho(n);function n(){return u()(this,n),e.apply(this,arguments)}return c()(n,[{key:"canRemediate",value:function(){return !0}}]),n}(Nr);function vo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}();return function(){var n,r=st()(t);if(e){var o=st()(this).constructor;n=Reflect.construct(r,arguments,o);}else n=r.apply(this,arguments);return at()(this,n)}}po.remediationName="select-enroll-profile";var yo=function(t){ot()(n,t);var e=vo(n);function n(t){var r,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u()(this,n),(r=e.call(this,t,i)).map={authenticator:[]};var a=r.values.authenticators,s=r.getRelatesToType(),c=null===(o=a)||void 0===o?void 0:o.find((function(t){return t.type===s}));return r.values.authenticators=c?a.map((function(t){return s===t.type?r.mapAuthenticatorFromValues(t):t})):[].concat(Or()(a),[r.mapAuthenticatorFromValues()]),r}return c()(n,[{key:"getNextStep",value:function(){var t=Wr()(st()(n.prototype),"getNextStep",this).call(this),e=this.getMethodTypes();return Object.assign(Object.assign({},t),e&&{options:e})}},{key:"getAuthenticatorFromValues",value:function(){if(!this.values.authenticators)return null;var t=this.getRelatesToType();return this.values.authenticators.find((function(e){return e.type===t}))}},{key:"mapAuthenticatorFromValues",value:function(t){var e=this.getRelatesToType(),n=this.values.methodType;return Object.assign(Object.assign({type:e},t&&t),n&&{methodType:n})}},{key:"getAuthenticatorFromRemediation",value:function(){return this.remediation.value.find((function(t){return "authenticator"===t.name}))}},{key:"getMethodTypes",value:function(){var t;return null===(t=this.getAuthenticatorFromRemediation().form.value.find((function(t){return "methodType"===t.name})))||void 0===t?void 0:t.options}}]),n}(Nr);function go(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}();return function(){var n,r=st()(t);if(e){var o=st()(this).constructor;n=Reflect.construct(r,arguments,o);}else n=r.apply(this,arguments);return at()(this,n)}}var mo=function(t){ot()(n,t);var e=go(n);function n(){return u()(this,n),e.apply(this,arguments)}return c()(n,[{key:"canRemediate",value:function(){var t=this.getAuthenticatorFromValues();return !(!t||!t.methodType)}},{key:"mapAuthenticator",value:function(){var t=this.getAuthenticatorFromRemediation(),e=this.getAuthenticatorFromValues();return {id:t.form.value.find((function(t){return "id"===t.name})).value,enrollmentId:t.form.value.find((function(t){return "enrollmentId"===t.name})).value,methodType:e.methodType}}},{key:"getInputAuthenticator",value:function(){var t=this.getAuthenticatorFromRemediation(),e=t.form.value.find((function(t){return "methodType"===t.name}));return e&&e.options?{name:"methodType",type:"string",required:!0}:Or()(t.form.value)}}]),n}(yo);function bo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}();return function(){var n,r=st()(t);if(e){var o=st()(this).constructor;n=Reflect.construct(r,arguments,o);}else n=r.apply(this,arguments);return at()(this,n)}}mo.remediationName="authenticator-verification-data";var wo=function(t){ot()(n,t);var e=bo(n);function n(){return u()(this,n),e.apply(this,arguments)}return c()(n,[{key:"canRemediate",value:function(){var t=this.getAuthenticatorFromValues();return !!(t&&t.methodType&&t.phoneNumber)}},{key:"mapAuthenticator",value:function(){var t=this.getAuthenticatorFromValues();return {id:Fr(this.remediation).form.value.find((function(t){return "id"===t.name})).value,methodType:t.methodType,phoneNumber:t.phoneNumber}}},{key:"getInputAuthenticator",value:function(){return [{name:"methodType",type:"string",required:!0},{name:"phoneNumber",type:"string",required:!0}]}},{key:"mapAuthenticatorFromValues",value:function(t){t=Wr()(st()(n.prototype),"mapAuthenticatorFromValues",this).call(this,t);var e=this.values.phoneNumber;return Object.assign(Object.assign({},t),e&&{phoneNumber:e})}}]),n}(yo);function xo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}();return function(){var n,r=st()(t);if(e){var o=st()(this).constructor;n=Reflect.construct(r,arguments,o);}else n=r.apply(this,arguments);return at()(this,n)}}wo.remediationName="authenticator-enrollment-data";var ko=function(t){ot()(n,t);var e=xo(n);function n(){return u()(this,n),e.apply(this,arguments)}return c()(n,[{key:"canRemediate",value:function(){return !!this.values.skip}}]),n}(Nr);function So(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return To(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return To(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return {s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return {s:function(){n=n.call(t);},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t;},f:function(){try{a||null==n.return||n.return();}finally{if(u)throw i}}}}function To(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}ko.remediationName="skip";var _o=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t));}catch(t){i(t);}}function u(t){try{s(r.throw(t));}catch(t){i(t);}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e);}))).then(a,u);}s((r=r.apply(t,e||[])).next());}))};function Oo(t){var e=[],n=t.actions,r=t.neededToProceed;return n["currentAuthenticator-recover"]&&e.push(Ye.PASSWORD_RECOVERY),r.some((function(t){return "select-enroll-profile"===t.name}))&&e.push(Ye.REGISTRATION),r.some((function(t){return "redirect-idp"===t.name}))&&e.push(Ye.SOCIAL_IDP),e}function Eo(t){var e,n=[],r=Object.values(i).reduce((function(t,e){return e.remediationName&&(t[e.remediationName]=e),t}),{}),o=So(t);try{for(o.s();!(e=o.n()).done;){var a=e.value,u=r[a.name];if(u){var s=new u(a);n.push(s.getNextStep());}}}catch(t){o.e(t);}finally{o.f();}return n}function Ao(t,e){return _o(this,void 0,void 0,l.a.mark((function n(){var r,o,i,a,u,s,c,f,h,p,d,v,y,g,m,b,w,x,k,S,T,_,O,E,A,R;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return f=ze.PENDING,h=!1,n.prev=2,n.next=5,kr(t,e);case 5:return p=n.sent,d=p.interactionHandle,v=p.meta,n.next=10,Tr(t,{interactionHandle:d});case 10:if(y=n.sent,e.flow||e.actions){n.next=17;break}u=v,s=Oo(y),c=Eo(y.neededToProceed),n.next=46;break;case 17:return g=Object.assign(Object.assign({},e),{stateHandle:y.rawIdxState.stateHandle}),n.next=20,Ur(y,g,e);case 20:if(m=n.sent,b=m.idxResponse,w=m.nextStep,x=m.terminal,k=m.canceled,S=m.messages,i=S,(o=w)&&b&&t.transactionManager.saveIdxResponse(b.rawIdxState),x&&(f=ze.TERMINAL,h=!0),!k){n.next=35;break}f=ze.CANCELED,h=!0,n.next=46;break;case 35:if(!(null==b?void 0:b.interactionCode)){n.next=46;break}return n.next=38,e.flowMonitor.isFinished();case 38:if(n.sent){n.next=40;break}throw new bt("Current flow is not supported, check policy settings in your org.");case 40:return T=v.clientId,_=v.codeVerifier,O=v.ignoreSignature,E=v.redirectUri,A=v.urls,R=v.scopes,n.next=43,t.token.exchangeCodeForTokens({interactionCode:b.interactionCode,clientId:T,codeVerifier:_,ignoreSignature:O,redirectUri:E,scopes:R},A);case 43:r=n.sent,f=ze.SUCCESS,h=!0;case 46:n.next=53;break;case 48:n.prev=48,n.t0=n.catch(2),a=n.t0,f=ze.FAILURE,h=!0;case 53:return h&&t.transactionManager.clear(),n.abrupt("return",Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({status:f},u&&{meta:u}),s&&{enabledFeatures:s}),c&&{availableSteps:c}),r&&{tokens:r.tokens}),o&&{nextStep:o}),i&&{messages:i}),a&&{error:a}));case 55:case"end":return n.stop()}}),n,null,[[2,48]])})))}var Ro=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t));}catch(t){i(t);}}function u(t){try{s(r.throw(t));}catch(t){i(t);}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e);}))).then(a,u);}s((r=r.apply(t,e||[])).next());}))},Po=function(){function t(e){u()(this,t),this.authClient=e;}return c()(t,[{key:"loopDetected",value:function(t){return this.previousRemediator&&this.previousRemediator.getName()===t.getName()||(this.previousRemediator=t,!1)}},{key:"isRemediatorCandidate",value:function(t,e,n){var r=t.getName();return !(!n.skip&&"skip"===r)&&(!n.skip||"skip"===r)}},{key:"trackRemediations",value:function(t){return Ro(this,void 0,void 0,l.a.mark((function e(){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gr(this.authClient);case 2:n=e.sent,r=n.remediations||[],n=Object.assign(Object.assign({},n),{remediations:[].concat(Or()(r),[t])}),mr(this.authClient,n);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"isFinished",value:function(){return Promise.resolve(!0)}}]),t}();function jo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}();return function(){var n,r=st()(t);if(e){var o=st()(this).constructor;n=Reflect.construct(r,arguments,o);}else n=r.apply(this,arguments);return at()(this,n)}}var Co=function(t){ot()(n,t);var e=jo(n);function n(){return u()(this,n),e.apply(this,arguments)}return c()(n,[{key:"isRemediatorCandidate",value:function(t,e,r){var o,i=null===(o=this.previousRemediator)||void 0===o?void 0:o.getName();return ("select-authenticator-enroll"!==t.getName()||!["select-authenticator-enroll","authenticator-enrollment-data"].includes(i))&&Wr()(st()(n.prototype),"isRemediatorCandidate",this).call(this,t,e,r)}}]),n}(Po);function Io(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}();return function(){var n,r=st()(t);if(e){var o=st()(this).constructor;n=Reflect.construct(r,arguments,o);}else n=r.apply(this,arguments);return at()(this,n)}}var Mo=function(t){ot()(n,t);var e=Io(n);function n(){return u()(this,n),e.apply(this,arguments)}return c()(n,[{key:"isRemediatorCandidate",value:function(t,e,r){var o,i=null===(o=this.previousRemediator)||void 0===o?void 0:o.getName(),a=t.getName();return ("select-authenticator-authenticate"!==a||!["select-authenticator-authenticate"].includes(i))&&(("select-authenticator-authenticate"!==a||!e.some((function(t){return "challenge-authenticator"===t.name})))&&(("select-authenticator-enroll"!==a||!["select-authenticator-enroll","authenticator-enrollment-data"].includes(i))&&Wr()(st()(n.prototype),"isRemediatorCandidate",this).call(this,t,e,r)))}}]),n}(Po);function Uo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return !1}}();return function(){var n,r=st()(t);if(e){var o=st()(this).constructor;n=Reflect.construct(r,arguments,o);}else n=r.apply(this,arguments);return at()(this,n)}}var Lo=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t));}catch(t){i(t);}}function u(t){try{s(r.throw(t));}catch(t){i(t);}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e);}))).then(a,u);}s((r=r.apply(t,e||[])).next());}))},Fo=function(t){ot()(n,t);var e=Uo(n);function n(){return u()(this,n),e.apply(this,arguments)}return c()(n,[{key:"isRemediatorCandidate",value:function(t,e,r){var o,i=null===(o=this.previousRemediator)||void 0===o?void 0:o.getName(),a=t.getName();return ("select-authenticator-authenticate"!==a||!["select-authenticator-authenticate","reenroll-authenticator"].includes(i))&&(("select-authenticator-authenticate"!==a||!e.some((function(t){return "challenge-authenticator"===t.name})))&&Wr()(st()(n.prototype),"isRemediatorCandidate",this).call(this,t,e,r))}},{key:"isFinished",value:function(){var t=this,e=Object.create(null,{isFinished:{get:function(){return Wr()(st()(n.prototype),"isFinished",t)}}});return Lo(this,void 0,void 0,l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,gr(this.authClient);case 2:if(n=t.sent,n.remediations.includes("reset-authenticator")){t.next=6;break}return t.abrupt("return",!1);case 6:return t.next=8,e.isFinished.call(this);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)})))}}]),n}(Po),No=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t));}catch(t){i(t);}}function u(t){try{s(r.throw(t));}catch(t){i(t);}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e);}))).then(a,u);}s((r=r.apply(t,e||[])).next());}))},Do={identify:Zr,"select-authenticator-authenticate":co,"select-authenticator-enroll":lo,"authenticator-enrollment-data":wo,"authenticator-verification-data":mo,"enroll-authenticator":Kr,"challenge-authenticator":Vr,"reenroll-authenticator":to,"redirect-idp":no};function Bo(t,e){return No(this,void 0,void 0,l.a.mark((function n(){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=new Mo(t),n.abrupt("return",Ao(t,Object.assign(Object.assign({},e),{flow:Do,flowMonitor:r})));case 2:case"end":return n.stop()}}),n)})))}var Ho=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t));}catch(t){i(t);}}function u(t){try{s(r.throw(t));}catch(t){i(t);}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e);}))).then(a,u);}s((r=r.apply(t,e||[])).next());}))};function Ko(t,e){return Ho(this,void 0,void 0,l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Ao(t,Object.assign(Object.assign({},e),{actions:["cancel"]})));case 1:case"end":return n.stop()}}),n)})))}var qo=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t));}catch(t){i(t);}}function u(t){try{s(r.throw(t));}catch(t){i(t);}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e);}))).then(a,u);}s((r=r.apply(t,e||[])).next());}))};function Vo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return qo(this,void 0,void 0,l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Ao(t,e));case 1:case"end":return n.stop()}}),n)})))}var zo=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t));}catch(t){i(t);}}function u(t){try{s(r.throw(t));}catch(t){i(t);}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e);}))).then(a,u);}s((r=r.apply(t,e||[])).next());}))},Yo={"select-enroll-profile":po,"enroll-profile":Jr,"authenticator-enrollment-data":wo,"select-authenticator-enroll":lo,"enroll-authenticator":Kr,skip:ko};function Go(t,e){return zo(this,void 0,void 0,l.a.mark((function n(){var r,o,i,a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(yr(t)){n.next=8;break}return n.next=3,Vo(t,e);case 3:if(r=n.sent,!(o=r.enabledFeatures)||o.includes(Ye.REGISTRATION)){n.next=8;break}return i=new bt("Registration is not supported based on your current org configuration."),n.abrupt("return",{status:ze.FAILURE,error:i});case 8:return a=new Co(t),n.abrupt("return",Ao(t,Object.assign(Object.assign({},e),{flow:Yo,flowMonitor:a})));case 10:case"end":return n.stop()}}),n)})))}var Jo=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t));}catch(t){i(t);}}function u(t){try{s(r.throw(t));}catch(t){i(t);}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e);}))).then(a,u);}s((r=r.apply(t,e||[])).next());}))},$o={identify:Zr,"identify-recovery":Zr,"select-authenticator-authenticate":co,"challenge-authenticator":Vr,"authenticator-verification-data":mo,"reset-authenticator":Yr,"reenroll-authenticator":to};function Wo(t,e){return Jo(this,void 0,void 0,l.a.mark((function n(){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=new Fo(t),n.abrupt("return",Ao(t,Object.assign(Object.assign({},e),{flow:$o,flowMonitor:r,actions:["currentAuthenticator-recover","currentAuthenticatorEnrollment-recover"]})));case 2:case"end":return n.stop()}}),n)})))}var Xo=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t));}catch(t){i(t);}}function u(t){try{s(r.throw(t));}catch(t){i(t);}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e);}))).then(a,u);}s((r=r.apply(t,e||[])).next());}))};function Zo(t,e){return Xo(this,void 0,void 0,l.a.mark((function n(){var r,o,i,a,u,s,c,f,h,p;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.transactionManager.load()){n.next=3;break}throw new bt("No transaction data was found in storage");case 3:if(o=r.codeVerifier,i=r.state,a=new URL(e),u=a.searchParams,s=u.get("state"),c=u.get("interaction_code"),!(f=u.get("error"))){n.next=10;break}throw new Ut(f,u.get("error_description"));case 10:if(s===i){n.next=12;break}throw new bt("State in redirect uri does not match with transaction state");case 12:if(c){n.next=14;break}throw new bt("Unable to parse interaction_code from the url");case 14:return n.next=16,t.token.exchangeCodeForTokens({interactionCode:c,codeVerifier:o});case 16:h=n.sent,p=h.tokens,t.tokenManager.setTokens(p);case 19:case"end":return n.stop()}}),n)})))}var Qo=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t));}catch(t){i(t);}}function u(t){try{s(r.throw(t));}catch(t){i(t);}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e);}))).then(a,u);}s((r=r.apply(t,e||[])).next());}))},ti=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);}return n},ei=n(403),ni=function(){function t(e){var n=this;u()(this,t),this.options=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return jn(t),K({issuer:nt((t=hr(lr(),t)).issuer),tokenUrl:nt(t.tokenUrl),authorizeUrl:nt(t.authorizeUrl),userinfoUrl:nt(t.userinfoUrl),revokeUrl:nt(t.revokeUrl),logoutUrl:nt(t.logoutUrl),clientId:t.clientId,redirectUri:t.redirectUri,state:t.state,scopes:t.scopes,postLogoutRedirectUri:t.postLogoutRedirectUri,responseMode:t.responseMode,responseType:t.responseType,pkce:!1!==t.pkce,useInteractionCodeFlow:t.useInteractionCodeFlow,httpRequestClient:t.httpRequestClient,transformErrorXHR:t.transformErrorXHR,transformAuthState:t.transformAuthState,restoreOriginalUri:t.restoreOriginalUri,storageUtil:t.storageUtil,headers:t.headers,devMode:!!t.devMode,storageManager:t.storageManager,cookies:ue()?fr(t,ve()):t.cookies,ignoreSignature:!!t.ignoreSignature,clientSecret:t.clientSecret})}(e);var r=this.options,o=r.storageManager,i=r.cookies,a=r.storageUtil;this.storageManager=new er(o,i,a),this.transactionManager=new rr(Object.assign({storageManager:this.storageManager},e.transactionManager)),this.tx={status:At.bind(null,this),resume:Rt.bind(null,this),exists:Object.assign(jt.bind(null,this),{_get:function(t){return a.storage.get(t)}}),introspect:Pt.bind(null,this)},this.pkce={DEFAULT_CODE_CHALLENGE_METHOD:Yt.DEFAULT_CODE_CHALLENGE_METHOD,generateVerifier:Yt.generateVerifier,computeChallenge:Yt.computeChallenge},Object.assign(this.options.storageUtil,{getPKCEStorage:this.storageManager.getLegacyPKCEStorage.bind(this.storageManager),getHttpCache:this.storageManager.getHttpCache.bind(this.storageManager)}),this._pending={handleLogin:!1},ue()?(this.options=Object.assign(this.options,{redirectUri:Q(e.redirectUri,window.location.origin)}),this.userAgent=Cn(e,"okta-auth-js/".concat("5.2.3"))):this.userAgent=Cn(e,"okta-auth-js-server/".concat("5.2.3")),e.maxClockSkew||0===e.maxClockSkew?this.options.maxClockSkew=e.maxClockSkew:this.options.maxClockSkew=d,this.session={close:$t.bind(null,this),exists:Gt.bind(null,this),get:Jt.bind(null,this),refresh:Wt.bind(null,this),setCookieAndRedirect:Xt.bind(null,this)},this._tokenQueue=new Yn,this.token={prepareTokenParams:Be.bind(null,this),exchangeCodeForTokens:cn.bind(null,this),getWithoutPrompt:dn.bind(null,this),getWithPopup:_n.bind(null,this),getWithRedirect:On.bind(null,this),parseFromUrl:En.bind(null,this),decode:un,revoke:sn.bind(null,this),renew:wn.bind(null,this),renewTokensWithRefresh:yn.bind(null,this),renewTokens:kn.bind(null,this),getUserInfo:Tn.bind(null,this),verify:ln.bind(null,this),isLoginRedirect:Ne.bind(null,this)};var s=["decode","isLoginRedirect"];Object.keys(this.token).forEach((function(t){if(!(s.indexOf(t)>=0)){var e=n.token[t];n.token[t]=Yn.prototype.push.bind(n._tokenQueue,e,null);}})),Object.assign(this.token.getWithRedirect,{_setLocation:function(t){window.location=t;}}),Object.assign(this.token.parseFromUrl,{_getHistory:function(){return window.history},_getLocation:function(){return window.location},_getDocument:function(){return window.document}}),this.idx={authenticate:Bo.bind(null,this),register:Go.bind(null,this),cancel:Ko.bind(null,this),recoverPassword:Wo.bind(null,this),handleInteractionCodeRedirect:Zo.bind(null,this),startTransaction:Vo.bind(null,this)},this.fingerprint=Gn.bind(null,this),this.emitter=new ei,this.tokenManager=new zn(this,e.tokenManager),this.authStateManager=new Zn(this);}return c()(t,[{key:"start",value:function(){this.tokenManager.start(),this.authStateManager.updateAuthState();}},{key:"stop",value:function(){this.tokenManager.stop();}},{key:"isInteractionRequired",value:function(){return De(this)}},{key:"isInteractionRequiredError",value:function(t){return Re(t)}},{key:"signIn",value:function(t){return Qo(this,void 0,void 0,l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.signInWithCredentials(t));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"signInWithCredentials",value:function(t){return Qo(this,void 0,void 0,l.a.mark((function e(){var n,r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=q(t||{}),n=function(e){return delete t.sendFingerprint,Ct(r,"/api/v1/authn",t,e)},t.sendFingerprint){e.next=4;break}return e.abrupt("return",n());case 4:return e.abrupt("return",this.fingerprint().then((function(t){return n({headers:{"X-Device-Fingerprint":t}})})));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"signInWithRedirect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Qo(this,void 0,void 0,l.a.mark((function e(){var n,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.originalUri,r=ti(t,["originalUri"]),!this._pending.handleLogin){e.next=3;break}return e.abrupt("return");case 3:return this._pending.handleLogin=!0,e.prev=4,n&&this.setOriginalUri(n),o=Object.assign({scopes:this.options.scopes||["openid","email","profile"]},r),e.next=9,this.token.getWithRedirect(o);case 9:return e.prev=9,this._pending.handleLogin=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[4,,9,12]])})))}},{key:"closeSession",value:function(){return this.tokenManager.clear(),this.session.close().catch((function(t){if("AuthApiError"===t.name&&"E0000007"===t.errorCode)return null;throw t}))}},{key:"revokeAccessToken",value:function(t){return Qo(this,void 0,void 0,l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=6;break}return e.next=3,this.tokenManager.getTokens();case 3:t=e.sent.accessToken,n=this.tokenManager.getStorageKeyByType("accessToken"),this.tokenManager.remove(n);case 6:if(t){e.next=8;break}return e.abrupt("return",Promise.resolve(null));case 8:return e.abrupt("return",this.token.revoke(t));case 9:case"end":return e.stop()}}),e,this)})))}},{key:"revokeRefreshToken",value:function(t){return Qo(this,void 0,void 0,l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=6;break}return e.next=3,this.tokenManager.getTokens();case 3:t=e.sent.refreshToken,n=this.tokenManager.getStorageKeyByType("refreshToken"),this.tokenManager.remove(n);case 6:if(t){e.next=8;break}return e.abrupt("return",Promise.resolve(null));case 8:return e.abrupt("return",this.token.revoke(t));case 9:case"end":return e.stop()}}),e,this)})))}},{key:"getSignOutRedirectUrl",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.idToken,n=t.postLogoutRedirectUri,r=t.state;if(e||(e=this.tokenManager.getTokensSync().idToken),!e)return "";n||(n=this.options.postLogoutRedirectUri);var o=Ee(this).logoutUrl,i=e.idToken,a=o+"?id_token_hint="+encodeURIComponent(i);return n&&(a+="&post_logout_redirect_uri="+encodeURIComponent(n)),r&&(a+="&state="+encodeURIComponent(r)),a}},{key:"signOut",value:function(t){return Qo(this,void 0,void 0,l.a.mark((function e(){var n,r,o,i,a,u,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object.assign({},t),n=window.location.origin,r=window.location.href,o=t.postLogoutRedirectUri||this.options.postLogoutRedirectUri||n,i=t.accessToken,a=t.refreshToken,u=!1!==t.revokeAccessToken,(s=!1!==t.revokeRefreshToken)&&void 0===a&&(a=this.tokenManager.getTokensSync().refreshToken),u&&void 0===i&&(i=this.tokenManager.getTokensSync().accessToken),t.idToken||(t.idToken=this.tokenManager.getTokensSync().idToken),this.tokenManager.clear(),!s||!a){e.next=15;break}return e.next=15,this.revokeRefreshToken(a);case 15:if(!u||!i){e.next=18;break}return e.next=18,this.revokeAccessToken(i);case 18:if(c=this.getSignOutRedirectUrl(Object.assign(Object.assign({},t),{postLogoutRedirectUri:o}))){e.next=23;break}return e.abrupt("return",this.closeSession().then((function(){o===r?window.location.reload():window.location.assign(o);})));case 23:window.location.assign(c);case 24:case"end":return e.stop()}}),e,this)})))}},{key:"webfinger",value:function(t){var e="/.well-known/webfinger"+et(t);return gt.get(this,e,{headers:{Accept:"application/jrd+json"}})}},{key:"isAuthenticated",value:function(){return Qo(this,void 0,void 0,l.a.mark((function t(){var e,n,r,o,i,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.tokenManager.getTokensSync(),n=e.accessToken,r=e.idToken,o=this.options.tokenManager||{},i=o.autoRenew,a=o.autoRemove,!n||!this.tokenManager.hasExpired(n)){t.next=11;break}if(n=null,!i){t.next=10;break}return t.next=7,this.tokenManager.renew("accessToken");case 7:n=t.sent,t.next=11;break;case 10:a&&this.tokenManager.remove("accessToken");case 11:if(!r||!this.tokenManager.hasExpired(r)){t.next=20;break}if(r=null,!i){t.next=19;break}return t.next=16,this.tokenManager.renew("idToken");case 16:r=t.sent,t.next=20;break;case 19:a&&this.tokenManager.remove("idToken");case 20:return t.abrupt("return",!(!n||!r));case 21:case"end":return t.stop()}}),t,this)})))}},{key:"getUser",value:function(){return Qo(this,void 0,void 0,l.a.mark((function t(){var e,n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.tokenManager.getTokensSync(),n=e.idToken,r=e.accessToken,t.abrupt("return",this.token.getUserInfo(r,n));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"getIdToken",value:function(){var t=this.tokenManager.getTokensSync().idToken;return t?t.idToken:void 0}},{key:"getAccessToken",value:function(){var t=this.tokenManager.getTokensSync().accessToken;return t?t.accessToken:void 0}},{key:"getRefreshToken",value:function(){var t=this.tokenManager.getTokensSync().refreshToken;return t?t.refreshToken:void 0}},{key:"storeTokensFromRedirect",value:function(){return Qo(this,void 0,void 0,l.a.mark((function t(){var e,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.token.parseFromUrl();case 2:e=t.sent,n=e.tokens,this.tokenManager.setTokens(n);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"setOriginalUri",value:function(t){Pn.getSessionStorage().setItem(E,t);}},{key:"getOriginalUri",value:function(){return Pn.getSessionStorage().getItem(E)}},{key:"removeOriginalUri",value:function(){Pn.getSessionStorage().removeItem(E);}},{key:"isLoginRedirect",value:function(){return Ne(this)}},{key:"handleLoginRedirect",value:function(t){return Qo(this,void 0,void 0,l.a.mark((function e(){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}this.tokenManager.setTokens(t),e.next=10;break;case 4:if(!this.isLoginRedirect()){e.next=9;break}return e.next=7,this.storeTokensFromRedirect();case 7:e.next=10;break;case 9:return e.abrupt("return");case 10:return e.next=12,this.authStateManager.updateAuthState();case 12:if(n=this.getOriginalUri(),this.removeOriginalUri(),!(r=this.options.restoreOriginalUri)){e.next=20;break}return e.next=18,r(this,n);case 18:e.next=21;break;case 20:window.location.replace(n);case 21:case"end":return e.stop()}}),e,this)})))}},{key:"isPKCE",value:function(){return !!this.options.pkce}},{key:"hasResponseType",value:function(t){var e=!1;return e=Array.isArray(this.options.responseType)&&this.options.responseType.length?this.options.responseType.indexOf(t)>=0:this.options.responseType===t,e}},{key:"isAuthorizationCodeFlow",value:function(){return this.hasResponseType("code")}},{key:"getIssuerOrigin",value:function(){return this.options.issuer.split("/oauth2/")[0]}},{key:"forgotPassword",value:function(t){return Ct(this,"/api/v1/authn/recovery/password",t)}},{key:"unlockAccount",value:function(t){return Ct(this,"/api/v1/authn/recovery/unlock",t)}},{key:"verifyRecoveryToken",value:function(t){return Ct(this,"/api/v1/authn/recovery/token",t)}}]),t}();ni.features=ni.prototype.features=o,Object.assign(ni,{constants:r,isInteractionRequiredError:Re});var ri=ni;}])}));

    });

    unwrapExports(oktaAuthJs_umd);
    var oktaAuthJs_umd_1 = oktaAuthJs_umd.toRelativeUrl;
    var oktaAuthJs_umd_2 = oktaAuthJs_umd.isAbsoluteUrl;
    var oktaAuthJs_umd_3 = oktaAuthJs_umd.toAbsoluteUrl;
    var oktaAuthJs_umd_4 = oktaAuthJs_umd.OktaAuth;

    /*
     * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.
     * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the "License.")
     *
     * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
     * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     *
     * See the License for the specific language governing permissions and limitations under the License.
     */
    var OKTA_CONFIG = new core.InjectionToken('okta.config.angular');

    var packageInfo = {
        'name': '@okta/okta-angular',
        'version': '3.2.2'
    };

    /*
     * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.
     * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the "License.")
     *
     * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
     * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     *
     * See the License for the specific language governing permissions and limitations under the License.
     */
    var OktaAuthService = /** @class */ (function (_super) {
        __extends(OktaAuthService, _super);
        function OktaAuthService(config, location, router) {
            var _this = this;
            // If a relative `redirectUri` was passed, convert to absolute URL, including base href, if any.
            if (config.redirectUri && !oktaAuthJs_umd_2(config.redirectUri) && location) {
                var baseUri = window.location.origin + location.prepareExternalUrl('');
                config.redirectUri = oktaAuthJs_umd_3(config.redirectUri, baseUri);
            }
            var transformAuthState = function (oktaAuth, authState) { return __awaiter(_this, void 0, void 0, function () {
                var _a;
                return __generator(this, function (_b) {
                    switch (_b.label) {
                        case 0:
                            if (!config.isAuthenticated) return [3 /*break*/, 2];
                            _a = authState;
                            return [4 /*yield*/, config.isAuthenticated(this)];
                        case 1:
                            _a.isAuthenticated = _b.sent();
                            _b.label = 2;
                        case 2:
                            if (!config.transformAuthState) return [3 /*break*/, 4];
                            return [4 /*yield*/, config.transformAuthState(oktaAuth, authState)];
                        case 3:
                            authState = _b.sent();
                            _b.label = 4;
                        case 4: return [2 /*return*/, authState];
                    }
                });
            }); };
            // If a router is available, provide a default implementation of `restoreOriginalUri`
            var restoreOriginalUri = (!config.restoreOriginalUri && router && location) ? function (oktaAuth, originalUri) { return __awaiter(_this, void 0, void 0, function () {
                var baseUrl, routePath;
                return __generator(this, function (_a) {
                    baseUrl = window.location.origin + location.prepareExternalUrl('');
                    routePath = oktaAuthJs_umd_1(originalUri || '/', baseUrl);
                    return [2 /*return*/, router.navigateByUrl(routePath)];
                });
            }); } : config.restoreOriginalUri;
            var options = Object.assign({
                transformAuthState: transformAuthState,
                restoreOriginalUri: restoreOriginalUri
            }, config);
            _this = _super.call(this, options) || this;
            _this.config = config;
            _this.location = location;
            // Customize user agent
            _this.userAgent = packageInfo.name + "/" + packageInfo.version + " " + _this.userAgent;
            // Initialize observers
            _this.observers = [];
            _this.$authenticationState = new rxjs.Observable(function (observer) { _this.observers.push(observer); });
            _this.authStateManager.subscribe(function (authState) {
                _this.emitAuthenticationState(!!authState.isAuthenticated);
            });
            if (!_this.token.isLoginRedirect()) {
                // Trigger an initial change event to make sure authState is latest
                _this.authStateManager.updateAuthState();
            }
            // Start the token auto-renew service
            _this.tokenManager.start();
            return _this;
        }
        OktaAuthService.prototype.ngOnDestroy = function () {
            this.stop();
        };
        OktaAuthService.prototype.emitAuthenticationState = function (state) {
            return __awaiter(this, void 0, void 0, function () {
                return __generator(this, function (_a) {
                    this.observers.forEach(function (observer) { return observer.next(state); });
                    return [2 /*return*/];
                });
            });
        };
        OktaAuthService.prototype.isAuthenticated = function () {
            return __awaiter(this, void 0, void 0, function () {
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            if (!this.config.isAuthenticated) return [3 /*break*/, 2];
                            return [4 /*yield*/, this.config.isAuthenticated(this)];
                        case 1: return [2 /*return*/, _a.sent()];
                        case 2: return [4 /*yield*/, _super.prototype.isAuthenticated.call(this)];
                        case 3: return [2 /*return*/, _a.sent()];
                    }
                });
            });
        };
        OktaAuthService.prototype.signInWithRedirect = function (options) {
            if (options === void 0) { options = {}; }
            return __awaiter(this, void 0, void 0, function () {
                var originalUri;
                return __generator(this, function (_a) {
                    originalUri = options.originalUri || this.getOriginalUri();
                    if (!originalUri) {
                        // Default to the app base as a relative path.
                        options.originalUri = '/';
                    }
                    return [2 /*return*/, _super.prototype.signInWithRedirect.call(this, options)];
                });
            });
        };
        // eslint-disable-next-line @typescript-eslint/no-explicit-any,@typescript-eslint/explicit-module-boundary-types
        OktaAuthService.prototype.signOut = function (options) {
            return __awaiter(this, void 0, void 0, function () {
                var postLogoutRedirectUri;
                return __generator(this, function (_a) {
                    options = options || {};
                    postLogoutRedirectUri = options.postLogoutRedirectUri || this.options.postLogoutRedirectUri;
                    if (!postLogoutRedirectUri && this.location) {
                        // Default to the app base as an absolute URL, including base href, if any.
                        options.postLogoutRedirectUri = window.location.origin + this.location.prepareExternalUrl('/'); // include trailing slash
                    }
                    return [2 /*return*/, _super.prototype.signOut.call(this, options)];
                });
            });
        };
        /**
         * Returns the configuration object used.
         */
        OktaAuthService.prototype.getOktaConfig = function () {
            return this.config;
        };
        OktaAuthService = __decorate([
            core.Injectable(),
            __param(0, core.Inject(OKTA_CONFIG)), __param(1, core.Optional()), __param(2, core.Optional()),
            __metadata("design:paramtypes", [Object, common.Location, Router])
        ], OktaAuthService);
        return OktaAuthService;
    }(oktaAuthJs_umd_4));

    /*
     * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.
     * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the "License.")
     *
     * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
     * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     *
     * See the License for the specific language governing permissions and limitations under the License.
     */
    var OktaCallbackComponent = /** @class */ (function () {
        function OktaCallbackComponent(okta, router, injector) {
            this.okta = okta;
            this.router = router;
            this.injector = injector;
        }
        OktaCallbackComponent.prototype.ngOnInit = function () {
            return __awaiter(this, void 0, void 0, function () {
                var e_1, _a, onAuthResume, onAuthRequired, callbackFn;
                return __generator(this, function (_b) {
                    switch (_b.label) {
                        case 0:
                            _b.trys.push([0, 2, , 3]);
                            // Parse code or tokens from the URL, store tokens in the TokenManager, and redirect back to the originalUri
                            return [4 /*yield*/, this.okta.handleLoginRedirect()];
                        case 1:
                            // Parse code or tokens from the URL, store tokens in the TokenManager, and redirect back to the originalUri
                            _b.sent();
                            return [3 /*break*/, 3];
                        case 2:
                            e_1 = _b.sent();
                            // Callback from social IDP. Show custom login page to continue.
                            if (this.okta.isInteractionRequiredError(e_1) && this.injector) {
                                _a = this.okta.getOktaConfig(), onAuthResume = _a.onAuthResume, onAuthRequired = _a.onAuthRequired;
                                callbackFn = onAuthResume || onAuthRequired;
                                if (callbackFn) {
                                    callbackFn(this.okta, this.injector);
                                    return [2 /*return*/];
                                }
                            }
                            this.error = e_1.toString();
                            return [3 /*break*/, 3];
                        case 3: return [2 /*return*/];
                    }
                });
            });
        };
        OktaCallbackComponent = __decorate([
            core.Component({
                template: "<div>{{error}}</div>"
            }),
            __param(2, core.Optional()),
            __metadata("design:paramtypes", [OktaAuthService, Router, core.Injector])
        ], OktaCallbackComponent);
        return OktaCallbackComponent;
    }());

    /*
     * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.
     * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the "License.")
     *
     * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
     * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     *
     * See the License for the specific language governing permissions and limitations under the License.
     */
    var OktaLoginRedirectComponent = /** @class */ (function () {
        function OktaLoginRedirectComponent(okta) {
            this.okta = okta;
        }
        OktaLoginRedirectComponent.prototype.ngOnInit = function () {
            var originalUri = this.okta.getOriginalUri();
            if (!originalUri) {
                this.okta.setOriginalUri('/');
            }
            this.okta.signInWithRedirect();
        };
        OktaLoginRedirectComponent = __decorate([
            core.Component({ template: "" }),
            __metadata("design:paramtypes", [OktaAuthService])
        ], OktaLoginRedirectComponent);
        return OktaLoginRedirectComponent;
    }());

    /*
     * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.
     * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the "License.")
     *
     * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
     * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     *
     * See the License for the specific language governing permissions and limitations under the License.
     */
    var OktaAuthGuard = /** @class */ (function () {
        function OktaAuthGuard(oktaAuth, injector) {
            var _this = this;
            this.oktaAuth = oktaAuth;
            this.injector = injector;
            this.updateAuthStateListener = function (authState) {
                if (!authState.isAuthenticated) {
                    _this.handleLogin(_this.state.url);
                }
            };
            // Unsubscribe updateAuthStateListener when route change
            var router = injector.get(Router);
            router.events.pipe(operators.filter(function (e) { return e instanceof NavigationStart && _this.state && _this.state.url !== e.url; })).subscribe(function () {
                _this.oktaAuth.authStateManager.unsubscribe(_this.updateAuthStateListener);
            });
        }
        /**
         * Gateway for protected route. Returns true if there is a valid accessToken,
         * otherwise it will cache the route and start the login flow.
         * @param route
         * @param state
         */
        OktaAuthGuard.prototype.canActivate = function (route, state) {
            return __awaiter(this, void 0, void 0, function () {
                var isAuthenticated;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            // Track states for current route
                            this.route = route;
                            this.state = state;
                            // Protect the route after accessing
                            this.oktaAuth.authStateManager.subscribe(this.updateAuthStateListener);
                            return [4 /*yield*/, this.oktaAuth.isAuthenticated()];
                        case 1:
                            isAuthenticated = _a.sent();
                            if (isAuthenticated) {
                                return [2 /*return*/, true];
                            }
                            return [4 /*yield*/, this.handleLogin(state.url)];
                        case 2:
                            _a.sent();
                            return [2 /*return*/, false];
                    }
                });
            });
        };
        OktaAuthGuard.prototype.canActivateChild = function (route, state) {
            return __awaiter(this, void 0, void 0, function () {
                return __generator(this, function (_a) {
                    return [2 /*return*/, this.canActivate(route, state)];
                });
            });
        };
        OktaAuthGuard.prototype.handleLogin = function (fromUri) {
            return __awaiter(this, void 0, void 0, function () {
                var onAuthRequired;
                return __generator(this, function (_a) {
                    onAuthRequired = this.route.data['onAuthRequired'] || this.oktaAuth.getOktaConfig().onAuthRequired;
                    // Store the current path
                    this.oktaAuth.setOriginalUri(fromUri);
                    if (onAuthRequired) {
                        onAuthRequired(this.oktaAuth, this.injector);
                    }
                    else {
                        this.oktaAuth.signInWithRedirect();
                    }
                    return [2 /*return*/];
                });
            });
        };
        OktaAuthGuard = __decorate([
            core.Injectable(),
            __metadata("design:paramtypes", [OktaAuthService, core.Injector])
        ], OktaAuthGuard);
        return OktaAuthGuard;
    }());

    function createOktaService(config, location, router) {
        return new OktaAuthService(config, location, router);
    }

    /*
     * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.
     * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the "License.")
     *
     * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
     * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     *
     * See the License for the specific language governing permissions and limitations under the License.
     */
    var ɵ0$2 = createOktaService;
    var OktaAuthModule = /** @class */ (function () {
        function OktaAuthModule() {
        }
        OktaAuthModule = __decorate([
            core.NgModule({
                declarations: [
                    OktaCallbackComponent,
                    OktaLoginRedirectComponent,
                ],
                exports: [
                    OktaCallbackComponent,
                    OktaLoginRedirectComponent,
                ],
                providers: [
                    OktaAuthGuard,
                    {
                        provide: OktaAuthService,
                        useFactory: ɵ0$2,
                        deps: [
                            OKTA_CONFIG,
                            common.Location,
                            Router // optional
                        ]
                    }
                ]
            })
        ], OktaAuthModule);
        return OktaAuthModule;
    }());

    exports.OKTA_CONFIG = OKTA_CONFIG;
    exports.OktaAuthGuard = OktaAuthGuard;
    exports.OktaAuthModule = OktaAuthModule;
    exports.OktaAuthService = OktaAuthService;
    exports.OktaCallbackComponent = OktaCallbackComponent;
    exports.OktaLoginRedirectComponent = OktaLoginRedirectComponent;
    exports.ɵa = createOktaService;

    Object.defineProperty(exports, '__esModule', { value: true });

})));
//# sourceMappingURL=okta-angular.umd.js.map
